{"version":3,"file":"4chan-XT.min.user.js","sources":["../../../../src/globals/globals.ts","../src/classes/Callbacks.js","../src/config/Config.js","../src/Monitoring/Favicon.js","../src/platform/$$.js","../src/Posting/Captcha.replace.js","../src/Posting/Captcha.t.js","../../../../src/platform/helpers.ts","../src/classes/DataBoard.js","../../../../src/classes/SimpleDict.ts","../../../../src/classes/Thread.ts","../src/classes/CatalogThread.js","../src/General/UI.js","../src/Miscellaneous/Nav.js","../src/Images/ImageHost.js","../src/Images/Volume.js","../src/Images/ImageCommon.js","../../../../src/Images/Audio.ts","../../../../src/Images/ImageExpand.ts","../../../../src/classes/Post.ts","../src/Menu/Menu.js","../src/Filtering/Recursive.js","../src/Filtering/PostHiding.js","../src/Miscellaneous/RelativeDates.js","../src/General/BoardConfig.js","../../../../src/classes/Board.ts","../src/Posting/PostRedirect.js","../src/Miscellaneous/ExpandComment.js","../src/Quotelinks/QuoteYou.js","../src/classes/RandomAccessList.js","../src/Monitoring/Unread.js","../src/Miscellaneous/ExpandThread.js","../src/Monitoring/UnreadIndex.js","../src/Monitoring/ThreadWatcher.js","../../../../src/globals/jsx.ts","../../../../src/Archive/Parse.ts","../../../../src/classes/Fetcher.ts","../src/Quotelinks/QuotePreview.js","../src/General/Index.js","../src/Filtering/ThreadHiding.js","../../../../src/General/Settings/SettingsHtml.tsx","../../../../src/css/style.ts","../../../../src/css/CSS.ts","../src/Miscellaneous/CustomCSS.js","../src/site/SW.tinyboard.js","../../../../src/Miscellaneous/PassMessage/PassMessageHtml.tsx","../src/Miscellaneous/PassMessage.js","../src/Miscellaneous/Report.js","../src/Posting/PostSuccessful.js","../../../../src/site/SW.yotsuba.tsx","../../../../src/site/SW.yotsuba.Build/PostInfoHtml.tsx","../../../../src/site/SW.yotsuba.Build/FileHtml.tsx","../../../../src/site/SW.yotsuba.Build/CatalogThreadHtml.tsx","../src/site/SW.js","../../../../src/Miscellaneous/FileInfo.tsx","../../../../src/Miscellaneous/Time.ts","../src/Monitoring/ReplyPruning.js","../src/Quotelinks/QuoteThreading.js","../../../../src/Monitoring/ThreadUpdater.ts","../../../../src/General/Settings.tsx","../src/Images/FappeTyme.js","../src/Images/Sauce.js","../src/Images/Gallery.js","../src/Linkification/Embedding.js","../src/Miscellaneous/Keybinds.js","../src/Posting/Captcha.js","../src/Posting/QR.js","../src/platform/CrossOrigin.js","../../../../src/platform/$.ts","../src/General/Get.js","../../../../src/Filtering/Filter.ts","../src/site/Site.js","../src/Miscellaneous/CatalogLinks.js","../src/General/Header.js","../src/classes/Notice.js","../../../../src/Archive/Redirect.ts","../src/classes/CatalogThreadNative.js","../src/Filtering/Anonymize.js","../src/Images/ImageHover.js","../src/Images/ImageLoader.js","../src/Images/Metadata.js","../src/Images/RevealSpoilers.js","../src/Linkification/Linkify.js","../src/Menu/ArchiveLink.js","../src/Menu/CopyTextLink.js","../src/Menu/DeleteLink.js","../src/Menu/DownloadLink.js","../src/Menu/ReportLink.js","../src/Miscellaneous/AntiAutoplay.js","../src/Miscellaneous/Banner.js","../src/Miscellaneous/Flash.js","../src/Miscellaneous/Fourchan.js","../src/Miscellaneous/IDColor.js","../src/Miscellaneous/IDHighlight.js","../src/Miscellaneous/IDPostCount.js","../src/Miscellaneous/ModContact.js","../src/Miscellaneous/NormalizeURL.js","../src/Miscellaneous/PostJumper.js","../src/Miscellaneous/PSA.js","../src/Miscellaneous/PSAHiding.js","../src/Miscellaneous/RemoveSpoilers.js","../src/Miscellaneous/ThreadLinks.js","../src/Miscellaneous/Tinyboard.js","../src/Monitoring/MarkNewIPs.js","../src/Monitoring/ThreadStats.js","../src/Posting/PassLink.js","../src/Quotelinks/QuoteInline.js","../src/Quotelinks/QuoteBacklink.js","../src/Quotelinks/QuoteCT.js","../src/Quotelinks/QuoteOP.js","../src/Quotelinks/Quotify.js","../src/General/Polyfill.js","../../../../src/Archive/RestoreDeletedFromArchive.ts","../src/main/Main.js","../src/Quotelinks/QuoteStrikeThrough.js"],"sourcesContent":[null,"import Main from \"../main/Main\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class Callbacks {\n  static initClass() {\n    this.Post          = new Callbacks('Post');\n    this.Thread        = new Callbacks('Thread');\n    this.CatalogThread = new Callbacks('Catalog Thread');\n    this.CatalogThreadNative = new Callbacks('Catalog Thread');\n  }\n\n  constructor(type) {\n    this.type = type;\n    this.keys = [];\n  }\n\n  push({name, cb}) {\n    if (!this[name]) { this.keys.push(name); }\n    return this[name] = cb;\n  }\n\n  execute(node, keys=this.keys, force=false) {\n    let errors;\n    if (node.callbacksExecuted && !force) { return; }\n    node.callbacksExecuted = true;\n    for (var name of keys) {\n      try {\n        this[name]?.call(node);\n      } catch (err) {\n        if (!errors) { errors = []; }\n        errors.push({\n          message: ['\"', name, '\" crashed on node ', this.type, ' No.', node.ID, ' (', node.board, ').'].join(''),\n          error: err,\n          html: node.nodes?.root?.outerHTML\n        });\n      }\n    }\n\n    if (errors) { return Main.handleErrors(errors); }\n  }\n}\nCallbacks.initClass();\n","import userCss from './user.css';\nimport banners from './banners.json';\nimport meta from '../../package.json';\n\nconst Config = {\n  main: {\n    'Miscellaneous': {\n      'Redirect to HTTPS': [\n        true,\n        'Redirect to the HTTPS version of 4chan.'\n      ],\n      'JSON Index': [\n        true,\n        'Replace the original board index with one supporting searching, sorting, infinite scrolling, and a catalog mode.'\n      ],\n      [`Use ${meta.name} Catalog`]: [\n        true,\n        `Link to ${meta.name}'s catalog instead of the native 4chan one.`,\n        1\n      ],\n      'Index Refresh Notifications': [\n        false,\n        'Show a notice at the top of the page when the index is refreshed.',\n        1\n      ],\n      'Follow Cursor': [\n        true,\n        'Image Hover and Quote Preview move with the mouse cursor.'\n      ],\n      'Open Threads in New Tab': [\n        false,\n        `Make links to threads in the index / ${meta.name} catalog open in a new tab.`\n      ],\n      'External Catalog': [\n        false,\n        'Link to external catalog instead of the internal one.'\n      ],\n      'Catalog Links': [\n        false,\n        'Add toggle link in header menu to turn Navigation links into links to each board\\'s catalog.'\n      ],\n      'Announcement Hiding': [\n        true,\n        'Add button to hide 4chan announcements.'\n      ],\n      'Desktop Notifications': [\n        true,\n        `Enables desktop notifications across various ${meta.name} features.`\n      ],\n      '404 Redirect': [\n        true,\n        'Redirect dead threads and images to the archives.'\n      ],\n      'Archive Report': [\n        true,\n        'Enable reporting posts to supported archives.'\n      ],\n      'Exempt Archives from Encryption': [\n        false,\n        'Permit loading content from, and warningless redirects to, HTTP-only archives from HTTPS pages.'\n      ],\n      'Keybinds': [\n        true,\n        'Bind actions to keyboard shortcuts.'\n      ],\n      'Time Formatting': [\n        true,\n        'Localize and format timestamps.'\n      ],\n      'Relative Post Dates': [\n        true,\n        'Display dates like \"3 minutes ago\". Tooltip shows the timestamp.'\n      ],\n      'Relative Date Title': [\n        true,\n        'Show Relative Post Date only when hovering over dates.',\n        1\n      ],\n      'Comment Expansion': [\n        true,\n        'Expand comments that are too long to display on the index. Not applicable with JSON Index.'\n      ],\n      'File Info Formatting': [\n        true,\n        'Reformat the file information.'\n      ],\n      'Thread Expansion': [\n        true,\n        'Add buttons to expand threads.'\n      ],\n      'Index Navigation': [\n        false,\n        'Add buttons to navigate between threads.'\n      ],\n      'Reply Navigation': [\n        false,\n        'Add buttons to navigate to top / bottom of thread.'\n      ],\n      'Unique ID and Capcode Navigation': [\n        false,\n        'Add buttons to navigate to posts having the same unique ID or capcode.'\n      ],\n      'Custom Board Titles': [\n        true,\n        'Allow editing of the board title and subtitle by ctrl/\\u2318+clicking them.'\n      ],\n      'Persistent Custom Board Titles': [\n        false,\n        'Force custom board titles to be persistent, even if the board titles are updated.',\n        1\n      ],\n      'Show Updated Notifications': [\n        true,\n        `Show notifications when ${meta.name} is successfully updated.`\n      ],\n      'Color User IDs': [\n        true,\n        'Assign unique colors to user IDs on boards that use them'\n      ],\n      'Count Posts by ID': [\n        true,\n        'Display number of posts in the thread when hovering over an ID.'\n      ],\n      'Remove Spoilers': [\n        false,\n        'Remove all spoilers in text.'\n      ],\n      'Reveal Spoilers': [\n        false,\n        'Indicate spoilers if Remove Spoilers is enabled, or make the text appear hovered if Remove Spoiler is disabled.'\n      ],\n      'Normalize URL': [\n        true,\n        'Rewrite the URL of the current page, removing slugs and excess slashes, and changing /res/ to /thread/.'\n      ],\n      'Work around CORB Bug': [\n        true,\n        'Leave this checked until your garbage browser is fixed.'\n      ],\n      'Disable Autoplaying Sounds': [\n        false,\n        'Prevent sounds on the page from autoplaying.'\n      ],\n      'Disable Native Extension': [\n        true,\n        `${meta.name} is NOT designed to work with the native extension.`\n      ],\n      'Enable Native Flash Embedding': [\n        true,\n        'Activate the native extension\\'s Flash embedding if the native extension is disabled.'\n      ]\n    },\n\n    'Linkification': {\n      'Linkify': [\n        true,\n        'Convert text into links where applicable.'\n      ],\n      'Link Title': [\n        true,\n        'Replace the link of a supported site with its actual title.',\n        1\n      ],\n      'Cover Preview': [\n        true,\n        'Show preview of supported links on hover.',\n        1\n      ],\n      'Embedding': [\n        true,\n        'Embed supported services. Note: Some services don\\'t work on HTTPS.',\n        1\n      ],\n      'Auto-embed': [\n        false,\n        'Auto-embed Linkify Embeds.',\n        2\n      ],\n      'Floating Embeds': [\n        false,\n        'Embed content in a frame that remains in place when the page is scrolled.',\n        2\n      ]\n    },\n\n    'Filtering': {\n      'Anonymize': [\n        false,\n        'Make everyone Anonymous.'\n      ],\n      'Filter': [\n        true,\n        'Self-moderation placebo.'\n      ],\n      'Filtered Backlinks': [\n        false,\n        'When enabled, shows backlinks to filtered posts with a line-through decoration. Otherwise, hides the backlinks.',\n        1\n      ],\n      'Filter in Native Catalog': [\n        true,\n        'Apply 4chan X filters in native catalog.',\n        1\n      ],\n      'MD5 Quick Filter Notifications': [\n        true,\n        'Show notification when quick filtering MD5s using the button or keybind.',\n        1\n      ],\n      'Recursive Hiding': [\n        true,\n        'Hide replies of hidden posts, recursively.'\n      ],\n      'Thread Hiding Buttons': [\n        true,\n        'Add buttons to hide entire threads.'\n      ],\n      'Reply Hiding Buttons': [\n        true,\n        'Add buttons to hide single replies.'\n      ],\n      'Stubs': [\n        true,\n        'Show stubs of hidden threads / replies.'\n      ]\n    },\n\n    'Images and Videos': {\n      'Image Expansion': [\n        true,\n        'Expand images / videos.'\n      ],\n      'Image Hover': [\n        true,\n        'Show full image / video on mouseover.'\n      ],\n      'Image Hover in Catalog': [\n        true,\n        `Show full image / video on mouseover in ${meta.name} catalog.`\n      ],\n      'Gallery': [\n        true,\n        'Adds a simple and cute image gallery. Has more options in the gallery menu.'\n      ],\n      'Fullscreen Gallery': [\n        false,\n        'Open gallery in fullscreen mode.',\n        1\n      ],\n      'PDF in Gallery': [\n        false,\n        'Show PDF files in gallery.',\n        1\n      ],\n      'Sauce': [\n        true,\n        'Add sauce links to images.'\n      ],\n      'WEBM Metadata': [\n        true,\n        'Add link to fetch title metadata from webm videos.'\n      ],\n      'Reveal Spoiler Thumbnails': [\n        false,\n        'Replace spoiler thumbnails with the original image.'\n      ],\n      'Replace GIF': [\n        false,\n        'Replace gif thumbnails with the actual image.'\n      ],\n      'Replace JPG': [\n        false,\n        'Replace jpg thumbnails with the actual image.'\n      ],\n      'Replace PNG': [\n        false,\n        'Replace png thumbnails with the actual image.'\n      ],\n      'Replace WEBM': [\n        false,\n        'Replace webm, mp4, and ogv thumbnails with the actual video. Probably will degrade browser performance ;)'\n      ],\n      'Image Prefetching': [\n        true,\n        'Add a shortcut icon to the header to turn on image preloading.'\n      ],\n      'Fappe Tyme': [\n        true,\n        'Hide posts without images when header menu item is checked. *hint* *hint*'\n      ],\n      'Werk Tyme': [\n        true,\n        'Hide all post images when header menu item is checked.'\n      ],\n      'Autoplay': [\n        true,\n        'Videos begin playing immediately when opened.'\n      ],\n      'Restart when Opened': [\n        false,\n        'Restart GIFs and WebMs when you hover over or expand them.'\n      ],\n      'Show Controls': [\n        true,\n        'Show controls on videos expanded inline.'\n      ],\n      'Click Passthrough': [\n        false,\n        'Clicks on videos trigger your browser\\'s default behavior. Videos can be contracted with button / dragging to the left.',\n        1\n      ],\n      'Allow Sound': [\n        true,\n        'Open videos with the sound unmuted.'\n      ],\n      'Mouse Wheel Volume': [\n        true,\n        'Adjust volume of videos with the mouse wheel over the thumbnail/filename/gallery.'\n      ],\n      'Loop in New Tab': [\n        true,\n        'Loop videos opened in their own tabs.'\n      ],\n      'Volume in New Tab': [\n        true,\n        `Apply ${meta.name} mute and volume settings to videos opened in their own tabs.`\n      ],\n      'Enable sound posts': [\n        true,\n        'Enable loading audio from [sound=] file names. This audio is fetched from third parties.'\n      ],\n    },\n\n    'Menu': {\n      'Menu': [\n        true,\n        'Add a drop-down menu to posts.'\n      ],\n      'Report Link': [\n        true,\n        'Add a report link to the menu.',\n        1\n      ],\n      'Copy Text Link': [\n        true,\n        'Add a link to copy the post\\'s text.',\n        1\n      ],\n      'Thread Hiding Link': [\n        true,\n        'Add a link to hide entire threads.',\n        1\n      ],\n      'Reply Hiding Link': [\n        true,\n        'Add a link to hide single replies.',\n        1\n      ],\n      'Delete Link': [\n        true,\n        'Add post and image deletion links to the menu.',\n        1\n      ],\n      'Archive Link': [\n        true,\n        'Add an archive link to the menu.',\n        1\n      ],\n      'Edit Link': [\n        true,\n        'Add a link to edit the image in Tegaki, /i/\\'s painting program. Requires Quick Reply.',\n        1\n      ],\n      'Download Link': [\n        false,\n        'Add a download with original filename link to the menu.',\n        1\n      ]\n    },\n\n    'Monitoring': {\n      'Thread Updater': [\n        true,\n        'Fetch and insert new replies. Has more options in the header menu and the \"Advanced\" tab.'\n      ],\n      'Unread Count': [\n        true,\n        'Show the unread posts count in the tab title.'\n      ],\n      'Quoted Title': [\n        false,\n        'Change the page title to reflect you\\'ve been quoted.',\n        1\n      ],\n      'Hide Unread Count at (0)': [\n        false,\n        'Hide the unread posts count in the tab title when it reaches 0.',\n        1\n      ],\n      'Unread Favicon': [\n        true,\n        'Show a different favicon when there are unread posts.'\n      ],\n      'Unread Line': [\n        true,\n        'Show a line to distinguish read posts from unread ones.'\n      ],\n      'Remember Last Read Post': [\n        true,\n        'Remember how far you\\'ve read after you close the thread.'\n      ],\n      'Scroll to Last Read Post': [\n        true,\n        'Scroll back to the last read post when reopening a thread.',\n        1\n      ],\n      'Unread Line in Index': [\n        false,\n        'Show a line between read and unread posts in threads in the index.',\n        1\n      ],\n      'Remove Thread Excerpt': [\n        false,\n        'Replace the excerpt of the thread in the tab title with the board title.'\n      ],\n      'Thread Stats': [\n        true,\n        'Display reply and image count.'\n      ],\n      'IP Count in Stats': [\n        true,\n        'Display the unique IP count in the thread stats.',\n        1\n      ],\n      'Page Count in Stats': [\n        true,\n        'Display the page count in the thread stats.',\n        1\n      ],\n      'Updater and Stats in Header': [\n        true,\n        'Places the thread updater and thread stats in the header instead of floating them.'\n      ],\n      'Thread Watcher': [\n        true,\n        'Bookmark threads. Has more options in the thread watcher menu.'\n      ],\n      'Fixed Thread Watcher': [\n        true,\n        'Makes the thread watcher scroll with the page.',\n        1\n      ],\n      'Persistent Thread Watcher': [\n        false,\n        'The thread watcher will be visible when the page is loaded.',\n        1\n      ],\n      'Mark New IPs': [\n        false,\n        'Label each post from a new IP with the thread\\'s current IP count.'\n      ],\n      'Reply Pruning': [\n        true,\n        'Add option in header menu to hide old replies in long threads. Activated by default in stickies.'\n      ],\n      'Prune All Threads': [\n        false,\n        'Activate Reply Pruning by default in all threads.',\n        1\n      ]\n    },\n\n    'Posting and Captchas': {\n      'Quick Reply': [\n        true,\n        'All-in-one form to reply, create threads, automate dumping and more.'\n      ],\n      'Persistent QR': [\n        false,\n        'The Quick reply won\\'t disappear after posting.',\n        1\n      ],\n      'Auto Hide QR': [\n        true,\n        'Automatically hide the quick reply when posting.',\n        2\n      ],\n      'Open Post in New Tab': [\n        true,\n        'Open new threads in a new tab, and open replies in a new tab if you\\'re not already in the thread.',\n        1\n      ],\n      'Remember QR Size': [\n        false,\n        'Remember the size of the Quick reply.',\n        1\n      ],\n      'Remember Spoiler': [\n        false,\n        'Remember the spoiler state, instead of resetting after posting.',\n        1\n      ],\n      'Randomize Filename': [\n        false,\n        'Set the filename to a random timestamp within the past year. Disabled on /f/.',\n        1\n      ],\n      'Show New Thread Option in Threads': [\n        true,\n        'Show the option to post a new / different thread from inside a thread.',\n        1\n      ],\n      'Show Upload Progress': [\n        true,\n        'Track progress of file uploads as percentage in submit button.',\n        1\n      ],\n      'Cooldown': [\n        true,\n        'Indicate the remaining time before posting again.',\n        1\n      ],\n      'Posting Success Notifications': [\n        true,\n        'Show notifications on successful post creation or file uploading.',\n        1\n      ],\n      'Auto-load captcha': [\n        false,\n        'Automatically load the captcha in the QR even if your post is empty.',\n        1\n      ],\n      'Post on Captcha Completion': [\n        false,\n        'Submit the post immediately when the captcha is completed.',\n        1\n      ],\n      'Force Noscript Captcha': [\n        false,\n        'Use the non-Javascript fallback captcha even if Javascript is enabled.'\n      ],\n      'Pass Link': [\n        false,\n        'Add a 4chan Pass login link to the bottom of the page.'\n      ]\n    },\n\n    'Quote Links': {\n      'Quote Backlinks': [\n        true,\n        'Add quote backlinks.'\n      ],\n      'OP Backlinks': [\n        true,\n        'Add backlinks to the OP.',\n        1\n      ],\n      'Bottom Backlinks': [\n        false,\n        'Place backlinks at the bottom of posts.',\n        1\n      ],\n      'Quote Inlining': [\n        true,\n        'Inline quoted post on click.'\n      ],\n      'Inline Cross-thread Quotes Only': [\n        false,\n        'Don\\'t inline quote links when the posts are visible in the thread.',\n        1\n      ],\n      'Quote Hash Navigation': [\n        false,\n        'Include an extra link after quotes for autoscrolling to quoted posts.',\n        1\n      ],\n      'Forward Hiding': [\n        true,\n        'Hide original posts of inlined backlinks.',\n        1\n      ],\n      'Quote Previewing': [\n        true,\n        'Show quoted post on hover.'\n      ],\n      'Quote Highlighting': [\n        true,\n        'Highlight the previewed post.',\n        1\n      ],\n      'Resurrect Quotes': [\n        true,\n        'Link dead quotes to the archives, and support inlining/previewing of archive links like quote links.'\n      ],\n      'Remember Your Posts': [\n        true,\n        'Remember your posting history.'\n      ],\n      'Mark Quotes of You': [\n        true,\n        'Add \\'(You)\\' to quotes linking to your posts.',\n        1\n      ],\n      'Highlight Posts Quoting You': [\n        true,\n        'Highlights any posts that contain a quote to your post.',\n        1\n      ],\n      'Highlight Own Posts': [\n        true,\n        'Highlights own posts.',\n        1\n      ],\n      'Mark OP Quotes': [\n        true,\n        'Add \\'(OP)\\' to OP quotes.'\n      ],\n      'Mark Cross-thread Quotes': [\n        true,\n        'Add \\'(Cross-thread)\\' to cross-threads quotes.'\n      ],\n      'Quote Threading': [\n        true,\n        'Add option in header menu to thread conversations.'\n      ]\n    }\n  },\n\n  imageExpansion: {\n    'Fit width': [\n      true,\n      ''\n    ],\n    'Fit height': [\n      false,\n      ''\n    ],\n    'Scroll into view': [\n      true,\n      'Scroll down when expanding images to bring the full image into view.'\n    ],\n    'Expand spoilers': [\n      true,\n      'Expand all images along with spoilers.'\n    ],\n    'Expand videos': [\n      true,\n      'Expand all images also expands videos.'\n    ],\n    'Expand from here': [\n      false,\n      'Expand all images only from current position to thread end.'\n    ],\n    'Expand thread only': [\n      false,\n      'In index, expand all images only within the current thread.'\n    ],\n    'Advance on contract': [\n      false,\n      'Advance to next post when contracting an expanded image.'\n    ]\n  },\n\n  gallery: {\n    'Hide Thumbnails': [\n      false\n    ],\n    'Fit Width': [ // 'Fit width' (lowercase W) belongs to Image Expansion. Engine limitations, heh.\n      true\n    ],\n    'Fit Height': [\n      true\n    ],\n    'Stretch to Fit': [\n      false\n    ],\n    'Scroll to Post': [\n      true\n    ],\n    'Slide Delay': [\n      6.0\n    ]\n  },\n\n  'Default Volume': 1.0,\n\n  threadWatcher: {\n    'Current Board': [\n      false,\n      'Only show watched threads from the current board.'\n    ],\n    'Auto Update Thread Watcher': [\n      true,\n      'Periodically check status of watched threads.'\n    ],\n    'Auto Watch': [\n      true,\n      'Automatically watch threads you start.'\n    ],\n    'Auto Watch Reply': [\n      true,\n      'Automatically watch threads you reply to.'\n    ],\n    'Auto Prune': [\n      false,\n      'Automatically remove dead threads.'\n    ],\n    'Show Page': [\n      true,\n      'Show what page watched threads are on.'\n    ],\n    'Show Unread Count': [\n      true,\n      'Show number of unread posts in watched threads.'\n    ],\n    'Show Site Prefix': [\n      true,\n      'When multiple sites are shown in the thread watcher, add a prefix to board names to distinguish them.'\n    ],\n    'Require OP Quote Link': [\n      false,\n      'For purposes of thread watcher highlighting, only consider posts with a quote link to the OP as replies to the OP.'\n    ]\n  },\n\n  filter: {\n    general: '',\n\n    postID: `\\\n# Highlight dubs on [s4s]:\n#/(\\\\d)\\\\1$/;highlight;top:no;boards:s4s\\\n`,\n\n    name: `\\\n# Filter any namefags:\n#/^(?!Anonymous$)/\\\n`,\n\n    uniqueID: `\\\n# Filter a specific ID:\n#/Txhvk1Tl/\\\n`,\n\n    tripcode: `\\\n# Filter any tripfag\n#/^!/\\\n`,\n\n    capcode: `\\\n# Set a custom class for mods:\n#/Mod$/;highlight:mod;op:yes\n# Set a custom class for admins:\n#/Admin$/;highlight:admin;op:yes\\\n`,\n\n    pass: `\\\n# Filter anyone using since4pass:\n#/./\\\n`,\n\n    email: '',\n\n    subject: `\\\n# Filter Generals on /v/:\n#/general/i;boards:v;op:only\\\n`,\n\n    comment: `\\\n# Filter Stallman copypasta on /g/:\n#/what you\\'re refer+ing to as linux/i;boards:g\n# Filter posts with 20 or more quote links:\n#/(?:>>\\\\d(?:(?!>>\\\\d)[^])*){20}/\n# Filter posts like T H I S / H / I / S:\n#/^>?\\\\s?\\\\w\\\\s?(\\\\w)\\\\s?(\\\\w)\\\\s?(\\\\w).*$[\\\\s>]+\\\\1[\\\\s>]+\\\\2[\\\\s>]+\\\\3/im\\\n`,\n\n    flag: '',\n    filename: '',\n    dimensions: `\\\n# Highlight potential wallpapers:\n#/1920x1080/;op:yes;highlight;top:no;boards:w,wg\\\n`,\n\n    filesize: '',\n\n    MD5: ''\n  },\n\n  sauces: `\\\n# Known filename formats:\nhttps://www.pixiv.net/member_illust.php?mode=medium&illust_id=%$1;regexp:/^(\\\\d+)_p\\\\d+/\njavascript:void(open(\"https://www.deviantart.com/\"+%$1.replace(/_/g,\"-\")+\"/art/\"+parseInt(%$2,36)));regexp:/^\\\\w+_by_(\\\\w+)[_-]d([\\\\da-z]{6})\\\\b/\nhttps://imgur.com/%$1;regexp:/^(?![a-zA-Z][a-z]{6})(?![A-Z]{7})(?!\\\\d{7})([\\\\da-zA-Z]{7})(?: \\\\(\\\\d+\\\\))?\\\\.\\\\w+$/\nhttps://flickr.com/photo.gne?id=%$1;regexp:/^(\\\\d+)_[\\\\da-f]{10}(?:_\\\\w)*\\\\b/\nhttps://www.facebook.com/photo.php?fbid=%$1;regexp:/^\\\\d+_(\\\\d+)_\\\\d+_[no]\\\\b/\n\n# Reverse image search:\nhttps://www.google.com/searchbyimage?sbisrc=4chanx&image_url=%IMG&safe=off\nhttps://yandex.com/images/search?rpt=imageview&url=%IMG\n#//tineye.com/search?url=%IMG\n#//www.bing.com/images/search?q=imgurl:%IMG&view=detailv2&iss=sbi#enterInsights\n#https://lens.google.com/uploadbyurl?url=%IMG;text:lens\n\n# Specialized reverse image search:\n//iqdb.org/?url=%IMG\nhttps://trace.moe/?auto&url=%IMG;text:wait\n#//3d.iqdb.org/?url=%IMG\n#//saucenao.com/search.php?url=%IMG\n\n# \"View Same\" in archives:\nhttp://eye.swfchan.com/search/?q=%name;types:swf\n#https://desuarchive.org/_/search/image/%sMD5/\n#https://archive.4plebs.org/_/search/image/%sMD5/\n#https://boards.fireden.net/_/search/image/%sMD5/\n#https://foolz.fireden.net/_/search/image/%sMD5/\n\n# Other tools:\n#http://exif.regex.info/exif.cgi?imgurl=%URL\n#//imgops.com/start?url=%URL;types:gif,jpg,png\n#//www.gif-explode.com/%URL;types:gif\\\n`,\n\n  FappeT: {\n    werk:  false\n  },\n\n  'Custom CSS': true,\n\n  Index: {\n    'Index Mode': 'paged',\n    'Previous Index Mode': 'paged',\n    'Index Size': 'small',\n    'Show Replies':          [true,  'Show replies in the index, and also in the catalog if \"Catalog hover expand\" is checked.'],\n    'Catalog Hover Expand':  [false, 'Expand the comment and show more details when you hover over a thread in the catalog.'],\n    'Catalog Hover Toggle':  [true,  'Turn \"Catalog hover expand\" on and off by clicking in the catalog.'],\n    'Pin Watched Threads':   [false, 'Move watched threads to the start of the index.'],\n    'Anchor Hidden Threads': [true,  'Move hidden threads to the end of the index.'],\n    'Refreshed Navigation':  [false, 'Refresh index when navigating through pages.']\n  },\n\n  Header: {\n    'Fixed Header':               true,\n    'Header auto-hide':           false,\n    'Header auto-hide on scroll': false,\n    'Bottom Header':              false,\n    'Centered links':             false,\n    'Header catalog links':       false,\n    'Bottom Board List':          true,\n    'Shortcut Icons':             true,\n    'Custom Board Navigation':    true\n  },\n\n  archives: {\n    archiveLists:      'https://4chenz.github.io/archives.json/archives.json',\n    lastarchivecheck:  0,\n    archiveAutoUpdate: true\n  },\n\n  externalCatalogURLs: `\\\n//catalog.neet.tv/%board/;boards:4chan.org:3,a,adv,an,asp,biz,c,cgl,ck,cm,co,diy,f,fa,fit,g,gd,his,i,int,jp,k,lgbt,lit,m,mlp,mu,n,news,o,out,p,po,pol,s4s,sci,sp,tg,toy,trv,tv,v,vg,vip,vp,vr,w,wg,wsg,wsr,x\\\n`,\n\n  boardnav: `\\\n[ toggle-all ]\n[current-index-text:\"Index\"\ncurrent-catalog-text:\"Catalog\"\ncurrent-expired-text:\"Expired\"\ncurrent-archive-text:\"Archive\"]\n[external-text:\"FAQ\",\"${meta.name}\"]\\\n`,\n\n  QR: {\n    'QR.personas': `\\\n#options:\"sage\";boards:jp;always\\\n`,\n    sjisPreview: false\n  },\n\n  jsWhitelist: `\\\nhttp://s.4cdn.org\nhttps://s.4cdn.org\nhttp://www.google.com\nhttps://www.google.com\nhttps://www.gstatic.com\nhttp://cdn.mathjax.org\nhttps://cdn.mathjax.org\nhttps://cdnjs.cloudflare.com\nhttps://hcaptcha.com\nhttps://*.hcaptcha.com\n'self'\n'unsafe-inline'\n'unsafe-eval'\\\n`,\n\n  captchaLanguage: '',\n\n  time: '%m/%d/%y(%a)%H:%M:%S',\n  timeLocale: '',\n\n  backlink: '>>%id',\n\n  pastedname: 'file',\n\n  fileInfo: '%l %d (%p%s, %r%g)',\n\n  favicon: 'ferongr',\n\n  usercss: userCss,\n\n  hotkeys: {\n    // QR & Options\n    'Toggle board list': [\n      'Ctrl+b',\n      'Toggle the full board list.'\n    ],\n    'Toggle header': [\n      'Shift+h',\n      'Toggle the auto-hide option of the header.'\n    ],\n    'Open empty QR': [\n      'q',\n      'Open QR without post number inserted.'\n    ],\n    'Open QR': [\n      'Shift+q',\n      'Open QR with post number inserted.'\n    ],\n    'Open settings': [\n      'Alt+o',\n      'Open Settings.'\n    ],\n    'Close': [\n      'Esc',\n      'Close dialogs or notifications.'\n    ],\n    'Spoiler tags': [\n      'Ctrl+s',\n      'Insert spoiler tags.'\n    ],\n    'Code tags': [\n      'Alt+c',\n      'Insert code tags.'\n    ],\n    'Eqn tags':  [\n      'Alt+e',\n      'Insert eqn tags.'\n    ],\n    'Math tags': [\n      'Alt+m',\n      'Insert math tags.'\n    ],\n    'SJIS tags': [\n      'Alt+a',\n      'Insert SJIS tags.'\n    ],\n    'Toggle sage': [\n      'Alt+s',\n      'Toggle sage in options field.'\n    ],\n    'Toggle Cooldown': [\n      'Alt+Comma',\n      'Toggle custom cooldown timer.'\n    ],\n    'Post from URL': [\n      'Alt+l',\n      'Post from URL.'\n    ],\n    'Add new post': [\n      'Alt+n',\n      'Add new post to the QR dump list.'\n    ],\n    'Submit QR': [\n      'Ctrl+Enter',\n      'Submit post.'\n    ],\n    // Thread related\n    'Watch': [\n      'w',\n      'Watch thread.'\n    ],\n    'Update': [\n      'r',\n      'Update the thread / refresh the index.'\n    ],\n    'Update thread watcher': [\n      'Shift+r',\n      'Manually refresh thread watcher.'\n    ],\n    'Toggle thread watcher': [\n      't',\n      'Toggle visibility of thread watcher.'\n    ],\n    'Toggle threading': [\n      'Shift+t',\n      'Toggle threading.'\n    ],\n    'Mark thread read': [\n      'Ctrl+0',\n      'Mark thread read from index (requires \"Unread Line in Index\").'\n    ],\n    // Images\n    'Expand image': [\n      'Shift+e',\n      'Expand selected image.'\n    ],\n    'Expand images': [\n      'e',\n      'Expand all images.'\n    ],\n    'Open Gallery': [\n      'g',\n      'Opens the gallery.'\n    ],\n    'Next Gallery Image': [\n      'Right',\n      'Go to the next image in gallery mode.'\n    ],\n    'Previous Gallery Image': [\n      'Left',\n      'Go to the previous image in gallery mode.'\n    ],\n    'Advance Gallery': [\n      'Enter',\n      'Go to next image or, if Autoplay is off, play video.'\n    ],\n    'Pause': [\n      'p',\n      'Pause/play videos in the gallery.'\n    ],\n    'Slideshow': [\n      'Ctrl+Right',\n      'Toggle the gallery slideshow mode.'\n    ],\n    'Rotate image clockwise': [\n      'Shift+Right',\n      'Rotate image clockwise in gallery.'\n    ],\n    'Rotate image anticlockwise': [\n      'Shift+Left',\n      'Rotate image anticlockwise in gallery.'\n    ],\n    'Download Gallery Image': [\n      'Shift+j',\n      'Download current image in gallery.'\n    ],\n    'fappeTyme': [\n      'f',\n      'Toggle Fappe Tyme.'\n    ],\n    'werkTyme': [\n      'Shift+w',\n      'Toggle Werk Tyme.'\n    ],\n    // Board Navigation\n    'Front page': [\n      '1',\n      'Jump to front page.'\n    ],\n    'Open front page': [\n      'Shift+1',\n      'Open front page in a new tab.'\n    ],\n    'Next page': [\n      'Ctrl+Right',\n      'Jump to the next page.'\n    ],\n    'Previous page': [\n      'Ctrl+Left',\n      'Jump to the previous page.'\n    ],\n    'Paged mode': [\n      'Alt+1',\n      'Open the index in paged mode.'\n    ],\n    'Infinite scrolling mode': [\n      'Alt+2',\n      'Open the index in infinite scrolling mode.'\n    ],\n    'All pages mode': [\n      'Alt+3',\n      'Open the index in all threads mode.'\n    ],\n    'Open catalog': [\n      'Shift+c',\n      'Open the catalog of the current board.'\n    ],\n    'Search form': [\n      'Ctrl+Alt+s',\n      'Focus the search field on the board index.'\n    ],\n    'Cycle sort type': [\n      'Alt+x',\n      'Cycle through index sort types.'\n    ],\n    // Thread Navigation\n    'Next thread': [\n      'Ctrl+Down',\n      'See next thread.'\n    ],\n    'Previous thread': [\n      'Ctrl+Up',\n      'See previous thread.'\n    ],\n    'Expand thread': [\n      'Ctrl+e',\n      'Expand thread.'\n    ],\n    'Open thread': [\n      'o',\n      'Open thread in current tab.'\n    ],\n    'Open thread tab': [\n      'Shift+o',\n      'Open thread in new tab.'\n    ],\n    // Reply Navigation\n    'Next reply': [\n      'j',\n      'Select next reply.'\n    ],\n    'Previous reply': [\n      'k',\n      'Select previous reply.'\n    ],\n    'Deselect reply': [\n      'Shift+d',\n      'Deselect reply.'\n    ],\n    'Hide': [\n      'x',\n      'Hide thread.'\n    ],\n    'Quick Filter MD5': [\n      '5',\n      'Add the MD5 of the selected image to the filter list.'\n    ],\n    'Previous Post Quoting You': [\n      'Alt+Up',\n      'Scroll to the previous post that quotes you.'\n    ],\n    'Next Post Quoting You': [\n      'Alt+Down',\n      'Scroll to the next post that quotes you.'\n    ]\n  },\n\n  updater: {\n    checkbox: {\n      'Beep': [\n        false,\n        'Beep on new post to completely read thread.'\n      ],\n      'Beep Quoting You': [\n        false,\n        'Beep on new post quoting you.'\n      ],\n      'Auto Scroll': [\n        false,\n        'Scroll updated posts into view. Only enabled at bottom of page.'\n      ],\n      'Bottom Scroll': [\n        false,\n        'Always scroll to the bottom, not the first new post. Useful for event threads.'\n      ],\n      'Scroll BG': [\n        false,\n        'Auto-scroll background tabs.'\n      ],\n      'Auto Update': [\n        true,\n        'Automatically fetch new posts.'\n      ],\n      'Optional Increase': [\n        false,\n        'Increase the intervals between updates on threads without new posts.'\n      ]\n    },\n    'Interval': 5\n  },\n\n  customCooldown: 0,\n  customCooldownEnabled: true,\n\n  'Thread Quotes': false,\n\n  'Max Replies': 1000,\n\n  'Autohiding Scrollbar': false,\n\n  position: {\n    'embedding.position':      'top: 50px; right: 0px;',\n    'thread-stats.position':   'bottom: 0px; right: 0px;',\n    'updater.position':        'bottom: 0px; left: 0px;',\n    'thread-watcher.position': 'top: 50px; left: 0px;',\n    'qr.position':             'top: 50px; right: 0px;'\n  },\n\n  fourchanImageHost: 'i.4cdn.org',\n\n  hiddenPSAList: [{}],\n\n  knownBanners: banners.join(','),\n\n  passMessageClosed: false,\n\n  'Prerequest Captcha': false,\n\n  'PSAseen': [[]]\n};\nexport default Config;\n","import ferongr_unreadDead from './Favicon/ferongr.unreadDead.png';\nimport ferongr_unreadDeadY from './Favicon/ferongr.unreadDeadY.png';\nimport ferongr_unreadSFW from './Favicon/ferongr.unreadSFW.png';\nimport ferongr_unreadSFWY from './Favicon/ferongr.unreadSFWY.png';\nimport ferongr_unreadNSFW from './Favicon/ferongr.unreadNSFW.png';\nimport ferongr_unreadNSFWY from './Favicon/ferongr.unreadNSFWY.png';\nimport xat_unreadDead from './Favicon/xat-.unreadDead.png';\nimport xat_unreadDeadY from './Favicon/xat-.unreadDeadY.png';\nimport xat_unreadSFW from './Favicon/xat-.unreadSFW.png';\nimport xat_unreadSFWY from './Favicon/xat-.unreadSFWY.png';\nimport xat_unreadNSFW from './Favicon/xat-.unreadNSFW.png';\nimport xat_unreadNSFWY from './Favicon/xat-.unreadNSFWY.png';\nimport Mayhem_unreadDead from './Favicon/Mayhem.unreadDead.png';\nimport Mayhem_unreadDeadY from './Favicon/Mayhem.unreadDeadY.png';\nimport Mayhem_unreadSFW from './Favicon/Mayhem.unreadSFW.png';\nimport Mayhem_unreadSFWY from './Favicon/Mayhem.unreadSFWY.png';\nimport Mayhem_unreadNSFW from './Favicon/Mayhem.unreadNSFW.png';\nimport Mayhem_unreadNSFWY from './Favicon/Mayhem.unreadNSFWY.png';\nimport fourChanJS_unreadDead from './Favicon/4chanJS.unreadDead.png';\nimport fourChanJS_unreadDeadY from './Favicon/4chanJS.unreadDeadY.png';\nimport fourChanJS_unreadSFW from './Favicon/4chanJS.unreadSFW.png';\nimport fourChanJS_unreadSFWY from './Favicon/4chanJS.unreadSFWY.png';\nimport fourChanJS_unreadNSFW from './Favicon/4chanJS.unreadNSFW.png';\nimport fourChanJS_unreadNSFWY from './Favicon/4chanJS.unreadNSFWY.png';\nimport Original_unreadDead from './Favicon/Original.unreadDead.png';\nimport Original_unreadDeadY from './Favicon/Original.unreadDeadY.png';\nimport Original_unreadSFW from './Favicon/Original.unreadSFW.png';\nimport Original_unreadSFWY from './Favicon/Original.unreadSFWY.png';\nimport Original_unreadNSFW from './Favicon/Original.unreadNSFW.png';\nimport Original_unreadNSFWY from './Favicon/Original.unreadNSFWY.png';\nimport Metro_unreadDead from './Favicon/Metro.unreadDead.png';\nimport Metro_unreadDeadY from './Favicon/Metro.unreadDeadY.png';\nimport Metro_unreadSFW from './Favicon/Metro.unreadSFW.png';\nimport Metro_unreadSFWY from './Favicon/Metro.unreadSFWY.png';\nimport Metro_unreadNSFW from './Favicon/Metro.unreadNSFW.png';\nimport Metro_unreadNSFWY from './Favicon/Metro.unreadNSFWY.png';\nimport dead from './Favicon/dead.gif';\nimport empty from './Favicon/empty.gif';\nimport $ from '../platform/$';\nimport { Conf, d } from '../globals/globals';\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar Favicon = {\n  init() {\n    return $.asap((() => d.head && (Favicon.el = $('link[rel=\"shortcut icon\"]', d.head))), Favicon.initAsap);\n  },\n\n  set(status) {\n    Favicon.status = status;\n    if (Favicon.el) {\n      Favicon.el.href = Favicon[status];\n      // `favicon.href = href` doesn't work on Firefox.\n      return $.add(d.head, Favicon.el);\n    }\n  },\n\n  initAsap() {\n    Favicon.el.type = 'image/x-icon';\n    const {href}          = Favicon.el;\n    Favicon.isSFW   = /ws\\.ico$/.test(href);\n    Favicon.default = href;\n    Favicon.switch();\n    if (Favicon.status) {\n      return Favicon.set(Favicon.status);\n    }\n  },\n\n  switch() {\n    let items = {\n      ferongr: [\n        ferongr_unreadDead,\n        ferongr_unreadDeadY,\n        ferongr_unreadSFW,\n        ferongr_unreadSFWY,\n        ferongr_unreadNSFW,\n        ferongr_unreadNSFWY,\n      ],\n      'xat-': [\n        xat_unreadDead,\n        xat_unreadDeadY,\n        xat_unreadSFW,\n        xat_unreadSFWY,\n        xat_unreadNSFW,\n        xat_unreadNSFWY,\n      ],\n      Mayhem: [\n        Mayhem_unreadDead,\n        Mayhem_unreadDeadY,\n        Mayhem_unreadSFW,\n        Mayhem_unreadSFWY,\n        Mayhem_unreadNSFW,\n        Mayhem_unreadNSFWY,\n      ],\n      '4chanJS': [\n        fourChanJS_unreadDead,\n        fourChanJS_unreadDeadY,\n        fourChanJS_unreadSFW,\n        fourChanJS_unreadSFWY,\n        fourChanJS_unreadNSFW,\n        fourChanJS_unreadNSFWY,\n      ],\n      Original: [\n        Original_unreadDead,\n        Original_unreadDeadY,\n        Original_unreadSFW,\n        Original_unreadSFWY,\n        Original_unreadNSFW,\n        Original_unreadNSFWY,\n      ],\n      'Metro': [\n        Metro_unreadDead,\n        Metro_unreadDeadY,\n        Metro_unreadSFW,\n        Metro_unreadSFWY,\n        Metro_unreadNSFW,\n        Metro_unreadNSFWY,\n      ]\n    };\n    items = $.getOwn(items, Conf['favicon']);\n\n    const f = Favicon;\n    const t = 'data:image/png;base64,';\n    let i = 0;\n    while (items[i]) {\n      items[i] = t + items[i++];\n    }\n\n    [f.unreadDead, f.unreadDeadY, f.unreadSFW, f.unreadSFWY, f.unreadNSFW, f.unreadNSFWY] = items;\n    return f.update();\n  },\n\n  update() {\n    if (this.isSFW) {\n      this.unread  = this.unreadSFW;\n      return this.unreadY = this.unreadSFWY;\n    } else {\n      this.unread  = this.unreadNSFW;\n      return this.unreadY = this.unreadNSFWY;\n    }\n  },\n\n  SFW:   '//s.4cdn.org/image/favicon-ws.ico',\n  NSFW:  '//s.4cdn.org/image/favicon.ico',\n  dead: `data:image/gif;base64,${dead}`,\n  logo: `data:image/png;base64,${empty}`,\n};\nexport default Favicon;\n","import { d } from \"../globals/globals\";\n\nconst $$ = (selector, root = d.body) => Array.from(root.querySelectorAll(selector));\nexport default $$;\n","import { g, Conf, doc, d } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport Captcha from \"./Captcha\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst CaptchaReplace = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || (d.cookie.indexOf('pass_enabled=1') >= 0)) { return; }\n\n    if (Conf['Force Noscript Captcha'] && Main.jsEnabled) {\n      $.ready(Captcha.replace.noscript);\n      return;\n    }\n\n    if (Conf['captchaLanguage'].trim()) {\n      if (['boards.4chan.org', 'boards.4channel.org'].includes(location.hostname)) {\n        return $.onExists(doc, '#captchaFormPart', node => $.onExists(node, 'iframe[src^=\"https://www.google.com/recaptcha/\"]', Captcha.replace.iframe));\n      } else {\n        return $.onExists(doc, 'iframe[src^=\"https://www.google.com/recaptcha/\"]', Captcha.replace.iframe);\n      }\n    }\n  },\n\n  noscript() {\n    let noscript, original, toggle;\n    if (!((original = $('#g-recaptcha')) && (noscript = $('noscript', original.parentNode)))) { return; }\n    const span = $.el('span',\n      {id: 'captcha-forced-noscript'});\n    $.replace(noscript, span);\n    $.rm(original);\n    const insert = function() {\n      span.innerHTML = noscript.textContent;\n      return Captcha.replace.iframe($('iframe[src^=\"https://www.google.com/recaptcha/\"]', span));\n    };\n    if (toggle = $('#togglePostFormLink a, #form-link')) {\n      return $.on(toggle, 'click', insert);\n    } else {\n      return insert();\n    }\n  },\n\n  iframe(iframe) {\n    let lang;\n    if (lang = Conf['captchaLanguage'].trim()) {\n      const src = /[?&]hl=/.test(iframe.src) ?\n        iframe.src.replace(/([?&]hl=)[^&]*/, '$1' + encodeURIComponent(lang))\n      :\n        iframe.src + `&hl=${encodeURIComponent(lang)}`;\n      if (iframe.src !== src) { iframe.src = src; }\n    }\n  }\n};\nexport default CaptchaReplace;\n","import { d, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport QR from \"./QR\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst CaptchaT = {\n  init() {\n    if (d.cookie.indexOf('pass_enabled=1') >= 0) { return; }\n    if (!(this.isEnabled = !!$('#t-root') || !$.id('postForm'))) { return; }\n\n    const root = $.el('div', {className: 'captcha-root'});\n    this.nodes = {root};\n\n    $.addClass(QR.nodes.el, 'has-captcha', 'captcha-t');\n    return $.after(QR.nodes.com.parentNode, root);\n  },\n\n  moreNeeded() {\n  },\n\n  getThread() {\n    let threadID;\n    const boardID = g.BOARD.ID;\n    if (QR.posts[0].thread === 'new') {\n      threadID = '0';\n    } else {\n      threadID = '' + QR.posts[0].thread;\n    }\n    return {boardID, threadID};\n  },\n\n  setup(focus) {\n    if (!this.isEnabled) { return; }\n\n    if (!this.nodes.container) {\n      this.nodes.container = $.el('div', {className: 'captcha-container'});\n      $.prepend(this.nodes.root, this.nodes.container);\n      CaptchaT.currentThread = CaptchaT.getThread();\n      $.global(function() {\n        const el = document.querySelector('#qr .captcha-container');\n        window.TCaptcha.init(el, this.boardID, +this.threadID);\n        return window.TCaptcha.setErrorCb(err => window.dispatchEvent(new CustomEvent('CreateNotification', {detail: {\n          type: 'warning',\n          content: '' + err\n        }})\n        ));\n      }\n      , CaptchaT.currentThread);\n    }\n\n    if (focus) {\n      return $('#t-resp').focus();\n    }\n  },\n\n  destroy() {\n    if (!this.isEnabled || !this.nodes.container) { return; }\n    $.global(() => window.TCaptcha.destroy());\n    $.rm(this.nodes.container);\n    return delete this.nodes.container;\n  },\n\n  updateThread() {\n    if (!this.isEnabled) { return; }\n    const {boardID, threadID} = (CaptchaT.currentThread || {});\n    const newThread = CaptchaT.getThread();\n    if ((newThread.boardID !== boardID) || (newThread.threadID !== threadID)) {\n      CaptchaT.destroy();\n      return CaptchaT.setup();\n    }\n  },\n\n  getOne() {\n    let el;\n    let response = {};\n    if (this.nodes.container) {\n      for (var key of ['t-response', 't-challenge']) {\n        response[key] = $(`[name='${key}']`, this.nodes.container).value;\n      }\n    }\n    if (!response['t-response'] && !((el = $('#t-msg')) && /Verification not required/i.test(el.textContent))) {\n      response = null;\n    }\n    return response;\n  },\n\n  setUsed() {\n    if (!this.isEnabled) { return; }\n    if (this.nodes.container) {\n      return $.global(() => window.TCaptcha.clearChallenge());\n    }\n  },\n\n  occupied() {\n    return !!this.nodes.container;\n  }\n};\nexport default CaptchaT;\n",null,"import { Conf, d, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict, HOUR } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class DataBoard {\n  static initClass() {\n    this.keys = ['hiddenThreads', 'hiddenPosts', 'lastReadPosts', 'yourPosts', 'watchedThreads', 'watcherLastModified', 'customTitles'];\n  }\n\n  constructor(key, sync, dontClean) {\n    this.changes = [];\n    this.onSync = this.onSync.bind(this);\n    this.key = key;\n    this.initData(Conf[this.key]);\n    $.sync(this.key, this.onSync);\n    if (!dontClean) { this.clean(); }\n    if (!sync) { return; }\n    // Chrome also fires the onChanged callback on the current tab,\n    // so we only start syncing when we're ready.\n    var init = () => {\n      $.off(d, '4chanXInitFinished', init);\n      return this.sync = sync;\n    };\n    $.on(d, '4chanXInitFinished', init);\n  }\n\n  initData(data) {\n    let boards;\n    this.data = data;\n    if (this.data.boards) {\n      let lastChecked;\n      ({boards, lastChecked} = this.data);\n      this.data['4chan.org'] = {boards, lastChecked};\n      delete this.data.boards;\n      delete this.data.lastChecked;\n    }\n    return this.data[g.SITE.ID] || (this.data[g.SITE.ID] = { boards: dict() });\n  }\n\n  save(change, cb) {\n    change();\n    this.changes.push(change);\n    return $.get(this.key, { boards: dict() }, items => {\n      if (!this.changes.length) { return; }\n      const needSync = ((items[this.key].version || 0) > (this.data.version || 0));\n      if (needSync) {\n        this.initData(items[this.key]);\n        for (change of this.changes) { change(); }\n      }\n      this.changes = [];\n      this.data.version = (this.data.version || 0) + 1;\n      return $.set(this.key, this.data, () => {\n        if (needSync) { this.sync?.(); }\n        return cb?.();\n      });\n    });\n  }\n\n  forceSync(cb) {\n    return $.get(this.key, { boards: dict() }, items => {\n      if ((items[this.key].version || 0) > (this.data.version || 0)) {\n        this.initData(items[this.key]);\n        for (var change of this.changes) { change(); }\n        this.sync?.();\n      }\n      return cb?.();\n    });\n  }\n\n  delete({siteID, boardID, threadID, postID}, cb) {\n    if (!siteID) { siteID = g.SITE.ID; }\n    if (!this.data[siteID]) { return; }\n    return this.save(() => {\n      if (postID) {\n        if (!this.data[siteID].boards[boardID]?.[threadID]) { return; }\n        delete this.data[siteID].boards[boardID][threadID][postID];\n        return this.deleteIfEmpty({siteID, boardID, threadID});\n      } else if (threadID) {\n        if (!this.data[siteID].boards[boardID]) { return; }\n        delete this.data[siteID].boards[boardID][threadID];\n        return this.deleteIfEmpty({siteID, boardID});\n      } else {\n        return delete this.data[siteID].boards[boardID];\n      }\n    }\n    , cb);\n  }\n\n  deleteIfEmpty({siteID, boardID, threadID}) {\n    if (!this.data[siteID]) { return; }\n    if (threadID) {\n      if (!Object.keys(this.data[siteID].boards[boardID][threadID]).length) {\n        delete this.data[siteID].boards[boardID][threadID];\n        return this.deleteIfEmpty({siteID, boardID});\n      }\n    } else if (!Object.keys(this.data[siteID].boards[boardID]).length) {\n      return delete this.data[siteID].boards[boardID];\n    }\n  }\n\n  set(data, cb) {\n    return this.save(() => {\n      return this.setUnsafe(data);\n    }\n    , cb);\n  }\n\n  setUnsafe({siteID, boardID, threadID, postID, val}) {\n    if (!siteID) { siteID = g.SITE.ID; }\n    if (!this.data[siteID]) { this.data[siteID] = { boards: dict() }; }\n    if (postID !== undefined) {\n      let base;\n      return (((base = this.data[siteID].boards[boardID] || (this.data[siteID].boards[boardID] = dict())))[threadID] || (base[threadID] = dict()))[postID] = val;\n    } else if (threadID !== undefined) {\n      return (this.data[siteID].boards[boardID] || (this.data[siteID].boards[boardID] = dict()))[threadID] = val;\n    } else {\n      return this.data[siteID].boards[boardID] = val;\n    }\n  }\n\n  extend({siteID, boardID, threadID, postID, val}, cb) {\n    return this.save(() => {\n      const oldVal = this.get({ siteID, boardID, threadID, postID, defaultValue: dict() });\n      for (var key in val) {\n        var subVal = val[key];\n        if (typeof subVal === 'undefined') {\n          delete oldVal[key];\n        } else {\n          oldVal[key] = subVal;\n        }\n      }\n      return this.setUnsafe({siteID, boardID, threadID, postID, val: oldVal});\n    }\n    , cb);\n  }\n\n  setLastChecked(key='lastChecked') {\n    return this.save(() => {\n      return this.data[key] = Date.now();\n    });\n  }\n\n  get({siteID, boardID, threadID, postID, defaultValue}) {\n    let board, val;\n    if (!siteID) { siteID = g.SITE.ID; }\n    if (board = this.data[siteID]?.boards[boardID]) {\n      let thread;\n      if (threadID == null) {\n        if (postID != null) {\n          for (thread = 0; thread < board.length; thread++) {\n            var ID = board[thread];\n            if (postID in thread) {\n              val = thread[postID];\n              break;\n            }\n          }\n        } else {\n          val = board;\n        }\n      } else if (thread = board[threadID]) {\n        val = (postID != null) ?\n          thread[postID]\n        :\n          thread;\n      }\n    }\n    return val || defaultValue;\n  }\n\n  clean() {\n    let boardID, middle;\n    const siteID = g.SITE.ID;\n    for (boardID in this.data[siteID].boards) {\n      var val = this.data[siteID].boards[boardID];\n      this.deleteIfEmpty({siteID, boardID});\n    }\n    const now = Date.now();\n    if (now - (2 * HOUR) >= ((middle = this.data[siteID].lastChecked || 0)) || middle > now) {\n      this.data[siteID].lastChecked = now;\n      for (boardID in this.data[siteID].boards) {\n        this.ajaxClean(boardID);\n      }\n    }\n  }\n\n  ajaxClean(boardID) {\n    const that = this;\n    const siteID = g.SITE.ID;\n    const threadsList = g.SITE.urls.threadsListJSON?.({siteID, boardID});\n    if (!threadsList) { return; }\n    return $.cache(threadsList, function() {\n      if (this.status !== 200) { return; }\n      const archiveList = g.SITE.urls.archiveListJSON?.({siteID, boardID});\n      if (!archiveList) { return that.ajaxCleanParse(boardID, this.response); }\n      const response1 = this.response;\n      return $.cache(archiveList, function() {\n        if ((this.status !== 200) && (!!g.SITE.archivedBoardsKnown || (this.status !== 404))) { return; }\n        return that.ajaxCleanParse(boardID, response1, this.response);\n      });\n    });\n  }\n\n  ajaxCleanParse(boardID, response1, response2) {\n    let board, ID;\n    const siteID = g.SITE.ID;\n    if (!(board = this.data[siteID].boards[boardID])) { return; }\n    const threads = dict();\n    if (response1) {\n      for (var page of response1) {\n        for (var thread of page.threads) {\n          ID = thread.no;\n          if (ID in board) { threads[ID] = board[ID]; }\n        }\n      }\n    }\n    if (response2) {\n      for (ID of response2) {\n        if (ID in board) { threads[ID] = board[ID]; }\n      }\n    }\n    this.data[siteID].boards[boardID] = threads;\n    this.deleteIfEmpty({siteID, boardID});\n    return $.set(this.key, this.data);\n  }\n\n  onSync(data) {\n    if ((data.version || 0) <= (this.data.version || 0)) { return; }\n    this.initData(data);\n    return this.sync?.();\n  }\n}\nDataBoard.initClass();\n",null,null,"import $ from \"../platform/$\";\n\nexport default class CatalogThread {\n  toString() { return this.ID; }\n\n  constructor(root, thread) {\n    this.thread = thread;\n    this.ID    = this.thread.ID;\n    this.board = this.thread.board;\n    const {post} = this.thread.OP.nodes;\n    this.nodes = {\n      root,\n      thumb:     $('.catalog-thumb', post),\n      icons:     $('.catalog-icons', post),\n      postCount: $('.post-count',    post),\n      fileCount: $('.file-count',    post),\n      pageCount: $('.page-count',    post),\n      replies:   null\n    };\n    this.thread.catalogView = this;\n  }\n}\n","import { Conf, d, doc } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport Header from \"./Header\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst dialog = function(id, properties) {\n  const el = $.el('div', {\n    className: 'dialog',\n    id\n  }\n  );\n  $.extend(el, properties);\n  el.style.cssText = Conf[`${id}.position`];\n\n  const move = $('.move', el);\n  $.on(move, 'touchstart mousedown', dragstart);\n  for (var child of move.children) {\n    if (!child.tagName) { continue; }\n    $.on(child, 'touchstart mousedown', e => e.stopPropagation());\n  }\n\n  return el;\n};\n\nvar Menu = (function() {\n  let currentMenu = undefined;\n  let lastToggledButton = undefined;\n  Menu = class Menu {\n    static initClass() {\n      currentMenu       = null;\n      lastToggledButton = null;\n    }\n\n    constructor(type) {\n      // XXX AddMenuEntry event is deprecated\n      this.setPosition = this.setPosition.bind(this);\n      this.close = this.close.bind(this);\n      this.keybinds = this.keybinds.bind(this);\n      this.onFocus = this.onFocus.bind(this);\n      this.addEntry = this.addEntry.bind(this);\n      this.type = type;\n      $.on(d, 'AddMenuEntry', ({detail}) => {\n        if (detail.type !== this.type) { return; }\n        delete detail.open;\n        return this.addEntry(detail);\n      });\n      this.entries = [];\n    }\n\n    makeMenu() {\n      const menu = $.el('div', {\n        className: 'dialog',\n        id:        'menu',\n        tabIndex:  0\n      }\n      );\n      menu.dataset.type = this.type;\n      $.on(menu, 'click', e => e.stopPropagation());\n      $.on(menu, 'keydown', this.keybinds);\n      return menu;\n    }\n\n    toggle(e, button, data) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (currentMenu) {\n        // Close if it's already opened.\n        // Reopen if we clicked on another button.\n        const previousButton = lastToggledButton;\n        currentMenu.close();\n        if (previousButton === button) { return; }\n      }\n\n      if (!this.entries.length) { return; }\n      return this.open(button, data);\n    }\n\n    open(button, data) {\n      let entry;\n      const menu = (this.menu = this.makeMenu());\n      currentMenu       = this;\n      lastToggledButton = button;\n\n      this.entries.sort((first, second) => first.order - second.order);\n\n      for (entry of this.entries) {\n        this.insertEntry(entry, menu, data);\n      }\n\n      $.addClass(lastToggledButton, 'active');\n\n      $.on(d, 'click CloseMenu', this.close);\n      $.on(d, 'scroll', this.setPosition);\n      $.on(window, 'resize', this.setPosition);\n      $.after(button, menu);\n\n      this.setPosition();\n\n      entry = $('.entry', menu);\n      // We've removed flexbox, so we don't use order anymore.\n      // while prevEntry = @findNextEntry entry, -1\n      //   entry = prevEntry\n      this.focus(entry);\n\n      return menu.focus();\n    }\n\n    setPosition() {\n      const mRect   = this.menu.getBoundingClientRect();\n      const bRect   = lastToggledButton.getBoundingClientRect();\n      const bTop    = window.scrollY + bRect.top;\n      const bLeft   = window.scrollX + bRect.left;\n      const cHeight = doc.clientHeight;\n      const cWidth  = doc.clientWidth;\n      const [top, bottom] = (bRect.top + bRect.height + mRect.height) < cHeight ?\n        [`${bRect.bottom}px`, '']\n      :\n        ['', `${cHeight - bRect.top}px`];\n      const [left, right] = (bRect.left + mRect.width) < cWidth ?\n        [`${bRect.left}px`, '']\n      :\n        ['', `${cWidth - bRect.right}px`];\n      $.extend(this.menu.style, {top, right, bottom, left});\n      return this.menu.classList.toggle('left', right);\n    }\n\n    insertEntry(entry, parent, data) {\n      let submenu;\n      if (typeof entry.open === 'function') {\n        try {\n          if (!entry.open(data)) { return; }\n        } catch (err) {\n          Main.handleErrors({\n            message: `Error in building the ${this.type} menu.`,\n            error: err\n          });\n          return;\n        }\n      }\n      $.add(parent, entry.el);\n\n      if (!entry.subEntries) { return; }\n      if (submenu = $('.submenu', entry.el)) {\n        // Reset sub menu, remove irrelevant entries.\n        $.rm(submenu);\n      }\n      submenu = $.el('div',\n        {className: 'dialog submenu'});\n      for (var subEntry of entry.subEntries) {\n        this.insertEntry(subEntry, submenu, data);\n      }\n      $.add(entry.el, submenu);\n    }\n\n    close() {\n      $.rm(this.menu);\n      delete this.menu;\n      $.rmClass(lastToggledButton, 'active');\n      currentMenu       = null;\n      lastToggledButton = null;\n      $.off(d, 'click scroll CloseMenu', this.close);\n      $.off(d, 'scroll', this.setPosition);\n      return $.off(window, 'resize', this.setPosition);\n    }\n\n    findNextEntry(entry, direction) {\n      const entries = [...entry.parentNode.children];\n      entries.sort((first, second) => first.style.order - second.style.order);\n      return entries[entries.indexOf(entry) + direction];\n    }\n\n    keybinds(e) {\n      let subEntry;\n      let next, submenu;\n      let entry = $('.focused', this.menu);\n      while ((subEntry = $('.focused', entry))) {\n        entry = subEntry;\n      }\n\n      switch (e.keyCode) {\n        case 27: // Esc\n          lastToggledButton.focus();\n          this.close();\n          break;\n        case 13: case 32: // Enter, Space\n          entry.click();\n          break;\n        case 38: // Up\n          if (next = this.findNextEntry(entry, -1)) {\n            this.focus(next);\n          }\n          break;\n        case 40: // Down\n          if (next = this.findNextEntry(entry, +1)) {\n            this.focus(next);\n          }\n          break;\n        case 39: // Right\n          if ((submenu = $('.submenu', entry)) && (next = submenu.firstElementChild)) {\n            let nextPrev;\n            while ((nextPrev = this.findNextEntry(next, -1))) {\n              next = nextPrev;\n            }\n            this.focus(next);\n          }\n          break;\n        case 37: // Left\n          if (next = $.x('parent::*[contains(@class,\"submenu\")]/parent::*', entry)) {\n            this.focus(next);\n          }\n          break;\n        default:\n          return;\n      }\n\n      e.preventDefault();\n      return e.stopPropagation();\n    }\n\n    onFocus(e) {\n      e.stopPropagation();\n      return this.focus(e.target);\n    }\n\n    focus(entry) {\n      let focused, submenu;\n      while ((focused = $.x('parent::*/child::*[contains(@class,\"focused\")]', entry))) {\n        $.rmClass(focused, 'focused');\n      }\n      for (focused of $$('.focused', entry)) {\n        $.rmClass(focused, 'focused');\n      }\n      $.addClass(entry, 'focused');\n\n      // Submenu positioning.\n      if (!(submenu = $('.submenu', entry))) { return; }\n      const sRect   = submenu.getBoundingClientRect();\n      const eRect   = entry.getBoundingClientRect();\n      const cHeight = doc.clientHeight;\n      const cWidth  = doc.clientWidth;\n      const [top, bottom] = (eRect.top + sRect.height) < cHeight ?\n        ['0px', 'auto']\n      :\n        ['auto', '0px'];\n      const [left, right] = (eRect.right + sRect.width) < (cWidth - 150) ?\n        ['100%', 'auto']\n      :\n        ['auto', '100%'];\n      const {style} = submenu;\n      style.top    = top;\n      style.bottom = bottom;\n      style.left   = left;\n      return style.right  = right;\n    }\n\n    addEntry(entry) {\n      this.parseEntry(entry);\n      return this.entries.push(entry);\n    }\n\n    parseEntry(entry) {\n      const {el, subEntries} = entry;\n      $.addClass(el, 'entry');\n      $.on(el, 'focus mouseover', this.onFocus);\n      el.style.order = entry.order || 100;\n      if (!subEntries) { return; }\n      $.addClass(el, 'has-submenu');\n      for (var subEntry of subEntries) {\n        this.parseEntry(subEntry);\n      }\n    }\n  };\n  Menu.initClass();\n  return Menu;\n})();\n\nexport var dragstart = function (e) {\n  let isTouching;\n  if ((e.type === 'mousedown') && (e.button !== 0)) { return; } // not LMB\n  // prevent text selection\n  e.preventDefault();\n  if (isTouching = e.type === 'touchstart') {\n    e = e.changedTouches[e.changedTouches.length - 1];\n  }\n  // distance from pointer to el edge is constant; calculate it here.\n  const el = $.x('ancestor::div[contains(@class,\"dialog\")][1]', this);\n  const rect = el.getBoundingClientRect();\n  const screenHeight = doc.clientHeight;\n  const screenWidth  = doc.clientWidth;\n  const o = {\n    id:     el.id,\n    style:  el.style,\n    dx:     e.clientX - rect.left,\n    dy:     e.clientY - rect.top,\n    height: screenHeight - rect.height,\n    width:  screenWidth  - rect.width,\n    screenHeight,\n    screenWidth,\n    isTouching\n  };\n\n  [o.topBorder, o.bottomBorder] = Conf['Header auto-hide'] || !Conf['Fixed Header'] ?\n    [0, 0]\n  : Conf['Bottom Header'] ?\n    [0, Header.bar.getBoundingClientRect().height]\n  :\n    [Header.bar.getBoundingClientRect().height, 0];\n\n  if (isTouching) {\n    o.identifier = e.identifier;\n    o.move = touchmove.bind(o);\n    o.up   = touchend.bind(o);\n    $.on(d, 'touchmove', o.move);\n    return $.on(d, 'touchend touchcancel', o.up);\n  } else { // mousedown\n    o.move = drag.bind(o);\n    o.up   = dragend.bind(o);\n    $.on(d, 'mousemove', o.move);\n    return $.on(d, 'mouseup',   o.up);\n  }\n};\n\nexport var touchmove = function (e) {\n  for (var touch of e.changedTouches) {\n    if (touch.identifier === this.identifier) {\n      drag.call(this, touch);\n      return;\n    }\n  }\n};\n\nexport var drag = function (e) {\n  const {clientX, clientY} = e;\n\n  let left = clientX - this.dx;\n  left = left < 10 ?\n    0\n  : (this.width - left) < 10 ?\n    ''\n  :\n    ((left / this.screenWidth) * 100) + '%';\n\n  let top = clientY - this.dy;\n  top = top < (10 + this.topBorder) ?\n    this.topBorder + 'px'\n  : (this.height - top) < (10 + this.bottomBorder) ?\n    ''\n  :\n    ((top / this.screenHeight) * 100) + '%';\n\n  const right = left === '' ?\n    0\n  :\n    '';\n\n  const bottom = top === '' ?\n    this.bottomBorder + 'px'\n  :\n    '';\n\n  const {style} = this;\n  style.left   = left;\n  style.right  = right;\n  style.top    = top;\n  return style.bottom = bottom;\n};\n\nexport var touchend = function (e) {\n  for (var touch of e.changedTouches) {\n    if (touch.identifier === this.identifier) {\n      dragend.call(this);\n      return;\n    }\n  }\n};\n\nexport var dragend = function () {\n  if (this.isTouching) {\n    $.off(d, 'touchmove', this.move);\n    $.off(d, 'touchend touchcancel', this.up);\n  } else { // mouseup\n    $.off(d, 'mousemove', this.move);\n    $.off(d, 'mouseup',   this.up);\n  }\n  return $.set(`${this.id}.position`, this.style.cssText);\n};\n\nconst hoverstart = function ({ root, el, latestEvent, endEvents, height, width, cb, noRemove }) {\n  const rect = root.getBoundingClientRect();\n  const o = {\n    root,\n    el,\n    style: el.style,\n    isImage: ['IMG', 'VIDEO'].includes(el.nodeName),\n    cb,\n    endEvents,\n    latestEvent,\n    clientHeight: doc.clientHeight,\n    clientWidth:  doc.clientWidth,\n    height,\n    width,\n    noRemove,\n    clientX: (rect.left + rect.right) / 2,\n    clientY: (rect.top + rect.bottom) / 2\n  };\n  o.hover    = hover.bind(o);\n  o.hoverend = hoverend.bind(o);\n\n  o.hover(o.latestEvent);\n  new MutationObserver(function() {\n    if (el.parentNode) { return o.hover(o.latestEvent); }\n  }).observe(el, {childList: true});\n\n  $.on(root, endEvents,   o.hoverend);\n  if ($.x('ancestor::div[contains(@class,\"inline\")][1]', root)) {\n    $.on(d,    'keydown',   o.hoverend);\n  }\n  $.on(root, 'mousemove', o.hover);\n\n  // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=674955\n  o.workaround = function(e) { if (!root.contains(e.target)) { return o.hoverend(e); } };\n  return $.on(doc,  'mousemove', o.workaround);\n};\n\nhoverstart.padding = 25;\n\nexport var hover = function (e) {\n  this.latestEvent = e;\n  const height = (this.height || this.el.offsetHeight) + hoverstart.padding;\n  const width  = (this.width  || this.el.offsetWidth);\n  const {clientX, clientY} = Conf['Follow Cursor'] ? e : this;\n\n  const top = this.isImage ?\n    Math.max(0, (clientY * (this.clientHeight - height)) / this.clientHeight)\n  :\n    Math.max(0, Math.min(this.clientHeight - height, clientY - 120));\n\n  let threshold = this.clientWidth / 2;\n  if (!this.isImage) { threshold = Math.max(threshold, this.clientWidth - 400); }\n  let marginX = (clientX <= threshold ? clientX : this.clientWidth - clientX) + 45;\n  if (this.isImage) { marginX = Math.min(marginX, this.clientWidth - width); }\n  marginX += 'px';\n  const [left, right] = clientX <= threshold ? [marginX, ''] : ['', marginX];\n\n  const {style} = this;\n  style.top   = top + 'px';\n  style.left  = left;\n  return style.right = right;\n};\n\nexport var hoverend = function (e) {\n  if (((e.type === 'keydown') && (e.keyCode !== 13)) || (e.target.nodeName === \"TEXTAREA\")) { return; }\n  if (!this.noRemove) { $.rm(this.el); }\n  $.off(this.root, this.endEvents,  this.hoverend);\n  $.off(d,     'keydown',   this.hoverend);\n  $.off(this.root, 'mousemove', this.hover);\n  // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=674955\n  $.off(doc,   'mousemove', this.workaround);\n  if (this.cb) { return this.cb.call(this); }\n};\n\nexport const checkbox = function (name, text, checked) {\n  if (checked == null) { checked = Conf[name]; }\n  const label = $.el('label');\n  const input = $.el('input', {type: 'checkbox', name, checked});\n  $.add(label, [input, $.tn(` ${text}`)]);\n  return label;\n};\n\nconst UI = {\n  dialog,\n  Menu,\n  hover:    hoverstart,\n  checkbox\n};\nexport default UI;\n","import Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Nav = {\n  init() {\n    switch (g.VIEW) {\n      case 'index':\n        if (!Conf['Index Navigation']) { return; }\n        break;\n      case 'thread':\n        if (!Conf['Reply Navigation']) { return; }\n        break;\n      default:\n        return;\n    }\n\n    const span = $.el('span',\n      {id: 'navlinks'});\n    const prev = $.el('a', {\n      textContent: '',\n      href: 'javascript:;'\n    }\n    );\n    const next = $.el('a', {\n      textContent: '',\n      href: 'javascript:;'\n    }\n    );\n\n    $.on(prev, 'click', this.prev);\n    $.on(next, 'click', this.next);\n\n    $.add(span, [prev, $.tn(' '), next]);\n    var append = function() {\n      $.off(d, '4chanXInitFinished', append);\n      return $.add(d.body, span);\n    };\n    return $.on(d, '4chanXInitFinished', append);\n  },\n\n  prev() {\n    if (g.VIEW === 'thread') {\n      return window.scrollTo(0, 0);\n    } else {\n      return Nav.scroll(-1);\n    }\n  },\n\n  next() {\n    if (g.VIEW === 'thread') {\n      return window.scrollTo(0, d.body.scrollHeight);\n    } else {\n      return Nav.scroll(+1);\n    }\n  },\n\n  getThread() {\n    if (g.VIEW === 'thread') { return g.threads.get(`${g.BOARD}.${g.THREADID}`).nodes.root; }\n    if ($.hasClass(doc, 'catalog-mode')) { return; }\n    for (var threadRoot of $$(g.SITE.selectors.thread)) {\n      var thread = Get.threadFromRoot(threadRoot);\n      if (thread.isHidden && !thread.stub) { continue; }\n      if (Header.getTopOf(threadRoot) >= -threadRoot.getBoundingClientRect().height) { // not scrolled past\n        return threadRoot;\n      }\n    }\n  },\n\n  scroll(delta) {\n    let next;\n    d.activeElement?.blur();\n    let thread = Nav.getThread();\n    if (!thread) { return; }\n    const axis = delta === +1 ?\n      'following'\n    :\n      'preceding';\n    if (next = $.x(`${axis}-sibling::${g.SITE.xpath.thread}[not(@hidden)][1]`, thread)) {\n      // Unless we're not at the beginning of the current thread,\n      // and thus wanting to move to beginning,\n      // or we're above the first thread and don't want to skip it.\n      const top = Header.getTopOf(thread);\n      if (((delta === +1) && (top < 5)) || ((delta === -1) && (top > -5))) { thread = next; }\n    }\n    // Add extra space to the end of the page if necessary so that all threads can be selected by keybinds.\n    const extra = (Header.getTopOf(thread) + doc.clientHeight) - d.body.getBoundingClientRect().bottom;\n    if (extra > 0) { d.body.style.marginBottom = `${extra}px`; }\n\n    Header.scrollTo(thread);\n\n    if ((extra > 0) && !Nav.haveExtra) {\n      Nav.haveExtra = true;\n      return $.on(d, 'scroll', Nav.removeExtra);\n    }\n  },\n\n  removeExtra() {\n    const extra = doc.clientHeight - d.body.getBoundingClientRect().bottom;\n    if (extra > 0) {\n      return d.body.style.marginBottom = `${extra}px`;\n    } else {\n      d.body.style.marginBottom = '';\n      delete Nav.haveExtra;\n      return $.off(d, 'scroll', Nav.removeExtra);\n    }\n  }\n};\nexport default Nav;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, g } from \"../globals/globals\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageHost = {\n  init() {\n    if ((!(this.useFaster = /\\S/.test(Conf['fourchanImageHost']))) || (g.SITE.software !== 'yotsuba') || !['index', 'thread'].includes(g.VIEW)) { return; }\n    return Callbacks.Post.push({\n      name: 'Image Host Rewriting',\n      cb:   this.node\n    });\n  },\n\n  suggestions: ['i.4cdn.org', 'is2.4chan.org'],\n\n  host() {\n    return Conf['fourchanImageHost'].trim() || 'i.4cdn.org';\n  },\n  flashHost() {\n    return 'i.4cdn.org';\n  },\n  thumbHost() {\n    return 'i.4cdn.org';\n  },\n  test(hostname) {\n    return (hostname === 'i.4cdn.org') || ImageHost.regex.test(hostname);\n  },\n\n  regex: /^is\\d*\\.4chan(?:nel)?\\.org$/,\n\n  node() {\n    if (this.isClone) { return; }\n    const host = ImageHost.host();\n    if (this.file && ImageHost.test(this.file.url.split('/')[2]) && !/\\.swf$/.test(this.file.url)) {\n      this.file.link.hostname = host;\n      if (this.file.thumbLink) { this.file.thumbLink.hostname = host; }\n      this.file.url = this.file.link.href;\n    }\n    return ImageHost.fixLinks($$('a', this.nodes.comment));\n  },\n\n  fixLinks(links) {\n    for (var link of links) {\n      if (ImageHost.test(link.hostname) && !/\\.swf$/.test(link.pathname)) {\n        var host = ImageHost.host();\n        if (link.hostname !== host) { link.hostname = host; }\n      }\n    }\n  }\n};\nexport default ImageHost;\n","import Callbacks from \"../classes/Callbacks\";\nimport Config from \"../config/Config\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, E } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Volume = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) ||\n      (!Conf['Image Expansion'] && !Conf['Image Hover'] && !Conf['Image Hover in Catalog'] && !Conf['Gallery'])) { return; }\n\n    $.sync('Allow Sound', function(x) {\n      Conf['Allow Sound'] = x;\n      if (Volume.inputs) Volume.inputs.unmute.checked = x;\n    });\n\n    $.sync('Default Volume', function(x) {\n      Conf['Default Volume'] = x;\n      if (Volume.inputs) Volume.inputs.volume.value = x;\n    });\n\n    if (Conf['Mouse Wheel Volume']) {\n      Callbacks.Post.push({\n        name: 'Mouse Wheel Volume',\n        cb:   this.node\n      });\n    }\n\n    if (g.SITE.noAudio?.(g.BOARD)) { return; }\n\n    if (Conf['Mouse Wheel Volume']) {\n      Callbacks.CatalogThread.push({\n        name: 'Mouse Wheel Volume',\n        cb:   this.catalogNode\n      });\n    }\n\n    const unmuteEntry = UI.checkbox('Allow Sound', 'Allow Sound');\n    unmuteEntry.title = Config.main['Images and Videos']['Allow Sound'][1];\n\n    const volumeEntry = $.el('label',\n      {title: 'Default volume for videos.'});\n    $.extend(volumeEntry,\n      {innerHTML: \"<input name=\\\"Default Volume\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.01\\\" value=\\\"\" + E(Conf[\"Default Volume\"]) + \"\\\"> Volume\"});\n\n    this.inputs = {\n      unmute: unmuteEntry.firstElementChild,\n      volume: volumeEntry.firstElementChild\n    };\n\n    $.on(this.inputs.unmute, 'change', $.cb.checked);\n    $.on(this.inputs.volume, 'change', $.cb.value);\n\n    Header.menu.addEntry({el: unmuteEntry, order: 200});\n    return Header.menu.addEntry({el: volumeEntry, order: 201});\n  },\n\n  setup(video) {\n    video.muted  = !Conf['Allow Sound'];\n    video.volume = Conf['Default Volume'];\n    return $.on(video, 'volumechange', Volume.change);\n  },\n\n  change() {\n    const {muted, volume} = this;\n    const items = {\n      'Allow Sound': !muted,\n      'Default Volume': volume\n    };\n    for (var key in items) {\n      var val = items[key];\n      if (Conf[key] === val) {\n        delete items[key];\n      }\n    }\n    $.set(items);\n    $.extend(Conf, items);\n    if (Volume.inputs) {\n      Volume.inputs.unmute.checked = !muted;\n      return Volume.inputs.volume.value = volume;\n    }\n  },\n\n  node() {\n    if (g.SITE.noAudio?.(this.board)) { return; }\n    for (var file of this.files) {\n      if (file.isVideo) {\n        if (file.thumb) { $.on(file.thumb,                                'wheel', Volume.wheel.bind(Header.hover)); }\n        $.on(($('.file-info', file.text) || file.link), 'wheel', Volume.wheel.bind(file.thumbLink));\n      }\n    }\n  },\n\n  catalogNode() {\n    const file = this.thread.OP.files[0];\n    if (!file?.isVideo) { return; }\n    return $.on(this.nodes.thumb, 'wheel', Volume.wheel.bind(Header.hover));\n  },\n\n  wheel(e) {\n    let el;\n    if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey) { return; }\n    if (!(el = $('video:not([data-md5])', this))) { return; }\n    if (el.muted || !$.hasAudio(el)) { return; }\n    let volume = el.volume + 0.1;\n    if (e.deltaY < 0) { volume *= 1.1; }\n    if (e.deltaY > 0) { volume /= 1.1; }\n    el.volume = $.minmax(volume - 0.1, 0, 1);\n    return e.preventDefault();\n  }\n};\nexport default Volume;\n","import Redirect from \"../Archive/Redirect\";\nimport Notice from \"../classes/Notice\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport CrossOrigin from \"../platform/CrossOrigin\";\nimport ImageHost from \"./ImageHost\";\nimport Volume from \"./Volume\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS204: Change includes calls to have a more natural evaluation order\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageCommon = {\n  // Pause and mute video in preparation for removing the element from the document.\n  pause(video) {\n    if (video.nodeName !== 'VIDEO') { return; }\n    video.pause();\n    $.off(video, 'volumechange', Volume.change);\n    return video.muted = true;\n  },\n\n  rewind(el) {\n    if (el.nodeName === 'VIDEO') {\n      if (el.readyState >= el.HAVE_METADATA) { return el.currentTime = 0; }\n    } else if (/\\.gif$/.test(el.src)) {\n      return $.queueTask(() => el.src = el.src);\n    }\n  },\n\n  pushCache(el) {\n    ImageCommon.cache = el;\n    return $.on(el, 'error', ImageCommon.cacheError);\n  },\n\n  popCache() {\n    const el = ImageCommon.cache;\n    $.off(el, 'error', ImageCommon.cacheError);\n    delete ImageCommon.cache;\n    return el;\n  },\n\n  cacheError() {\n    if (ImageCommon.cache === this) { return delete ImageCommon.cache; }\n  },\n\n  decodeError(file, fileObj) {\n    let message;\n    if (file.error?.code !== MediaError.MEDIA_ERR_DECODE) { return false; }\n    if (!(message = $('.warning', fileObj.thumb.parentNode))) {\n      message = $.el('div', {className:   'warning'});\n      $.after(fileObj.thumb, message);\n    }\n    message.textContent = 'Error: Corrupt or unplayable video';\n    return true;\n  },\n\n  isFromArchive(file) {\n    return (g.SITE.software === 'yotsuba') && !ImageHost.test(file.src.split('/')[2]);\n  },\n\n  error(file, post, fileObj, delay, cb) {\n    let timeoutID;\n    const src = fileObj.url.split('/');\n    let url = null;\n    if ((g.SITE.software === 'yotsuba') && Conf['404 Redirect']) {\n      url = Redirect.to('file', {\n        boardID:  post.board.ID,\n        filename: src[src.length - 1]\n      });\n    }\n    if (!url || !Redirect.securityCheck(url)) { url = null; }\n\n    if ((post.isDead || fileObj.isDead) && !ImageCommon.isFromArchive(file)) { return cb(url); }\n\n    if (delay != null) { timeoutID = setTimeout((() => cb(url)), delay); }\n    if (post.isDead || fileObj.isDead) { return; }\n    const redirect = function() {\n      if (!ImageCommon.isFromArchive(file)) {\n        if (delay != null) { clearTimeout(timeoutID); }\n        return cb(url);\n      }\n    };\n\n    const threadJSON = g.SITE.urls.threadJSON?.(post);\n    if (!threadJSON) { return; }\n    var parseJSON = function(isArchiveURL) {\n      let needle, postObj;\n      if (this.status === 404) {\n        let archivedThreadJSON;\n        if (!isArchiveURL && (archivedThreadJSON = g.SITE.urls.archivedThreadJSON?.(post))) {\n          $.ajax(archivedThreadJSON, {onloadend() { return parseJSON.call(this, true); }});\n        } else {\n          post.kill(!post.isClone, fileObj.index);\n        }\n      }\n      if (this.status !== 200) { return redirect(); }\n      for (postObj of this.response.posts) {\n        if (postObj.no === post.ID) { break; }\n      }\n      if (postObj.no !== post.ID) {\n        post.kill();\n        return redirect();\n      } else if ((needle = fileObj.docIndex, g.SITE.Build.parseJSON(postObj, post.board).filesDeleted.includes(needle))) {\n        post.kill(true);\n        return redirect();\n      } else {\n        return url = fileObj.url;\n      }\n    };\n    return $.ajax(threadJSON, {onloadend() { return parseJSON.call(this); }});\n  },\n\n  // Add controls, but not until the mouse is moved over the video.\n  addControls(video) {\n    var handler = function() {\n      $.off(video, 'mouseover', handler);\n      // Hacky workaround for Firefox forever-loading bug for very short videos\n      const t = new Date().getTime();\n      return $.asap((() => ($.engine !== 'gecko') || ((video.readyState >= 3) && (video.currentTime <= Math.max(0.1, (video.duration - 0.5)))) || (new Date().getTime() >= (t + 1000))), () => video.controls = true);\n    };\n    return $.on(video, 'mouseover', handler);\n  },\n\n  // XXX Estimate whether clicks are on the video controls and should be ignored.\n  onControls(e) {\n    return (Conf['Show Controls'] && Conf['Click Passthrough'] && (e.target.nodeName === 'VIDEO')) ||\n      (e.target.controls && ((e.target.getBoundingClientRect().bottom - e.clientY) < 35));\n  },\n\n  download(e) {\n    if (this.protocol === 'blob:') { return true; }\n    e.preventDefault();\n    const {href, download} = this;\n    return CrossOrigin.file(href, function(blob) {\n      if (blob) {\n        const a = $.el('a', {\n          href: URL.createObjectURL(blob),\n          download,\n          hidden: true\n        }\n        );\n        $.add(d.body, a);\n        a.click();\n        return $.rm(a);\n      } else {\n        return new Notice('warning', `Could not download ${href}`, 20);\n      }\n    });\n  }\n};\nexport default ImageCommon;\n",null,null,null,"import Callbacks from \"../classes/Callbacks\";\nimport UI from \"../General/UI\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Menu = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu']) { return; }\n\n    this.button = $.el('a', {\n      className: 'menu-button',\n      href:      'javascript:;'\n    }\n    );\n\n    $.extend(this.button, {textContent: \"\"});\n\n    this.menu = new UI.Menu('post');\n    Callbacks.Post.push({\n      name: 'Menu',\n      cb:   this.node\n    });\n\n    return Callbacks.CatalogThread.push({\n      name: 'Menu',\n      cb:   this.catalogNode\n    });\n  },\n\n  node() {\n    if (this.isClone) {\n      const button = $('.menu-button', this.nodes.info);\n      $.rmClass(button, 'active');\n      $.rm($('.dialog', this.nodes.info));\n      Menu.makeButton(this, button);\n      return;\n    }\n    return $.add(this.nodes.info, Menu.makeButton(this));\n  },\n\n  catalogNode() {\n    return $.after(this.nodes.icons, Menu.makeButton(this.thread.OP));\n  },\n\n  makeButton(post, button) {\n    if (!button) { button = Menu.button.cloneNode(true); }\n    $.on(button, 'click', function(e) {\n      return Menu.menu.toggle(e, this, post);\n    });\n    return button;\n  }\n};\nexport default Menu;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g } from \"../globals/globals\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Recursive = {\n  recursives: dict(),\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n    return Callbacks.Post.push({\n      name: 'Recursive',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone || this.isFetchedQuote) { return; }\n    for (var quote of this.quotes) {\n      var obj;\n      if ((obj = Recursive.recursives[quote])) {\n        for (var i = 0; i < obj.recursives.length; i++) {\n          var recursive = obj.recursives[i];\n          recursive(this, ...obj.args[i]);\n        }\n      }\n    }\n  },\n\n  add(recursive, post, ...args) {\n    const obj = Recursive.recursives[post.fullID] || (Recursive.recursives[post.fullID] = {\n      recursives: [],\n      args: []\n    });\n    obj.recursives.push(recursive);\n    return obj.args.push(args);\n  },\n\n  rm(recursive, post) {\n    let obj;\n    if (!(obj = Recursive.recursives[post.fullID])) { return; }\n    for (let i = 0; i < obj.recursives.length; i++) {\n      var rec = obj.recursives[i];\n      if (rec === recursive) {\n        obj.recursives.splice(i, 1);\n        obj.args.splice(i, 1);\n      }\n    }\n  },\n\n  apply(recursive, post, ...args) {\n    const {fullID} = post;\n    return g.posts.forEach(function(post) {\n      if (post.quotes.includes(fullID)) {\n        return recursive(post, ...args);\n      }\n    });\n  }\n};\nexport default Recursive;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Get from \"../General/Get\";\nimport UI from \"../General/UI\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport Menu from \"../Menu/Menu\";\nimport $ from \"../platform/$\";\nimport Recursive from \"./Recursive\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar PostHiding = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || (!Conf['Reply Hiding Buttons'] && !(Conf['Menu'] && Conf['Reply Hiding Link']))) { return; }\n\n    if (Conf['Reply Hiding Buttons']) {\n      $.addClass(doc, \"reply-hide\");\n    }\n\n    this.db = new DataBoard('hiddenPosts');\n    return Callbacks.Post.push({\n      name: 'Reply Hiding',\n      cb:   this.node\n    });\n  },\n\n  isHidden(boardID, threadID, postID) {\n    return !!(PostHiding.db && PostHiding.db.get({boardID, threadID, postID}));\n  },\n\n  node() {\n    let data, sa;\n    if (!this.isReply || this.isClone || this.isFetchedQuote) { return; }\n\n    if (data = PostHiding.db.get({boardID: this.board.ID, threadID: this.thread.ID, postID: this.ID})) {\n      if (data.thisPost) {\n        PostHiding.hide(this, data.makeStub, data.hideRecursively);\n      } else {\n        Recursive.apply(PostHiding.hide, this, data.makeStub, true);\n        Recursive.add(PostHiding.hide, this, data.makeStub, true);\n      }\n    }\n\n    if (!Conf['Reply Hiding Buttons']) { return; }\n\n    const button = PostHiding.makeButton(this, 'hide');\n    if (sa = g.SITE.selectors.sideArrows) {\n      const sideArrows = $(sa, this.nodes.root);\n      $.replace(sideArrows.firstChild, button);\n      return sideArrows.className = 'replacedSideArrows';\n    } else {\n      return $.prepend(this.nodes.info, button);\n    }\n  },\n\n  menu: {\n    init() {\n      if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Reply Hiding Link']) { return; }\n\n      // Hide\n      let div = $.el('div', {\n        className: 'hide-reply-link',\n        textContent: 'Hide'\n      }\n      );\n\n      let apply = $.el('a', {\n        textContent: 'Apply',\n        href: 'javascript:;'\n      }\n      );\n      $.on(apply, 'click', PostHiding.menu.hide);\n\n      let thisPost = UI.checkbox('thisPost', 'This post',    true);\n      let replies  = UI.checkbox('replies',  'Hide replies', Conf['Recursive Hiding']);\n      const makeStub = UI.checkbox('makeStub', 'Make stub',    Conf['Stubs']);\n\n      Menu.menu.addEntry({\n        el: div,\n        order: 20,\n        open(post) {\n          if (!post.isReply || post.isClone || post.isHidden) {\n            return false;\n          }\n          PostHiding.menu.post = post;\n          return true;\n        },\n        subEntries: [\n            {el: apply}\n          ,\n            {el: thisPost}\n          ,\n            {el: replies}\n          ,\n            {el: makeStub}\n        ]});\n\n      // Show\n      div = $.el('div', {\n        className: 'show-reply-link',\n        textContent: 'Show'\n      }\n      );\n\n      apply = $.el('a', {\n        textContent: 'Apply',\n        href: 'javascript:;'\n      }\n      );\n      $.on(apply, 'click', PostHiding.menu.show);\n\n      thisPost = UI.checkbox('thisPost', 'This post',    false);\n      replies  = UI.checkbox('replies',  'Show replies', false);\n      const hideStubLink = $.el('a', {\n        textContent: 'Hide stub',\n        href: 'javascript:;'\n      }\n      );\n      $.on(hideStubLink, 'click', PostHiding.menu.hideStub);\n\n      Menu.menu.addEntry({\n        el: div,\n        order: 20,\n        open(post) {\n          let data;\n          if (!post.isReply || post.isClone || !post.isHidden) {\n            return false;\n          }\n          if (!(data = PostHiding.db.get({boardID: post.board.ID, threadID: post.thread.ID, postID: post.ID}))) {\n            return false;\n          }\n          PostHiding.menu.post = post;\n          thisPost.firstChild.checked = post.isHidden;\n          replies.firstChild.checked  = (data?.hideRecursively != null) ? data.hideRecursively : Conf['Recursive Hiding'];\n          return true;\n        },\n        subEntries: [\n            {el: apply}\n          ,\n            {el: thisPost}\n          ,\n            {el: replies}\n        ]});\n\n      return Menu.menu.addEntry({\n        el: hideStubLink,\n        order: 15,\n        open(post) {\n          let data;\n          if (!post.isReply || post.isClone || !post.isHidden) {\n            return false;\n          }\n          if (!(data = PostHiding.db.get({boardID: post.board.ID, threadID: post.thread.ID, postID: post.ID}))) {\n            return false;\n          }\n          return PostHiding.menu.post = post;\n        }\n      });\n    },\n\n    hide() {\n      const parent   = this.parentNode;\n      const thisPost = $('input[name=thisPost]', parent).checked;\n      const replies  = $('input[name=replies]',  parent).checked;\n      const makeStub = $('input[name=makeStub]', parent).checked;\n      const {post}   = PostHiding.menu;\n      if (thisPost) {\n        PostHiding.hide(post, makeStub, replies);\n      } else if (replies) {\n        Recursive.apply(PostHiding.hide, post, makeStub, true);\n        Recursive.add(PostHiding.hide, post, makeStub, true);\n      } else {\n        return;\n      }\n      PostHiding.saveHiddenState(post, true, thisPost, makeStub, replies);\n      return $.event('CloseMenu');\n    },\n\n    show() {\n      let data;\n      const parent   = this.parentNode;\n      const thisPost = $('input[name=thisPost]', parent).checked;\n      const replies  = $('input[name=replies]',  parent).checked;\n      const {post}   = PostHiding.menu;\n      if (thisPost) {\n        PostHiding.show(post, replies);\n      } else if (replies) {\n        Recursive.apply(PostHiding.show, post, true);\n        Recursive.rm(PostHiding.hide, post, true);\n      } else {\n        return;\n      }\n      if (data = PostHiding.db.get({boardID: post.board.ID, threadID: post.thread.ID, postID: post.ID})) {\n        PostHiding.saveHiddenState(post, !(thisPost && replies), !thisPost, data.makeStub, !replies);\n      }\n      return $.event('CloseMenu');\n    },\n    hideStub() {\n      let data;\n      const {post} = PostHiding.menu;\n      if (data = PostHiding.db.get({boardID: post.board.ID, threadID: post.thread.ID, postID: post.ID})) {\n        PostHiding.show(post, data.hideRecursively);\n        PostHiding.hide(post, false, data.hideRecursively);\n        PostHiding.saveHiddenState(post, true, true, false, data.hideRecursively);\n      }\n      $.event('CloseMenu');\n    }\n  },\n\n  makeButton(post, type) {\n    const span = $.el('span', {\n      textContent: type === 'hide' ? '' : '',\n    });\n    const a = $.el('a', {\n      className: `${type}-reply-button`,\n      href:      'javascript:;'\n    }\n    );\n    $.add(a, span);\n    $.on(a, 'click', PostHiding.toggle);\n    return a;\n  },\n\n  saveHiddenState(post, isHiding, thisPost, makeStub, hideRecursively) {\n    const data = {\n      boardID:  post.board.ID,\n      threadID: post.thread.ID,\n      postID:   post.ID\n    };\n    if (isHiding) {\n      data.val = {\n        thisPost: thisPost !== false, // undefined -> true\n        makeStub,\n        hideRecursively\n      };\n      return PostHiding.db.set(data);\n    } else {\n      return PostHiding.db.delete(data);\n    }\n  },\n\n  toggle() {\n    const post = Get.postFromNode(this);\n    PostHiding[(post.isHidden ? 'show' : 'hide')](post);\n    return PostHiding.saveHiddenState(post, post.isHidden);\n  },\n\n  hide(post, makeStub=Conf['Stubs'], hideRecursively=Conf['Recursive Hiding']) {\n    if (post.isHidden) { return; }\n    post.isHidden = true;\n\n    if (hideRecursively) {\n      Recursive.apply(PostHiding.hide, post, makeStub, true);\n      Recursive.add(PostHiding.hide, post, makeStub, true);\n    }\n\n    for (var quotelink of Get.allQuotelinksLinkingTo(post)) {\n      $.addClass(quotelink, 'filtered');\n    }\n\n    if (!makeStub) {\n      post.nodes.root.hidden = true;\n      return;\n    }\n\n    const a = PostHiding.makeButton(post, 'show');\n    $.add(a, $.tn(` ${post.info.nameBlock}`));\n    post.nodes.stub = $.el('div',\n      {className: 'stub'});\n    $.add(post.nodes.stub, a);\n    if (Conf['Menu']) {\n      $.add(post.nodes.stub, Menu.makeButton(post));\n    }\n    return $.prepend(post.nodes.root, post.nodes.stub);\n  },\n\n  show(post, showRecursively=Conf['Recursive Hiding']) {\n    if (post.nodes.stub) {\n      $.rm(post.nodes.stub);\n      delete post.nodes.stub;\n    } else {\n      post.nodes.root.hidden = false;\n    }\n    post.isHidden = false;\n    if (showRecursively) {\n      Recursive.apply(PostHiding.show, post, true);\n      Recursive.rm(PostHiding.hide, post);\n    }\n    for (var quotelink of Get.allQuotelinksLinkingTo(post)) {\n      $.rmClass(quotelink, 'filtered');\n    }\n  }\n};\nexport default PostHiding;\n","import Callbacks from \"../classes/Callbacks\";\nimport Post from \"../classes/Post\";\nimport Index from \"../General/Index\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { DAY, HOUR, MINUTE, SECOND } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar RelativeDates = {\n  INTERVAL: 30000,\n\n  init() {\n    if (\n      (['index', 'thread', 'archive'].includes(g.VIEW) && Conf['Relative Post Dates'] && !Conf['Relative Date Title']) ||\n      Index.enabled\n    ) {\n      this.flush();\n      $.on(d, 'visibilitychange PostsInserted', this.flush);\n    }\n\n    if (Conf['Relative Post Dates']) {\n      return Callbacks.Post.push({\n        name: 'Relative Post Dates',\n        cb:   this.node\n      });\n    }\n  },\n\n  node() {\n    if (!this.info.date) { return; }\n    const dateEl = this.nodes.date;\n    if (Conf['Relative Date Title']) {\n      $.on(dateEl, 'mouseover', () => RelativeDates.hover(this));\n      return;\n    }\n    if (this.isClone) { return; }\n\n    // Show original absolute time as tooltip so users can still know exact times\n    // Since \"Time Formatting\" runs its `node` before us, the title tooltip will\n    // pick up the user-formatted time instead of 4chan time when enabled.\n    dateEl.title = dateEl.textContent;\n\n    return RelativeDates.update(this);\n  },\n\n  // diff is milliseconds from now.\n  relative(diff, now, date, abbrev) {\n    let number;\n    let unit = (() => {\n      if ((number = (diff / DAY)) >= 1) {\n      const years  = now.getFullYear()  - date.getFullYear();\n        let months = now.getMonth() - date.getMonth();\n      const days   = now.getDate()  - date.getDate();\n        if (years > 1) {\n          number = years - ((months < 0) || ((months === 0) && (days < 0)));\n          return 'year';\n        } else if ((years === 1) && ((months > 0) || ((months === 0) && (days >= 0)))) {\n          number = years;\n          return 'year';\n      } else if ((months = months + (12*years)) > 1) {\n          number = months - (days < 0);\n          return 'month';\n        } else if ((months === 1) && (days >= 0)) {\n          number = months;\n          return 'month';\n        } else {\n          return 'day';\n        }\n    } else if ((number = (diff / HOUR)) >= 1) {\n      return 'hour';\n    } else if ((number = (diff / MINUTE)) >= 1) {\n      return 'minute';\n    } else {\n      // prevent \"-1 seconds ago\"\n      number = Math.max(0, diff) / SECOND;\n      return 'second';\n    }\n    })();\n\n    const rounded = Math.round(number);\n\n    if (abbrev) {\n      unit = unit === 'month' ? 'mo' : unit[0];\n    } else {\n      if (rounded !== 1) { unit += 's'; } // pluralize\n    }\n\n    if (abbrev) { return `${rounded}${unit}`; } else { return `${rounded} ${unit} ago`; }\n  },\n\n  // Changing all relative dates as soon as possible incurs many annoying\n  // redraws and scroll stuttering. Thus, sacrifice accuracy for UX/CPU economy,\n  // and perform redraws when the DOM is otherwise being manipulated (and scroll\n  // stuttering won't be noticed), falling back to INTERVAL while the page\n  // is visible.\n  //\n  // Each individual dateTime element will add its update() function to the stale list\n  // when it is to be called.\n  stale: [],\n  flush() {\n    // No point in changing the dates until the user sees them.\n    if (d.hidden) { return; }\n\n    const now = new Date();\n    for (var data of RelativeDates.stale) { RelativeDates.update(data, now); }\n    RelativeDates.stale = [];\n\n    // Reset automatic flush.\n    clearTimeout(RelativeDates.timeout);\n    return RelativeDates.timeout = setTimeout(RelativeDates.flush, RelativeDates.INTERVAL);\n  },\n\n  hover(post) {\n    const {\n      date\n    } = post.info;\n    const now  = new Date();\n    const diff = now - date;\n    return post.nodes.date.title = RelativeDates.relative(diff, now, date);\n  },\n\n  // `update()`, when called from `flush()`, updates the elements,\n  // and re-calls `setOwnTimeout()` to re-add `data` to the stale list later.\n  update(data, now) {\n    let abbrev, date;\n    const isPost = data instanceof Post;\n    if (isPost) {\n      ({\n        date\n      } = data.info);\n      abbrev = false;\n    } else {\n      date = new Date(+data.dataset.utc);\n      abbrev = !!data.dataset.abbrev;\n    }\n    if (!now) { now = new Date(); }\n    const diff = now - date;\n    const relative = RelativeDates.relative(diff, now, date, abbrev);\n    if (isPost) {\n      for (var singlePost of [data].concat(data.clones)) {\n        singlePost.nodes.date.firstChild.textContent = relative;\n      }\n    } else {\n      data.firstChild.textContent = relative;\n    }\n    return RelativeDates.setOwnTimeout(diff, data);\n  },\n\n  setOwnTimeout(diff, data) {\n    const delay = diff < MINUTE ?\n      SECOND - ((diff + (SECOND / 2)) % SECOND)\n    : diff < HOUR ?\n      MINUTE - ((diff + (MINUTE / 2)) % MINUTE)\n    : diff < DAY ?\n      HOUR - ((diff + (HOUR / 2)) % HOUR)\n    :\n      DAY - ((diff + (DAY / 2)) % DAY);\n    return setTimeout(RelativeDates.markStale, delay, data);\n  },\n\n  markStale(data) {\n    if (RelativeDates.stale.includes(data)) { return; } // We can call RelativeDates.update() multiple times.\n    if (data instanceof Post && !g.posts.get(data.fullID)) { return; } // collected post.\n    if (data instanceof Element && !doc.contains(data)) { return; } // removed catalog reply.\n    return RelativeDates.stale.push(data);\n  }\n};\nexport default RelativeDates;\n","import Notice from \"../classes/Notice\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict, HOUR } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar BoardConfig = {\n  cbs: [],\n\n  init() {\n    let middle;\n    if (g.SITE.software !== 'yotsuba') { return; }\n    const now = Date.now();\n    if (now - (2 * HOUR) >= ((middle = Conf['boardConfig'].lastChecked || 0)) || middle > now) {\n      return $.ajax(`${location.protocol}//a.4cdn.org/boards.json`,\n        {onloadend: this.load});\n    } else {\n      const {boards} = Conf['boardConfig'];\n      return this.set(boards);\n    }\n  },\n\n  load() {\n    let boards;\n    if ((this.status === 200) && this.response && this.response.boards) {\n      boards = dict();\n      for (var board of this.response.boards) {\n        boards[board.board] = board;\n      }\n      $.set('boardConfig', {boards, lastChecked: Date.now()});\n    } else {\n      ({boards} = Conf['boardConfig']);\n      const err = (() => { switch (this.status) {\n        case 0:   return 'Connection Error';\n        case 200: return 'Invalid Data';\n        default:          return `Error ${this.statusText} (${this.status})`;\n      } })();\n      new Notice('warning', `Failed to load board configuration. ${err}`, 20);\n    }\n    return BoardConfig.set(boards);\n  },\n\n  set(boards) {\n    this.boards = boards;\n    for (var ID in g.boards) {\n      var board = g.boards[ID];\n      board.config = this.boards[ID] || {};\n    }\n    for (var cb of this.cbs) {\n      $.queueTask(cb);\n    }\n  },\n\n  ready(cb) {\n    if (this.boards) {\n      return cb();\n    } else {\n      return this.cbs.push(cb);\n    }\n  },\n\n  sfwBoards(sfw) {\n    return (() => {\n      const result = [];\n      const object = this.boards || Conf['boardConfig'].boards;\n      for (var board in object) {\n        var data = object[board];\n        if (!!data.ws_board === sfw) {\n          result.push(board);\n        }\n      }\n      return result;\n    })();\n  },\n\n  isSFW(board) {\n    return !!(this.boards || Conf['boardConfig'].boards)[board]?.ws_board;\n  },\n\n  domain(board) {\n    return `boards.${BoardConfig.isSFW(board) ? '4channel' : '4chan'}.org`;\n  },\n\n  isArchived(board) {\n    // assume archive exists if no data available to prevent cleaning of archived threads\n    const data = (this.boards || Conf['boardConfig'].boards)[board];\n    return !data || data.is_archived;\n  },\n\n  noAudio(boardID) {\n    if (g.SITE.software !== 'yotsuba') { return false; }\n    const boards = this.boards || Conf['boardConfig'].boards;\n    return boards && boards[boardID] && !boards[boardID].webm_audio;\n  },\n\n  title(boardID) {\n    return (this.boards || Conf['boardConfig'].boards)?.[boardID]?.title || '';\n  }\n};\nexport default BoardConfig;\n",null,"import { d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PostRedirect = {\n  init() {\n    return $.on(d, 'QRPostSuccessful', e => {\n      if (!e.detail.redirect) { return; }\n      this.event = e;\n      this.delays = 0;\n      return $.queueTask(() => {\n        if ((e === this.event) && (this.delays === 0)) {\n          return location.href = e.detail.redirect;\n        }\n      });\n    });\n  },\n\n  delays: 0,\n\n  delay() {\n    if (!this.event) { return null; }\n    const e = this.event;\n    this.delays++;\n    return () => {\n      if (e !== this.event) { return; }\n      this.delays--;\n      if (this.delays === 0) {\n        return location.href = e.detail.redirect;\n      }\n    };\n  }\n};\nexport default PostRedirect;\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ExpandComment = {\n  init() {\n    if ((g.VIEW !== 'index') || !Conf['Comment Expansion'] || Conf['JSON Index']) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Comment Expansion',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    let a;\n    if (a = $('.abbr > a:not([onclick])', this.nodes.comment)) {\n      return $.on(a, 'click', ExpandComment.cb);\n    }\n  },\n\n  callbacks: [],\n\n  cb(e) {\n    e.preventDefault();\n    return ExpandComment.expand(Get.postFromNode(this));\n  },\n\n  expand(post) {\n    let a;\n    if (post.nodes.longComment && !post.nodes.longComment.parentNode) {\n      $.replace(post.nodes.shortComment, post.nodes.longComment);\n      post.nodes.comment = post.nodes.longComment;\n      return;\n    }\n    if (!(a = $('.abbr > a', post.nodes.comment))) { return; }\n    a.textContent = `Post No.${post} Loading...`;\n    return $.cache(g.SITE.urls.threadJSON({boardID: post.boardID, threadID: post.threadID}), function() { return ExpandComment.parse(this, a, post); });\n  },\n\n  contract(post) {\n    if (!post.nodes.shortComment) { return; }\n    const a = $('.abbr > a', post.nodes.shortComment);\n    a.textContent = 'here';\n    $.replace(post.nodes.longComment, post.nodes.shortComment);\n    return post.nodes.comment = post.nodes.shortComment;\n  },\n\n  parse(req, a, post) {\n    let postObj, spoilerRange;\n    const {status} = req;\n    if (![200, 304].includes(status)) {\n      a.textContent = status ? `Error ${req.statusText} (${status})` : 'Connection Error';\n      return;\n    }\n\n    const {\n      posts\n    } = req.response;\n    if (spoilerRange = posts[0].custom_spoiler) {\n      g.SITE.Build.spoilerRange[g.BOARD] = spoilerRange;\n    }\n\n    for (postObj of posts) {\n      if (postObj.no === post.ID) { break; }\n    }\n    if (postObj.no !== post.ID) {\n      a.textContent = `Post No.${post} not found.`;\n      return;\n    }\n\n    const {comment} = post.nodes;\n    const clone = comment.cloneNode(false);\n    clone.innerHTML = postObj.com;\n    // Fix pathnames\n    for (var quote of $$('.quotelink', clone)) {\n      var href = quote.getAttribute('href');\n      if (href[0] === '/') { continue; } // Cross-board quote, or board link\n      if (href[0] === '#') {\n        quote.href = `${a.pathname.split(/\\/+/).splice(0,4).join('/')}${href}`;\n      } else {\n        quote.href = `${a.pathname.split(/\\/+/).splice(0,3).join('/')}/${href}`;\n      }\n    }\n    post.nodes.shortComment = comment;\n    $.replace(comment, clone);\n    post.nodes.comment = (post.nodes.longComment = clone);\n    post.parseComment();\n    post.parseQuotes();\n\n    for (var callback of ExpandComment.callbacks) {\n      callback.call(post);\n    }\n  }\n};\nexport default ExpandComment;;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Notice from \"../classes/Notice\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport { Conf, d, doc, g } from \"../globals/globals\";\nimport Menu from \"../Menu/Menu\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport PostRedirect from \"../Posting/PostRedirect\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteYou = {\n  init() {\n    if (!Conf['Remember Your Posts']) { return; }\n\n    this.db = new DataBoard('yourPosts');\n    $.sync('Remember Your Posts', enabled => Conf['Remember Your Posts'] = enabled);\n    $.on(d, 'QRPostSuccessful', function(e) {\n      const cb = PostRedirect.delay();\n      return $.get('Remember Your Posts', Conf['Remember Your Posts'], function(items) {\n        if (!items['Remember Your Posts']) { return; }\n        const {boardID, threadID, postID} = e.detail;\n        return QuoteYou.db.set({boardID, threadID, postID, val: true}, cb);\n      });\n    });\n\n    if (!['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n\n    if (Conf['Highlight Own Posts']) {\n      $.addClass(doc, 'highlight-own');\n    }\n\n    if (Conf['Highlight Posts Quoting You']) {\n      $.addClass(doc, 'highlight-you');\n    }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    // \\u00A0 is nbsp\n    this.mark = $.el('span', {\n      textContent: '\\u00A0(You)',\n      className:   'qmark-you'\n    }\n    );\n    Callbacks.Post.push({\n      name: 'Mark Quotes of You',\n      cb:   this.node\n    });\n\n    return QuoteYou.menu.init();\n  },\n\n  isYou(post) {\n    return !!QuoteYou.db?.get({\n      boardID:  post.boardID,\n      threadID: post.threadID,\n      postID:   post.ID\n    });\n  },\n\n  node() {\n    if (this.isClone) { return; }\n\n    if (QuoteYou.isYou(this)) {\n      $.addClass(this.nodes.root, 'yourPost');\n    }\n\n    // Stop there if there's no quotes in that post.\n    if (!this.quotes.length) { return; }\n\n    for (var quotelink of this.nodes.quotelinks) {\n      if (QuoteYou.db.get(Get.postDataFromLink(quotelink))) {\n        if (Conf['Mark Quotes of You']) { $.add(quotelink, QuoteYou.mark.cloneNode(true)); }\n        $.addClass(quotelink, 'you');\n        $.addClass(this.nodes.root, 'quotesYou');\n      }\n    }\n  },\n\n  menu: {\n    init() {\n      const label = $.el('label',\n        {className: 'toggle-you'}\n      ,\n        {innerHTML: '<input type=\"checkbox\"> You'});\n      const input = $('input', label);\n      $.on(input, 'change', QuoteYou.menu.toggle);\n      return Menu.menu?.addEntry({\n        el: label,\n        order: 80,\n        open(post) {\n          QuoteYou.menu.post = (post.origin || post);\n          input.checked = QuoteYou.isYou(post);\n          return true;\n        }\n      });\n    },\n\n    toggle() {\n      const {post} = QuoteYou.menu;\n      const data = {boardID: post.board.ID, threadID: post.thread.ID, postID: post.ID, val: true};\n      if (this.checked) {\n        QuoteYou.db.set(data);\n      } else {\n        QuoteYou.db.delete(data);\n      }\n      for (var clone of [post].concat(post.clones)) {\n        clone.nodes.root.classList.toggle('yourPost', this.checked);\n      }\n      for (var quotelink of Get.allQuotelinksLinkingTo(post)) {\n        if (this.checked) {\n          if (Conf['Mark Quotes of You']) { $.add(quotelink, QuoteYou.mark.cloneNode(true)); }\n        } else {\n          $.rm($('.qmark-you', quotelink));\n        }\n        quotelink.classList.toggle('you', this.checked);\n        if ($.hasClass(quotelink, 'quotelink')) {\n          var quoter = Get.postFromNode(quotelink).nodes.root;\n          quoter.classList.toggle('quotesYou', !!$('.quotelink.you', quoter));\n        }\n      }\n    }\n  },\n\n  cb: {\n    seek(type) {\n      let highlighted, post;\n      let result;\n      const {highlight} = g.SITE.classes;\n      if (highlighted = $(`.${highlight}`)) { $.rmClass(highlighted, highlight); }\n\n      if (!QuoteYou.lastRead || !doc.contains(QuoteYou.lastRead) || !$.hasClass(QuoteYou.lastRead, 'quotesYou')) {\n        if (!(post = (QuoteYou.lastRead = $('.quotesYou')))) {\n          new Notice('warning', 'No posts are currently quoting you, loser.', 20);\n          return;\n        }\n        if (QuoteYou.cb.scroll(post)) { return; }\n      } else {\n        post = QuoteYou.lastRead;\n      }\n\n      const str = `${type}::div[contains(@class,'quotesYou')]`;\n\n      while (post = (result = $.X(str, post)).snapshotItem(type === 'preceding' ? result.snapshotLength - 1 : 0)) {\n        if (QuoteYou.cb.scroll(post)) { return; }\n      }\n\n      const posts = $$('.quotesYou');\n      return QuoteYou.cb.scroll(posts[type === 'following' ? 0 : posts.length - 1]);\n    },\n\n    scroll(root) {\n      const post = Get.postFromRoot(root);\n      if (!post.nodes.post.getBoundingClientRect().height) {\n        return false;\n      } else {\n        QuoteYou.lastRead = root;\n        location.href = Get.url('post', post);\n        Header.scrollTo(post.nodes.post);\n        if (post.isReply) {\n          const sel = `${g.SITE.selectors.postContainer}${g.SITE.selectors.highlightable.reply}`;\n          let node = post.nodes.root;\n          if (!node.matches(sel)) { node = $(sel, node); }\n          $.addClass(node, g.SITE.classes.highlight);\n        }\n        return true;\n      }\n    }\n  }\n};\nexport default QuoteYou;\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class RandomAccessList {\n  constructor(items) {\n    this.length = 0;\n    if (items) { for (var item of items) { this.push(item); } }\n  }\n\n  push(data) {\n    let item;\n    let {ID} = data;\n    if (!ID) { ID = data.id; }\n    if (this[ID]) { return; }\n    const {last} = this;\n    this[ID] = (item = {\n      prev: last,\n      next: null,\n      data,\n      ID\n    });\n    item.prev = last;\n    this.last = last ?\n      (last.next = item)\n    :\n      (this.first = item);\n    return this.length++;\n  }\n\n  before(root, item) {\n    if ((item.next === root) || (item === root)) { return; }\n\n    this.rmi(item);\n\n    const {prev} = root;\n    root.prev = item;\n    item.next = root;\n    item.prev = prev;\n    if (prev) {\n      return prev.next = item;\n    } else {\n      return this.first = item;\n    }\n  }\n\n  after(root, item) {\n    if ((item.prev === root) || (item === root)) { return; }\n\n    this.rmi(item);\n\n    const {next} = root;\n    root.next = item;\n    item.prev = root;\n    item.next = next;\n    if (next) {\n      return next.prev = item;\n    } else {\n      return this.last = item;\n    }\n  }\n\n  prepend(item) {\n    const {first} = this;\n    if ((item === first) || !this[item.ID]) { return; }\n    this.rmi(item);\n    item.next  = first;\n    if (first) {\n      first.prev = item;\n    } else {\n      this.last = item;\n    }\n    this.first = item;\n    return delete item.prev;\n  }\n\n  shift() {\n    return this.rm(this.first.ID);\n  }\n\n  order() {\n    let item;\n    const order = [(item = this.first)];\n    while ((item = item.next)) { order.push(item); }\n    return order;\n  }\n\n  rm(ID) {\n    const item = this[ID];\n    if (!item) { return; }\n    delete this[ID];\n    this.length--;\n    this.rmi(item);\n    delete item.next;\n    return delete item.prev;\n  }\n\n  rmi(item) {\n    const {prev, next} = item;\n    if (prev) {\n      prev.next = next;\n    } else {\n      this.first = next;\n    }\n    if (next) {\n      return next.prev = prev;\n    } else {\n      return this.last = prev;\n    }\n  }\n}\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport RandomAccessList from \"../classes/RandomAccessList\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { debounce, SECOND } from \"../platform/helpers\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport Favicon from \"./Favicon\";\nimport ThreadWatcher from \"./ThreadWatcher\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Unread = {\n  init() {\n    if ((g.VIEW !== 'thread') || (\n      !Conf['Unread Count'] &&\n      !Conf['Unread Favicon'] &&\n      !Conf['Unread Line'] &&\n      !Conf['Remember Last Read Post'] &&\n      !Conf['Desktop Notifications'] &&\n      !Conf['Quote Threading']\n    )) { return; }\n\n    if (Conf['Remember Last Read Post']) {\n      $.sync('Remember Last Read Post', enabled => Conf['Remember Last Read Post'] = enabled);\n      this.db = new DataBoard('lastReadPosts', this.sync);\n    }\n\n    this.hr = $.el('hr', {\n      id: 'unread-line',\n      className: 'unread-line'\n    }\n    );\n    this.posts = new Set();\n    this.postsQuotingYou = new Set();\n    this.order = new RandomAccessList();\n    this.position = null;\n\n    Callbacks.Thread.push({\n      name: 'Unread',\n      cb:   this.node\n    });\n\n    return Callbacks.Post.push({\n      name: 'Unread',\n      cb:   this.addPost\n    });\n  },\n\n  node() {\n    Unread.thread = this;\n    Unread.title  = d.title;\n    Unread.lastReadPost = Unread.db?.get({\n      boardID: this.board.ID,\n      threadID: this.ID\n    }) || 0;\n    Unread.readCount = 0;\n    for (var ID of this.posts.keys) { if (+ID <= Unread.lastReadPost) { Unread.readCount++; } }\n    $.one(d, '4chanXInitFinished', Unread.ready);\n    $.on(d, 'PostsInserted',      Unread.onUpdate);\n    $.on(d, 'ThreadUpdate',       function(e) { if (e.detail[404]) { return Unread.update(); } });\n    const resetLink = $.el('a', {\n      href: 'javascript:;',\n      className: 'unread-reset',\n      textContent: 'Mark all unread'\n    }\n    );\n    $.on(resetLink, 'click', Unread.reset);\n    return Header.menu.addEntry({\n      el: resetLink,\n      order: 70\n    });\n  },\n\n  ready() {\n    if (Conf['Remember Last Read Post'] && Conf['Scroll to Last Read Post']) { Unread.scroll(); }\n    Unread.setLine(true);\n    Unread.read();\n    Unread.update();\n    $.on(d, 'scroll visibilitychange', Unread.read);\n    if (Conf['Unread Line']) { return $.on(d, 'visibilitychange',        Unread.setLine); }\n  },\n\n  positionPrev() {\n    if (Unread.position) { return Unread.position.prev; } else { return Unread.order.last; }\n  },\n\n  scroll() {\n    // Let the header's onload callback handle it.\n    let hash;\n    if ((hash = location.hash.match(/\\d+/)) && hash[0] in Unread.thread.posts) { return; }\n\n    let position = Unread.positionPrev();\n    while (position) {\n      var {bottom} = position.data.nodes;\n      if (!bottom.getBoundingClientRect().height) {\n        // Don't try to scroll to posts with display: none\n        position = position.prev;\n      } else {\n        Header.scrollToIfNeeded(bottom, true);\n        break;\n      }\n    }\n  },\n\n  reset() {\n    if (Unread.lastReadPost == null) { return; }\n\n    Unread.posts = new Set();\n    Unread.postsQuotingYou = new Set();\n    Unread.order = new RandomAccessList();\n    Unread.position = null;\n    Unread.lastReadPost = 0;\n    Unread.readCount = 0;\n    Unread.thread.posts.forEach(post => Unread.addPost.call(post));\n\n    $.forceSync('Remember Last Read Post');\n    if (Conf['Remember Last Read Post'] && (!Unread.thread.isDead || Unread.thread.isArchived)) {\n      Unread.db.set({\n        boardID:  Unread.thread.board.ID,\n        threadID: Unread.thread.ID,\n        val:      0\n      });\n    }\n\n    Unread.updatePosition();\n    Unread.setLine();\n    return Unread.update();\n  },\n\n  sync() {\n    if (Unread.lastReadPost == null) { return; }\n    const lastReadPost = Unread.db.get({\n      boardID: Unread.thread.board.ID,\n      threadID: Unread.thread.ID,\n      defaultValue: 0\n    });\n    if (Unread.lastReadPost >= lastReadPost) { return; }\n    Unread.lastReadPost = lastReadPost;\n\n    const postIDs = Unread.thread.posts.keys;\n    for (let i = Unread.readCount, end = postIDs.length; i < end; i++) {\n      var ID = +postIDs[i];\n      if (!Unread.thread.posts.get(ID).isFetchedQuote) {\n        if (ID > Unread.lastReadPost) { break; }\n        Unread.posts.delete(ID);\n        Unread.postsQuotingYou.delete(ID);\n      }\n      Unread.readCount++;\n    }\n\n    Unread.updatePosition();\n    Unread.setLine();\n    return Unread.update();\n  },\n\n  addPost() {\n    if (this.isFetchedQuote || this.isClone) return;\n    Unread.order.push(this);\n    if ((this.ID <= Unread.lastReadPost) || this.isHidden || QuoteYou.isYou(this)) return;\n    Unread.posts.add((Unread.posts.last = this.ID));\n    Unread.addPostQuotingYou(this);\n    return Unread.position != null ? Unread.position : (Unread.position = Unread.order[this.ID]);\n  },\n\n  addPostQuotingYou(post) {\n    for (var quotelink of post.nodes.quotelinks) {\n      if (QuoteYou.db?.get(Get.postDataFromLink(quotelink))) {\n        Unread.postsQuotingYou.add((Unread.postsQuotingYou.last = post.ID));\n        Unread.openNotification(post);\n        return;\n      }\n    }\n  },\n\n  openNotification(post, predicate=' replied to you') {\n    if (!Header.areNotificationsEnabled) { return; }\n    const notif = new Notification(`${post.info.nameBlock}${predicate}`, {\n      body: post.commentDisplay(),\n      icon: Favicon.logo\n    }\n    );\n    notif.onclick = function() {\n      Header.scrollToIfNeeded(post.nodes.bottom, true);\n      return window.focus();\n    };\n    return notif.onshow = () => setTimeout(() => notif.close()\n    , 7 * SECOND);\n  },\n\n  onUpdate() {\n    return $.queueTask(function() { // ThreadUpdater may scroll immediately after inserting posts\n      Unread.setLine();\n      Unread.read();\n      return Unread.update();\n    });\n  },\n\n  readSinglePost(post) {\n    const {ID} = post;\n    if (!Unread.posts.has(ID)) { return; }\n    Unread.posts.delete(ID);\n    Unread.postsQuotingYou.delete(ID);\n    Unread.updatePosition();\n    Unread.saveLastReadPost();\n    return Unread.update();\n  },\n\n  read: debounce(100, function(e) {\n    // Update the lastReadPost when hidden posts are added to the thread.\n    if (!Unread.posts.size && (Unread.readCount !== Unread.thread.posts.keys.length)) {\n      Unread.saveLastReadPost();\n    }\n\n    if (d.hidden || !Unread.posts.size) { return; }\n\n    let count = 0;\n    while (Unread.position) {\n      var {ID, data} = Unread.position;\n      var {bottom} = data.nodes;\n      if (!!bottom.getBoundingClientRect().height && // post has been hidden\n        (Header.getBottomOf(bottom) <= -1)) { break; }                      // post is completely read\n      count++;\n      Unread.posts.delete(ID);\n      Unread.postsQuotingYou.delete(ID);\n      Unread.position = Unread.position.next;\n    }\n\n    if (!count) { return; }\n    Unread.updatePosition();\n    Unread.saveLastReadPost();\n    if (e) { return Unread.update(); }\n  }),\n\n  updatePosition() {\n    while (Unread.position && !Unread.posts.has(Unread.position.ID)) {\n      Unread.position = Unread.position.next;\n    }\n  },\n\n  saveLastReadPost: debounce(2 * SECOND, function() {\n    let ID;\n    $.forceSync('Remember Last Read Post');\n    if (!Conf['Remember Last Read Post'] || !Unread.db) { return; }\n    const postIDs = Unread.thread.posts.keys;\n    for (let i = Unread.readCount, end = postIDs.length; i < end; i++) {\n      ID = +postIDs[i];\n      if (!Unread.thread.posts.get(ID).isFetchedQuote) {\n        if (Unread.posts.has(ID)) { break; }\n        Unread.lastReadPost = ID;\n      }\n      Unread.readCount++;\n    }\n    if (Unread.thread.isDead && !Unread.thread.isArchived) { return; }\n    return Unread.db.set({\n      boardID:  Unread.thread.board.ID,\n      threadID: Unread.thread.ID,\n      val:      Unread.lastReadPost\n    });\n  }),\n\n  setLine(force) {\n    if (!Conf['Unread Line']) { return; }\n    if (Unread.hr.hidden || d.hidden || (force === true)) {\n      const oldPosition = Unread.linePosition;\n      if (Unread.linePosition = Unread.positionPrev()) {\n        if (Unread.linePosition !== oldPosition) {\n          let node = Unread.linePosition.data.nodes.bottom;\n          if (node.nextSibling?.tagName === 'BR') { node = node.nextSibling; }\n          $.after(node, Unread.hr);\n        }\n      } else {\n        $.rm(Unread.hr);\n      }\n    }\n    return Unread.hr.hidden = Unread.linePosition === Unread.order.last;\n  },\n\n  update() {\n    const count = Unread.posts.size;\n    const countQuotingYou = Unread.postsQuotingYou.size;\n\n    if (Conf['Unread Count']) {\n      const titleQuotingYou = Conf['Quoted Title'] && countQuotingYou ? '(!) ' : '';\n      const titleCount = count || !Conf['Hide Unread Count at (0)'] ? `(${count}) ` : '';\n      const titleDead = Unread.thread.isDead ?\n        Unread.title.replace('-', (Unread.thread.isArchived ? '- Archived -' : '- 404 -'))\n      :\n        Unread.title;\n      d.title = `${titleQuotingYou}${titleCount}${titleDead}`;\n    }\n\n    Unread.saveThreadWatcherCount();\n\n    if (Conf['Unread Favicon'] && (g.SITE.software === 'yotsuba')) {\n      const {isDead} = Unread.thread;\n      return Favicon.set((\n        countQuotingYou ?\n          (isDead ? 'unreadDeadY' : 'unreadY')\n        : count ?\n          (isDead ? 'unreadDead' : 'unread')\n        :\n          (isDead ? 'dead' : 'default')\n      )\n      );\n    }\n  },\n\n  saveThreadWatcherCount: debounce(2 * SECOND, function() {\n    $.forceSync('Remember Last Read Post');\n    if (Conf['Remember Last Read Post'] && (!Unread.thread.isDead || Unread.thread.isArchived)) {\n      let posts;\n      const quotingYou = !Conf['Require OP Quote Link'] && QuoteYou.isYou(Unread.thread.OP) ? Unread.posts : Unread.postsQuotingYou;\n      if (!quotingYou.size) {\n        quotingYou.last = 0;\n      } else if (!quotingYou.has(quotingYou.last)) {\n        quotingYou.last = 0;\n        posts = Unread.thread.posts.keys;\n        for (let i = posts.length - 1; i >= 0; i--) {\n          if (quotingYou.has(+posts[i])) {\n            quotingYou.last = posts[i];\n            break;\n          }\n        }\n      }\n      return ThreadWatcher.update(g.SITE.ID, Unread.thread.board.ID, Unread.thread.ID, {\n        last: Unread.thread.lastPost,\n        isDead: Unread.thread.isDead,\n        isArchived: Unread.thread.isArchived,\n        unread: Unread.posts.size,\n        quotingYou: (quotingYou.last || 0)\n      }\n      );\n    }\n  })\n};\nexport default Unread;\n","import Callbacks from \"../classes/Callbacks\";\nimport Post from \"../classes/Post\";\nimport Get from \"../General/Get\";\nimport Index from \"../General/Index\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ExpandThread = {\n  statuses: dict(),\n  init() {\n    if (!((g.VIEW === 'index') && Conf['Thread Expansion'])) { return; }\n    if (Conf['JSON Index']) {\n      return $.on(d, 'IndexRefreshInternal', this.onIndexRefresh);\n    } else {\n      return Callbacks.Thread.push({\n        name: 'Expand Thread',\n        cb() { return ExpandThread.setButton(this); }\n      });\n    }\n  },\n\n  setButton(thread) {\n    let a;\n    if (!(thread.nodes.root && (a = $('.summary', thread.nodes.root)))) { return; }\n    a.textContent = g.SITE.Build.summaryText('+', ...a.textContent.match(/\\d+/g));\n    a.style.cursor = 'pointer';\n    return $.on(a, 'click', ExpandThread.cbToggle);\n  },\n  \n  disconnect(refresh) {\n    if ((g.VIEW === 'thread') || !Conf['Thread Expansion']) { return; }\n    for (var threadID in ExpandThread.statuses) {\n      var oldReq;\n      var status = ExpandThread.statuses[threadID];\n      if (oldReq = status.req) {\n        delete status.req;\n        oldReq.abort();\n      }\n      delete ExpandThread.statuses[threadID];\n    }\n\n    if (!refresh) { return $.off(d, 'IndexRefreshInternal', this.onIndexRefresh); }\n  },\n\n  onIndexRefresh() {\n    ExpandThread.disconnect(true);\n    return g.BOARD.threads.forEach(thread => ExpandThread.setButton(thread));\n  },\n\n  cbToggle(e) {\n    if ($.modifiedClick(e)) { return; }\n    e.preventDefault();\n    return ExpandThread.toggle(Get.threadFromNode(this));\n  },\n\n  cbToggleBottom(e) {\n    if ($.modifiedClick(e)) { return; }\n    e.preventDefault();\n    const thread = Get.threadFromNode(this);\n    $.rm(this); // remove before fixing bottom of thread position\n    const {bottom} = thread.nodes.root.getBoundingClientRect();\n    ExpandThread.toggle(thread);\n    return window.scrollBy(0, (thread.nodes.root.getBoundingClientRect().bottom - bottom));\n  },\n\n  toggle(thread) {\n    let a;\n    if (!(thread.nodes.root && (a = $('.summary', thread.nodes.root)))) { return; }\n    if (thread.ID in ExpandThread.statuses) {\n      return ExpandThread.contract(thread, a, thread.nodes.root);\n    } else {\n      return ExpandThread.expand(thread, a);\n    }\n  },\n\n  expand(thread, a) {\n    let status;\n    ExpandThread.statuses[thread] = (status = {});\n    a.textContent = g.SITE.Build.summaryText('...', ...a.textContent.match(/\\d+/g));\n    status.req = $.cache(g.SITE.urls.threadJSON({boardID: thread.board.ID, threadID: thread.ID}), function() {\n      if (this !== status.req) { return; } // aborted\n      delete status.req;\n      return ExpandThread.parse(this, thread, a);\n    });\n    return status.numReplies = $$(g.SITE.selectors.replyOriginal, thread.nodes.root).length;\n  },\n\n  contract(thread, a, threadRoot) {\n    let oldReq;\n    const status = ExpandThread.statuses[thread];\n    delete ExpandThread.statuses[thread];\n    if (oldReq = status.req) {\n      delete status.req;\n      oldReq.abort();\n      if (a) { a.textContent = g.SITE.Build.summaryText('+', ...a.textContent.match(/\\d+/g)); }\n      return;\n    }\n\n    let replies = $$('.thread > .replyContainer', threadRoot);\n    if (status.numReplies) { replies = replies.slice(0, (-status.numReplies)); }\n    let postsCount = 0;\n    let filesCount = 0;\n    for (var reply of replies) {\n      // rm clones\n      if (Conf['Quote Inlining']) { var inlined;\n      while ((inlined = $('.inlined', reply))) { inlined.click(); } }\n      postsCount++;\n      if ('file' in Get.postFromRoot(reply)) { filesCount++; }\n      $.rm(reply);\n    }\n    if (Index.enabled) { // otherwise handled by Main.addPosts\n      $.event('PostsRemoved', null, a.parentNode);\n    }\n    a.textContent = g.SITE.Build.summaryText('+', postsCount, filesCount);\n    return $.rm($('.summary-bottom', threadRoot));\n  },\n\n  parse(req, thread, a) {\n    let root;\n    if (![200, 304].includes(req.status)) {\n      a.textContent = req.status ? `Error ${req.statusText} (${req.status})` : 'Connection Error';\n      return;\n    }\n\n    g.SITE.Build.spoilerRange[thread.board] = req.response.posts[0].custom_spoiler;\n\n    const posts      = [];\n    const postsRoot  = [];\n    let filesCount = 0;\n    for (var postData of req.response.posts) {\n      var post;\n      if (postData.no === thread.ID) { continue; }\n      if ((post = thread.posts.get(postData.no)) && !post.isFetchedQuote) {\n        if ('file' in post) { filesCount++; }\n        ({root} = post.nodes);\n        postsRoot.push(root);\n        continue;\n      }\n      root = g.SITE.Build.postFromObject(postData, thread.board.ID);\n      post = new Post(root, thread, thread.board);\n      if ('file' in post) { filesCount++; }\n      posts.push(post);\n      postsRoot.push(root);\n    }\n    Main.callbackNodes('Post', posts);\n    $.after(a, postsRoot);\n    $.event('PostsInserted', null, a.parentNode);\n\n    const postsCount    = postsRoot.length;\n    a.textContent = g.SITE.Build.summaryText('-', postsCount, filesCount);\n\n    if (root) {\n      const a2 = a.cloneNode(true);\n      a2.classList.add('summary-bottom');\n      $.on(a2, 'click', ExpandThread.cbToggleBottom);\n      return $.after(root, a2);\n    }\n  }\n};\nexport default ExpandThread;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport Index from \"../General/Index\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport ExpandThread from \"../Miscellaneous/ExpandThread\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport ThreadWatcher from \"./ThreadWatcher\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar UnreadIndex = {\n  lastReadPost: dict(),\n  hr:           dict(),\n  markReadLink: dict(),\n\n  init() {\n    if ((g.VIEW !== 'index') || !Conf['Remember Last Read Post'] || !Conf['Unread Line in Index']) { return; }\n\n    this.enabled = true;\n    this.db = new DataBoard('lastReadPosts', this.sync);\n\n    Callbacks.Thread.push({\n      name: 'Unread Line in Index',\n      cb:   this.node\n    });\n\n    $.on(d, 'IndexRefreshInternal', this.onIndexRefresh);\n    return $.on(d, 'PostsInserted PostsRemoved', this.onPostsInserted);\n  },\n\n  node() {\n    UnreadIndex.lastReadPost[this.fullID] = UnreadIndex.db.get({\n      boardID: this.board.ID,\n      threadID: this.ID\n    }) || 0;\n    if (!Index.enabled) { // let onIndexRefresh handle JSON Index\n      return UnreadIndex.update(this);\n    }\n  },\n\n  onIndexRefresh(e) {\n    if (e.detail.isCatalog) { return; }\n    return (() => {\n      const result = [];\n      for (var threadID of e.detail.threadIDs) {\n        var thread = g.threads.get(threadID);\n        result.push(UnreadIndex.update(thread));\n      }\n      return result;\n    })();\n  },\n\n  onPostsInserted(e) {\n    if (e.target === Index.root) { return; } // onIndexRefresh handles this case\n    const thread = Get.threadFromNode(e.target);\n    if (!thread || (thread.nodes.root !== e.target)) { return; }\n    const wasVisible = !!UnreadIndex.hr[thread.fullID]?.parentNode;\n    UnreadIndex.update(thread);\n    if (Conf['Scroll to Last Read Post'] && (e.type === 'PostsInserted') && !wasVisible && !!UnreadIndex.hr[thread.fullID]?.parentNode) {\n      return Header.scrollToIfNeeded(UnreadIndex.hr[thread.fullID], true);\n    }\n  },\n\n  sync() {\n    return g.threads.forEach(function(thread) {\n      const lastReadPost = UnreadIndex.db.get({\n        boardID: thread.board.ID,\n        threadID: thread.ID\n      }) || 0;\n      if (lastReadPost !== UnreadIndex.lastReadPost[thread.fullID]) {\n        UnreadIndex.lastReadPost[thread.fullID] = lastReadPost;\n        if (thread.nodes.root?.parentNode) {\n          return UnreadIndex.update(thread);\n        }\n      }\n    });\n  },\n\n  update(thread) {\n    let divider;\n    const lastReadPost = UnreadIndex.lastReadPost[thread.fullID];\n    let repliesShown = 0;\n    let repliesRead = 0;\n    let firstUnread = null;\n    thread.posts.forEach(function(post) {\n      if (post.isReply && thread.nodes.root.contains(post.nodes.root)) {\n        repliesShown++;\n        if (post.ID <= lastReadPost) {\n          return repliesRead++;\n        } else if ((!firstUnread || (post.ID < firstUnread.ID)) && !post.isHidden && !QuoteYou.isYou(post)) {\n          return firstUnread = post;\n        }\n      }\n    });\n\n    let hr = UnreadIndex.hr[thread.fullID];\n    if (firstUnread && (repliesRead || ((lastReadPost === thread.OP.ID) && (!$(g.SITE.selectors.summary, thread.nodes.root) || thread.ID in ExpandThread.statuses)))) {\n      if (!hr) {\n        hr = (UnreadIndex.hr[thread.fullID] = $.el('hr',\n          {className: 'unread-line'}));\n      }\n      $.before(firstUnread.nodes.root, hr);\n    } else {\n      $.rm(hr);\n    }\n\n    const hasUnread = repliesShown ?\n      firstUnread || !repliesRead\n    : Index.enabled ?\n      thread.lastPost > lastReadPost\n    :\n      thread.OP.ID > lastReadPost;\n    thread.nodes.root.classList.toggle('unread-thread', hasUnread);\n\n    let link = UnreadIndex.markReadLink[thread.fullID];\n    if (!link) {\n      link = (UnreadIndex.markReadLink[thread.fullID] = $.el('a', {\n        className: 'unread-mark-read brackets-wrap',\n        href: 'javascript:;',\n        textContent: 'Mark Read'\n      }\n      ));\n      $.on(link, 'click', UnreadIndex.markRead);\n    }\n    if (divider = $(g.SITE.selectors.threadDivider, thread.nodes.root)) { // divider inside thread as in Tinyboard\n      return $.before(divider, link);\n    } else {\n      return $.add(thread.nodes.root, link);\n    }\n  },\n\n  markRead() {\n    const thread = Get.threadFromNode(this);\n    UnreadIndex.lastReadPost[thread.fullID] = thread.lastPost;\n    UnreadIndex.db.set({\n      boardID:  thread.board.ID,\n      threadID: thread.ID,\n      val:      thread.lastPost\n    });\n    $.rm(UnreadIndex.hr[thread.fullID]);\n    thread.nodes.root.classList.remove('unread-thread');\n    return ThreadWatcher.update(g.SITE.ID, thread.board.ID, thread.ID, {\n      last: thread.lastPost,\n      unread: 0,\n      quotingYou: 0\n    }\n    );\n  }\n};\nexport default UnreadIndex;\n","import ThreadWatcherPage from './ThreadWatcher/ThreadWatcher.html';\nimport $ from \"../platform/$\";\nimport Board from '../classes/Board';\nimport Callbacks from '../classes/Callbacks';\nimport DataBoard from '../classes/DataBoard';\nimport Thread from '../classes/Thread';\nimport Filter from '../Filtering/Filter';\nimport Main from '../main/Main';\nimport $$ from '../platform/$$';\nimport Config from '../config/Config';\nimport CrossOrigin from '../platform/CrossOrigin';\nimport PostRedirect from '../Posting/PostRedirect';\nimport QuoteYou from '../Quotelinks/QuoteYou';\nimport Unread from './Unread';\nimport UnreadIndex from './UnreadIndex';\nimport Header from '../General/Header';\nimport Index from '../General/Index';\nimport { Conf, d, doc, g } from '../globals/globals';\nimport Menu from '../Menu/Menu';\nimport UI from '../General/UI';\nimport Get from '../General/Get';\nimport { dict, HOUR, MINUTE } from '../platform/helpers';\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar ThreadWatcher = {\n  init() {\n    let sc;\n    if (!(this.enabled = Conf['Thread Watcher'])) { return; }\n\n    this.shortcut = (sc = $.el('a', {\n      id:          'watcher-link',\n      textContent: '',\n      title:       'Thread Watcher',\n      href:        'javascript:;',\n    }\n    ));\n\n    this.db     = new DataBoard('watchedThreads', this.refresh, true);\n    this.dbLM   = new DataBoard('watcherLastModified', null, true);\n    this.dialog = UI.dialog('thread-watcher', { innerHTML: ThreadWatcherPage });\n    this.status = $('#watcher-status', this.dialog);\n    this.list   = this.dialog.lastElementChild;\n    this.refreshButton = $('.refresh', this.dialog);\n    this.closeButton = $('.move > .close', this.dialog);\n    this.unreaddb = Unread.db || UnreadIndex.db || new DataBoard('lastReadPosts');\n    this.unreadEnabled = Conf['Remember Last Read Post'];\n\n    $.on(d, 'QRPostSuccessful',   this.cb.post);\n    $.on(sc, 'click', this.toggleWatcher);\n    $.on(this.refreshButton, 'click', this.buttonFetchAll);\n    $.on(this.closeButton, 'click', this.toggleWatcher);\n\n    this.menu.addHeaderMenuEntry();\n    $.onExists(doc, 'body', this.addDialog);\n\n    switch (g.VIEW) {\n      case 'index':\n        $.on(d, 'IndexUpdate', this.cb.onIndexUpdate);\n        break;\n      case 'thread':\n        $.on(d, 'ThreadUpdate', this.cb.onThreadRefresh);\n        break;\n    }\n\n    if (Conf['Fixed Thread Watcher']) {\n      $.addClass(doc, 'fixed-watcher');\n    }\n    if (!Conf['Persistent Thread Watcher']) {\n      $.addClass(ThreadWatcher.shortcut, 'disabled');\n      this.dialog.hidden = true;\n    }\n\n    Header.addShortcut('watcher', sc, 510);\n\n    ThreadWatcher.initLastModified();\n    ThreadWatcher.fetchAuto();\n    $.on(window, 'visibilitychange focus', () => $.queueTask(ThreadWatcher.fetchAuto));\n\n    if (Conf['Menu'] && Index.enabled) {\n      Menu.menu.addEntry({\n        el: $.el('a', {\n          href:      'javascript:;',\n          className: 'has-shortcut-text'\n        }\n        , {innerHTML: '<span></span><span class=\"shortcut-text\">Alt+click</span>'}),\n        order: 6,\n        open({thread}) {\n          if (Conf['Index Mode'] !== 'catalog') { return false; }\n          this.el.firstElementChild.textContent = ThreadWatcher.isWatched(thread) ?\n            'Unwatch'\n          :\n            'Watch';\n          if (this.cb) { $.off(this.el, 'click', this.cb); }\n          this.cb = function() {\n            $.event('CloseMenu');\n            return ThreadWatcher.toggle(thread);\n          };\n          $.on(this.el, 'click', this.cb);\n          return true;\n        }\n      });\n    }\n\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n\n    Callbacks.Post.push({\n      name: 'Thread Watcher',\n      cb:   this.node\n    });\n    return Callbacks.CatalogThread.push({\n      name: 'Thread Watcher',\n      cb:   this.catalogNode\n    });\n  },\n\n  isWatched(thread) {\n    return !!ThreadWatcher.db?.get({boardID: thread.board.ID, threadID: thread.ID});\n  },\n\n  isWatchedRaw(boardID, threadID) {\n    return !!ThreadWatcher.db?.get({boardID, threadID});\n  },\n\n  setToggler(toggler, isWatched) {\n    toggler.classList.toggle('watched', isWatched);\n    return toggler.title = `${isWatched ? 'Unwatch' : 'Watch'} Thread`;\n  },\n\n  node() {\n    let toggler;\n    if (this.isReply) { return; }\n    if (this.isClone) {\n      toggler = $('.watch-thread-link', this.nodes.info);\n    } else {\n      toggler = $.el('a', {\n        href: 'javascript:;',\n        className: 'watch-thread-link'\n      }\n      );\n      $.before($('input', this.nodes.info), toggler);\n    }\n    const siteID = g.SITE.ID;\n    const boardID = this.board.ID;\n    const threadID = this.thread.ID;\n    const data = ThreadWatcher.db.get({siteID, boardID, threadID});\n    ThreadWatcher.setToggler(toggler, !!data);\n    $.on(toggler, 'click', ThreadWatcher.cb.toggle);\n    // Add missing excerpt for threads added by Auto Watch\n    if (data && (data.excerpt == null)) {\n      return $.queueTask(() => {\n        return ThreadWatcher.update(siteID, boardID, threadID, {excerpt: Get.threadExcerpt(this.thread)});\n    });\n    }\n  },\n\n  catalogNode() {\n    if (ThreadWatcher.isWatched(this.thread)) { $.addClass(this.nodes.root, 'watched'); }\n    return $.on(this.nodes.root, 'mousedown click', e => {\n      if ((e.button !== 0) || !e.altKey) { return; }\n      if (e.type === 'click') { ThreadWatcher.toggle(this.thread); }\n      return e.preventDefault();\n    });\n  }, // Also on mousedown to prevent highlighting thumbnail in Firefox.\n\n  addDialog() {\n    if (!Main.isThisPageLegit()) { return; }\n    ThreadWatcher.build();\n    return $.prepend(d.body, ThreadWatcher.dialog);\n  },\n\n  toggleWatcher() {\n    $.toggleClass(ThreadWatcher.shortcut, 'disabled');\n    return ThreadWatcher.dialog.hidden = !ThreadWatcher.dialog.hidden;\n  },\n\n  cb: {\n    openAll() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var a of $$('a.watcher-link', ThreadWatcher.list)) {\n        $.open(a.href);\n      }\n      return $.event('CloseMenu');\n    },\n    openUnread() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var a of $$('.replies-unread > a.watcher-link', ThreadWatcher.list)) {\n        $.open(a.href);\n      }\n      return $.event('CloseMenu');\n    },\n    openDeads() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var a of $$('.dead-thread > a.watcher-link', ThreadWatcher.list)) {\n        $.open(a.href);\n      }\n      return $.event('CloseMenu');\n    },\n    pruneDeads() {\n      if ($.hasClass(this, 'disabled')) { return; }\n      for (var {siteID, boardID, threadID, data} of ThreadWatcher.getAll()) {\n        if (data.isDead) {\n          ThreadWatcher.db.delete({siteID, boardID, threadID});\n        }\n      }\n      ThreadWatcher.refresh();\n      return $.event('CloseMenu');\n    },\n    dismiss() {\n      for (var {siteID, boardID, threadID, data} of ThreadWatcher.getAll()) {\n        if (data.quotingYou) {\n          ThreadWatcher.update(siteID, boardID, threadID, {dismiss: data.quotingYou || 0});\n        }\n      }\n      return $.event('CloseMenu');\n    },\n    toggle() {\n      const {thread} = Get.postFromNode(this);\n      return ThreadWatcher.toggle(thread);\n    },\n    rm() {\n      const {siteID} = this.parentNode.dataset;\n      const [boardID, threadID] = this.parentNode.dataset.fullID.split('.');\n      return ThreadWatcher.rm(siteID, boardID, +threadID);\n    },\n    post(e) {\n      const {boardID, threadID, postID} = e.detail;\n      const cb = PostRedirect.delay();\n      if (postID === threadID) {\n        if (Conf['Auto Watch']) {\n          return ThreadWatcher.addRaw(boardID, threadID, {}, cb);\n        }\n      } else if (Conf['Auto Watch Reply']) {\n        return ThreadWatcher.add((g.threads.get(boardID + '.' + threadID) || new Thread(threadID, g.boards[boardID] || new Board(boardID))), cb);\n      }\n    },\n    onIndexUpdate(e) {\n      const {db}    = ThreadWatcher;\n      const siteID  = g.SITE.ID;\n      const boardID = g.BOARD.ID;\n      let nKilled = 0;\n      for (var threadID in db.data[siteID].boards[boardID]) {\n        // Don't prune threads that have yet to appear in index.\n        var data = db.data[siteID].boards[boardID][threadID];\n        if (!data?.isDead && !e.detail.threads.includes(`${boardID}.${threadID}`)) {\n          if (!e.detail.threads.some(fullID => +fullID.split('.')[1] > threadID)) { continue; }\n          if (Conf['Auto Prune'] || !(data && (typeof data === 'object'))) { // corrupt data\n            db.delete({boardID, threadID});\n            nKilled++;\n          } else {\n            ThreadWatcher.fetchStatus({siteID, boardID, threadID, data});\n          }\n        }\n      }\n      if (nKilled) { return ThreadWatcher.refresh(); }\n    },\n    onThreadRefresh(e) {\n      const thread = g.threads.get(e.detail.threadID);\n      if (!e.detail[404] || !ThreadWatcher.isWatched(thread)) { return; }\n      // Update dead status.\n      return ThreadWatcher.add(thread);\n    }\n  },\n\n  requests: [],\n  fetched:  0,\n\n  fetch(url, {siteID, force}, args, cb) {\n    if (ThreadWatcher.requests.length === 0) {\n      ThreadWatcher.status.textContent = '...';\n      $.addClass(ThreadWatcher.refreshButton, 'spin');\n    }\n    const onloadend = function() {\n      if (this.finished) { return; }\n      this.finished = true;\n      ThreadWatcher.fetched++;\n      if (ThreadWatcher.fetched === ThreadWatcher.requests.length) {\n        ThreadWatcher.clearRequests();\n      } else {\n        ThreadWatcher.status.textContent = `${Math.round((ThreadWatcher.fetched / ThreadWatcher.requests.length) * 100)}%`;\n      }\n      return cb.apply(this, args);\n    };\n    const ajax = siteID === g.SITE.ID ? $.ajax : CrossOrigin.ajax;\n    if (force) {\n      delete $.lastModified.ThreadWatcher?.[url];\n    }\n    const req = $.whenModified(\n      url,\n      'ThreadWatcher',\n      onloadend,\n      { timeout: MINUTE, ajax }\n    );\n    return ThreadWatcher.requests.push(req);\n  },\n\n  clearRequests() {\n    ThreadWatcher.requests = [];\n    ThreadWatcher.fetched = 0;\n    ThreadWatcher.status.textContent = '';\n    return $.rmClass(ThreadWatcher.refreshButton, 'spin');\n  },\n\n  abort() {\n    delete ThreadWatcher.syncing;\n    for (var req of ThreadWatcher.requests) {\n      if (!req.finished) {\n        req.finished = true;\n        req.abort();\n      }\n    }\n    return ThreadWatcher.clearRequests();\n  },\n\n  initLastModified() {\n    const lm = ($.lastModified['ThreadWatcher'] || ($.lastModified['ThreadWatcher'] = dict()));\n    for (var siteID in ThreadWatcher.dbLM.data) {\n      var boards = ThreadWatcher.dbLM.data[siteID];\n      for (var boardID in boards.boards) {\n        var data = boards.boards[boardID];\n        if (ThreadWatcher.db.get({siteID, boardID})) {\n          for (var url in data) {\n            var date = data[url];\n            lm[url] = date;\n          }\n        } else {\n          ThreadWatcher.dbLM.delete({siteID, boardID});\n        }\n      }\n    }\n  },\n\n  fetchAuto() {\n    let middle;\n    clearTimeout(ThreadWatcher.timeout);\n    if (!Conf['Auto Update Thread Watcher']) { return; }\n    const {db} = ThreadWatcher;\n    const interval = Conf['Show Page'] || (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) ? 5 * MINUTE : 2 * HOUR;\n    const now = Date.now();\n    if ((now - interval >= ((middle = db.data.lastChecked || 0)) || middle > now) && !d.hidden && !!d.hasFocus()) {\n      ThreadWatcher.fetchAllStatus(interval);\n    }\n    return ThreadWatcher.timeout = setTimeout(ThreadWatcher.fetchAuto, interval);\n  },\n\n  buttonFetchAll() {\n    if (ThreadWatcher.syncing || ThreadWatcher.requests.length) {\n      return ThreadWatcher.abort();\n    } else {\n      return ThreadWatcher.fetchAllStatus();\n    }\n  },\n\n  fetchAllStatus(interval=0) {\n    ThreadWatcher.status.textContent = '...';\n    $.addClass(ThreadWatcher.refreshButton, 'spin');\n    ThreadWatcher.syncing = true;\n    const dbs = [ThreadWatcher.db, ThreadWatcher.unreaddb, QuoteYou.db].filter(x => x);\n    let n = 0;\n    return dbs.map((dbi) =>\n      dbi.forceSync(function() {\n        if ((++n) === dbs.length) {\n          let middle;\n          if (!ThreadWatcher.syncing) { return; } // aborted\n          delete ThreadWatcher.syncing;\n          if (0 > (middle = Date.now() - (ThreadWatcher.db.data.lastChecked || 0)) || middle >= interval) { // not checked in another tab\n            // XXX On vichan boards, last_modified field of threads.json does not account for sage posts.\n            // Occasionally check replies field of catalog.json to find these posts.\n            let middle1;\n            const {db} = ThreadWatcher;\n            const now = Date.now();\n            const deep = !(now - (2 * HOUR) < ((middle1 = db.data.lastChecked2 || 0)) && middle1 <= now);\n            const boards = ThreadWatcher.getAll(true);\n            for (var board of boards) {\n              ThreadWatcher.fetchBoard(board, deep);\n            }\n            db.setLastChecked();\n            if (deep) { db.setLastChecked('lastChecked2'); }\n          }\n          if (ThreadWatcher.fetched === ThreadWatcher.requests.length) {\n            return ThreadWatcher.clearRequests();\n          }\n        }\n      }));\n  },\n\n  fetchBoard(board, deep) {\n    if (!board.some(thread => !thread.data.isDead)) { return; }\n    let force = false;\n    for (var thread of board) {\n      var {data} = thread;\n      if (!data.isDead && (data.last !== -1)) {\n        if (Conf['Show Page'] && (data.page == null)) { force = true; }\n        if ((data.modified == null)) { force = (thread.force = true); }\n      }\n    }\n    const {siteID, boardID} = board[0];\n    const site = g.sites[siteID];\n    if (!site) { return; }\n    const urlF = deep && site.threadModTimeIgnoresSage ? 'catalogJSON' : 'threadsListJSON';\n    const url = site.urls[urlF]?.({siteID, boardID});\n    if (!url) { return; }\n    return ThreadWatcher.fetch(url, {siteID, force}, [board, url], ThreadWatcher.parseBoard);\n  },\n\n  parseBoard(board, url) {\n    let page, thread;\n    if (this.status !== 200) { return; }\n    const {siteID, boardID} = board[0];\n    const lmDate = this.getResponseHeader('Last-Modified');\n    ThreadWatcher.dbLM.extend({siteID, boardID, val: $.item(url, lmDate)});\n    const threads = dict();\n    let pageLength = 0;\n    let nThreads = 0;\n    let oldest = null;\n    try {\n      pageLength = this.response[0]?.threads.length || 0;\n      for (let i = 0; i < this.response.length; i++) {\n        page = this.response[i];\n        for (var item of page.threads) {\n          threads[item.no] = {\n            page: i + 1,\n            index: nThreads,\n            modified: item.last_modified,\n            replies: item.replies\n          };\n          nThreads++;\n          if ((oldest == null) || (item.no < oldest)) {\n            oldest = item.no;\n          }\n        }\n      }\n    } catch (error) {\n      for (thread of board) {\n        ThreadWatcher.fetchStatus(thread);\n      }\n    }\n    for (thread of board) {\n      var {threadID, data} = thread;\n      if (threads[threadID]) {\n        var index, modified, replies;\n        ({page, index, modified, replies} = threads[threadID]);\n        if (Conf['Show Page']) {\n          var lastPage = g.sites[siteID].isPrunedByAge?.({siteID, boardID}) ?\n            threadID === oldest\n          :\n            index >= (nThreads - pageLength);\n          ThreadWatcher.update(siteID, boardID, threadID, {page, lastPage});\n        }\n        if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) {\n          if ((modified !== data.modified) || ((replies != null) && (replies !== data.replies))) {\n            (thread.newData || (thread.newData = {})).modified = modified;\n            ThreadWatcher.fetchStatus(thread);\n          }\n        }\n      } else {\n        ThreadWatcher.fetchStatus(thread);\n      }\n    }\n  },\n\n  fetchStatus(thread) {\n    const {siteID, boardID, threadID, data, force} = thread;\n    const url = g.sites[siteID]?.urls.threadJSON?.({siteID, boardID, threadID});\n    if (!url) { return; }\n    if (data.isDead && !force) { return; }\n    if (data.last === -1) { return; } // 404 or no JSON API\n    return ThreadWatcher.fetch(url, {siteID, force}, [thread], ThreadWatcher.parseStatus);\n  },\n\n  parseStatus(thread, isArchiveURL) {\n    let isDead, last;\n    let {siteID, boardID, threadID, data, newData, force} = thread;\n    const site = g.sites[siteID];\n    if ((this.status === 200) && this.response) {\n      let isArchived;\n      last = this.response.posts[this.response.posts.length-1].no;\n      const replies = this.response.posts.length-1;\n      isDead = (isArchived = !!(this.response.posts[0].archived || isArchiveURL));\n      if (isDead && Conf['Auto Prune']) {\n        ThreadWatcher.rm(siteID, boardID, threadID);\n        return;\n      }\n\n      if ((last === data.last) && (isDead === data.isDead) && (isArchived === data.isArchived)) { return; }\n\n      const lastReadPost = ThreadWatcher.unreaddb.get({siteID, boardID, threadID, defaultValue: 0});\n      let unread = data.unread || 0;\n      let quotingYou = data.quotingYou || 0;\n      const youOP = !!QuoteYou.db?.get({siteID, boardID, threadID, postID: threadID});\n\n      for (var postObj of this.response.posts) {\n        if ((postObj.no <= (data.last || 0)) || (postObj.no <= lastReadPost)) { continue; }\n        if (QuoteYou.db?.get({siteID, boardID, threadID, postID: postObj.no})) { continue; }\n\n        var quotesYou = false;\n        if (!Conf['Require OP Quote Link'] && youOP) {\n          quotesYou = true;\n        } else if (QuoteYou.db && postObj.com) {\n          var match;\n          var regexp = site.regexp.quotelinkHTML;\n          regexp.lastIndex = 0;\n          while (match = regexp.exec(postObj.com)) {\n            if (QuoteYou.db.get({\n              siteID,\n              boardID:  match[1] ? encodeURIComponent(match[1]) : boardID,\n              threadID: match[2] || threadID,\n              postID:   match[3] || match[2] || threadID\n            })) {\n              quotesYou = true;\n              break;\n            }\n          }\n        }\n\n        if (!unread || (!quotingYou && quotesYou)) {\n          if (Filter.isHidden(site.Build.parseJSON(postObj, {siteID, boardID}))) { continue; }\n        }\n\n        unread++;\n        if (quotesYou) { quotingYou = postObj.no; }\n      }\n\n      if (!newData) { newData = {}; }\n      $.extend(newData, {last, replies, isDead, isArchived, unread, quotingYou});\n      return ThreadWatcher.update(siteID, boardID, threadID, newData);\n\n    } else if (this.status === 404) {\n      const archiveURL = g.sites[siteID]?.urls.archivedThreadJSON?.({siteID, boardID, threadID});\n      if (!isArchiveURL && archiveURL) {\n        return ThreadWatcher.fetch(archiveURL, {siteID, force}, [thread, true], ThreadWatcher.parseStatus);\n      } else if (site.mayLackJSON && (data.last == null)) {\n        return ThreadWatcher.update(siteID, boardID, threadID, {last: -1});\n      } else {\n        return ThreadWatcher.update(siteID, boardID, threadID, {isDead: true});\n      }\n    }\n  },\n\n  getAll(groupByBoard) {\n    const all = [];\n    for (var siteID in ThreadWatcher.db.data) {\n      var boards = ThreadWatcher.db.data[siteID];\n      for (var boardID in boards.boards) {\n        var cont;\n        var threads = boards.boards[boardID];\n        if (Conf['Current Board'] && ((siteID !== g.SITE.ID) || (boardID !== g.BOARD.ID))) {\n          continue;\n        }\n        if (groupByBoard) {\n          all.push((cont = []));\n        }\n        for (var threadID in threads) {\n          var data = threads[threadID];\n          if (data && (typeof data === 'object')) {\n            (groupByBoard ? cont : all).push({siteID, boardID, threadID, data});\n          }\n        }\n      }\n    }\n    return all;\n  },\n\n  makeLine(siteID, boardID, threadID, data) {\n    let page;\n    const x = $.el('a', {\n      textContent: '',\n      href: 'javascript:;'\n    }\n    );\n    $.on(x, 'click', ThreadWatcher.cb.rm);\n\n    let {excerpt, isArchived} = data;\n    if (!excerpt) { excerpt = `/${boardID}/ - No.${threadID}`; }\n    if (Conf['Show Site Prefix']) { excerpt = ThreadWatcher.prefixes[siteID] + excerpt; }\n\n    const link = $.el('a', {\n      href: g.sites[siteID]?.urls.thread({siteID, boardID, threadID}, isArchived) || '',\n      title: excerpt,\n      className: 'watcher-link'\n    }\n    );\n\n    if (Conf['Show Page'] && (data.page != null)) {\n      page = $.el('span', {\n        textContent: `[${data.page}]`,\n        className: 'watcher-page'\n      }\n      );\n      $.add(link, page);\n    }\n\n    if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count'] && (data.unread != null)) {\n      const count = $.el('span', {\n        textContent: `(${data.unread})`,\n        className: 'watcher-unread'\n      }\n      );\n      $.add(link, count);\n    }\n\n    const title = $.el('span', {\n      textContent: excerpt,\n      className: 'watcher-title'\n    }\n    );\n    $.add(link, title);\n\n    const div = $.el('div');\n    const fullID = `${boardID}.${threadID}`;\n    div.dataset.fullID = fullID;\n    div.dataset.siteID = siteID;\n    if ((g.VIEW === 'thread') && (fullID === `${g.BOARD}.${g.THREADID}`)) { $.addClass(div, 'current'); }\n    if (data.isDead) { $.addClass(div, 'dead-thread'); }\n    if (Conf['Show Page']) {\n      if (data.lastPage) { $.addClass(div, 'last-page'); }\n      if (data.page != null) { div.dataset.page = data.page; }\n    }\n    if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) {\n      if (data.unread === 0) { $.addClass(div, 'replies-read'); }\n      if (data.unread) { $.addClass(div, 'replies-unread'); }\n      if ((data.quotingYou || 0) > (data.dismiss || 0)) { $.addClass(div, 'replies-quoting-you'); }\n    }\n    $.add(div, [x, $.tn(' '), link]);\n    return div;\n  },\n\n  setPrefixes(threads) {\n    const prefixes = dict();\n    for (var {siteID} of threads) {\n      if (siteID in prefixes) { continue; }\n      var len = 0;\n      var prefix = '';\n      var conflicts = Object.keys(prefixes);\n      while (conflicts.length > 0) {\n        len++;\n        prefix = siteID.slice(0, len);\n        var conflicts2 = [];\n        for (var siteID2 of conflicts) {\n          if (siteID2.slice(0, len) === prefix) {\n            conflicts2.push(siteID2);\n          } else if (prefixes[siteID2].length < len) {\n            prefixes[siteID2] = siteID2.slice(0, len);\n          }\n        }\n        conflicts = conflicts2;\n      }\n      prefixes[siteID] = prefix;\n    }\n    return ThreadWatcher.prefixes = prefixes;\n  },\n\n  build() {\n    const nodes = [];\n    const threads = ThreadWatcher.getAll();\n    ThreadWatcher.setPrefixes(threads);\n    for (var {siteID, boardID, threadID, data} of threads) {\n      // Add missing excerpt for threads added by Auto Watch\n      var thread;\n      if ((data.excerpt == null) && (siteID === g.SITE.ID) && (thread = g.threads.get(`${boardID}.${threadID}`)) && thread.OP) {\n        ThreadWatcher.db.extend({boardID, threadID, val: {excerpt: Get.threadExcerpt(thread)}});\n      }\n      nodes.push(ThreadWatcher.makeLine(siteID, boardID, threadID, data));\n    }\n    const {list} = ThreadWatcher;\n    $.rmAll(list);\n    $.add(list, nodes);\n\n    return ThreadWatcher.refreshIcon();\n  },\n\n  refresh() {\n    ThreadWatcher.build();\n\n    g.threads.forEach(function(thread) {\n      const isWatched = ThreadWatcher.isWatched(thread);\n      if (thread.OP) {\n        for (var post of [thread.OP, ...thread.OP.clones]) {\n          var toggler;\n          if (toggler = $('.watch-thread-link', post.nodes.info)) {\n            ThreadWatcher.setToggler(toggler, isWatched);\n          }\n        }\n      }\n      if (thread.catalogView) { return thread.catalogView.nodes.root.classList.toggle('watched', isWatched); }\n    });\n\n    if (Conf['Pin Watched Threads']) {\n      return $.event('SortIndex', {deferred: Conf['Index Mode'] !== 'catalog'});\n    }\n  },\n\n  refreshIcon() {\n    for (var className of ['replies-unread', 'replies-quoting-you']) {\n      ThreadWatcher.shortcut.classList.toggle(className, !!$(`.${className}`, ThreadWatcher.dialog));\n    }\n  },\n\n  update(siteID, boardID, threadID, newData) {\n    let data, key, line, val;\n    if (!(data = ThreadWatcher.db?.get({siteID, boardID, threadID}))) { return; }\n    if (newData.isDead && Conf['Auto Prune']) {\n      ThreadWatcher.rm(siteID, boardID, threadID);\n      return;\n    }\n    if (newData.isDead || (newData.last === -1)) {\n      for (key of ['isArchived', 'page', 'lastPage', 'unread', 'quotingyou']) {\n        if (!(key in newData)) {\n          newData[key] = undefined;\n        }\n      }\n    }\n    if ((newData.last != null) && (newData.last < data.last)) {\n      newData.modified = undefined;\n    }\n    let n = 0;\n    for (key in newData) { val = newData[key]; if (data[key] !== val) { n++; } }\n    if (!n) { return; }\n    ThreadWatcher.db.extend({siteID, boardID, threadID, val: newData});\n    if (line = $(`#watched-threads > [data-site-i-d='${siteID}'][data-full-i-d='${boardID}.${threadID}']`, ThreadWatcher.dialog)) {\n      const newLine = ThreadWatcher.makeLine(siteID, boardID, threadID, data);\n      $.replace(line, newLine);\n      return ThreadWatcher.refreshIcon();\n    } else {\n      return ThreadWatcher.refresh();\n    }\n  },\n\n  set404(boardID, threadID, cb) {\n    let data;\n    if (!(data = ThreadWatcher.db?.get({boardID, threadID}))) { return cb(); }\n    if (Conf['Auto Prune']) {\n      ThreadWatcher.db.delete({boardID, threadID});\n      return cb();\n    }\n    if (data.isDead && !((data.isArchived != null) || (data.page != null) || (data.lastPage != null) || (data.unread != null) || (data.quotingYou != null))) { return cb(); }\n    return ThreadWatcher.db.extend({boardID, threadID, val: {isDead: true, isArchived: undefined, page: undefined, lastPage: undefined, unread: undefined, quotingYou: undefined}}, cb);\n  },\n\n  toggle(thread) {\n    const siteID   = g.SITE.ID;\n    const boardID  = thread.board.ID;\n    const threadID = thread.ID;\n    if (ThreadWatcher.db.get({boardID, threadID})) {\n      return ThreadWatcher.rm(siteID, boardID, threadID);\n    } else {\n      return ThreadWatcher.add(thread);\n    }\n  },\n\n  add(thread, cb) {\n    const data     = {};\n    const siteID   = g.SITE.ID;\n    const boardID  = thread.board.ID;\n    const threadID = thread.ID;\n    if (thread.isDead) {\n      if (Conf['Auto Prune'] && ThreadWatcher.db.get({boardID, threadID})) {\n        ThreadWatcher.rm(siteID, boardID, threadID, cb);\n        return;\n      }\n      data.isDead = true;\n    }\n    if (thread.OP) { data.excerpt = Get.threadExcerpt(thread); }\n    return ThreadWatcher.addRaw(boardID, threadID, data, cb);\n  },\n\n  addRaw(boardID, threadID, data, cb) {\n    const oldData = ThreadWatcher.db.get({ boardID, threadID, defaultValue: dict() });\n    delete oldData.last;\n    delete oldData.modified;\n    $.extend(oldData, data);\n    ThreadWatcher.db.set({boardID, threadID, val: oldData}, cb);\n    ThreadWatcher.refresh();\n    const thread = {siteID: g.SITE.ID, boardID, threadID, data, force: true};\n    if (Conf['Show Page'] && !data.isDead) {\n      return ThreadWatcher.fetchBoard([thread]);\n    } else if (ThreadWatcher.unreadEnabled && Conf['Show Unread Count']) {\n      return ThreadWatcher.fetchStatus(thread);\n    }\n  },\n\n  rm(siteID, boardID, threadID, cb) {\n    ThreadWatcher.db.delete({siteID, boardID, threadID}, cb);\n    return ThreadWatcher.refresh();\n  },\n\n  menu: {\n    init() {\n      if (!Conf['Thread Watcher']) { return; }\n      const menu = (this.menu = new UI.Menu('thread watcher'));\n      $.on($('.menu-button', ThreadWatcher.dialog), 'click', function(e) {\n        return menu.toggle(e, this, ThreadWatcher);\n      });\n      return this.addMenuEntries();\n    },\n\n    addHeaderMenuEntry() {\n      if (g.VIEW !== 'thread') { return; }\n      const entryEl = $.el('a',\n        {href: 'javascript:;'});\n      Header.menu.addEntry({\n        el: entryEl,\n        order: 60,\n        open() {\n          const [addClass, rmClass, text] = !!ThreadWatcher.db.get({boardID: g.BOARD.ID, threadID: g.THREADID}) ?\n            ['unwatch-thread', 'watch-thread', 'Unwatch thread']\n          :\n            ['watch-thread', 'unwatch-thread', 'Watch thread'];\n          $.addClass(entryEl, addClass);\n          $.rmClass(entryEl, rmClass);\n          entryEl.textContent = text;\n          return true;\n        }\n      });\n      return $.on(entryEl, 'click', () => ThreadWatcher.toggle(g.threads.get(`${g.BOARD}.${g.THREADID}`)));\n    },\n\n    addMenuEntries() {\n      const entries = [];\n\n      // `Open all` entry\n      entries.push({\n        text: 'Open all threads',\n        cb: ThreadWatcher.cb.openAll,\n        open() {\n          this.el.classList.toggle('disabled', !ThreadWatcher.list.firstElementChild);\n          return true;\n        }\n      });\n\n      // `Open Unread` entry\n      entries.push({\n        text: 'Open unread threads',\n        cb: ThreadWatcher.cb.openUnread,\n        open() {\n          this.el.classList.toggle('disabled', !$('.replies-unread', ThreadWatcher.list));\n          return true;\n        }\n      });\n\n      // `Open dead threads` entry\n      entries.push({\n        text: 'Open dead threads',\n        cb: ThreadWatcher.cb.openDeads,\n        open() {\n          this.el.classList.toggle('disabled', !$('.dead-thread', ThreadWatcher.list));\n          return true;\n        }\n      });\n\n      // `Prune dead threads` entry\n      entries.push({\n        text: 'Prune dead threads',\n        cb: ThreadWatcher.cb.pruneDeads,\n        open() {\n          this.el.classList.toggle('disabled', !$('.dead-thread', ThreadWatcher.list));\n          return true;\n        }\n      });\n\n      // `Dismiss posts quoting you` entry\n      entries.push({\n        text: 'Dismiss posts quoting you',\n        title: 'Unhighlight the thread watcher icon and threads until there are new replies quoting you.',\n        cb: ThreadWatcher.cb.dismiss,\n        open() {\n          this.el.classList.toggle('disabled', !$.hasClass(ThreadWatcher.shortcut, 'replies-quoting-you'));\n          return true;\n        }\n      });\n\n      for (var {text, title, cb, open} of entries) {\n        var entry = {\n          el: $.el('a', {\n            textContent: text,\n            href: 'javascript:;'\n          }\n          )\n        };\n        if (title) { entry.el.title = title; }\n        $.on(entry.el, 'click', cb);\n        entry.open = open.bind(entry);\n        this.menu.addEntry(entry);\n      }\n\n      // Settings checkbox entries:\n      for (var name in Config.threadWatcher) {\n        var conf = Config.threadWatcher[name];\n        this.addCheckbox(name, conf[1]);\n      }\n\n    },\n\n    addCheckbox(name, desc) {\n      const entry = {\n        type: 'thread watcher',\n        el: UI.checkbox(name, name.replace(' Thread Watcher', ''))\n      };\n      entry.el.title = desc;\n      const input = entry.el.firstElementChild;\n      if ((name === 'Show Unread Count') && !ThreadWatcher.unreadEnabled) {\n        input.disabled = true;\n        $.addClass(entry.el, 'disabled');\n        entry.el.title += '\\n[Remember Last Read Post is disabled.]';\n      }\n      $.on(input, 'change', $.cb.checked);\n      if (['Current Board', 'Show Page', 'Show Unread Count', 'Show Site Prefix'].includes(name)) { $.on(input, 'change', ThreadWatcher.refresh); }\n      if (['Show Page', 'Show Unread Count', 'Auto Update Thread Watcher'].includes(name)) { $.on(input, 'change', ThreadWatcher.fetchAuto); }\n      return this.menu.addEntry(entry);\n    }\n  }\n};\nexport default ThreadWatcher;\n",null,null,null,"import Callbacks from \"../classes/Callbacks\";\nimport Fetcher from \"../classes/Fetcher\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { Conf, d, doc, g } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuotePreview = {\n  init() {\n    if (!Conf['Quote Previewing']) { return; }\n\n    if (g.VIEW === 'archive') {\n      $.on(d, 'mouseover', function(e) {\n        if ((e.target.nodeName === 'A') && $.hasClass(e.target, 'quotelink')) {\n          return QuotePreview.mouseover.call(e.target, e);\n        }\n      });\n    }\n\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    return Callbacks.Post.push({\n      name: 'Quote Previewing',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    for (var link of this.nodes.quotelinks.concat([...this.nodes.backlinks], this.nodes.archivelinks)) {\n      $.on(link, 'mouseover', QuotePreview.mouseover);\n    }\n  },\n\n  mouseover(e) {\n    let origin;\n    if (($.hasClass(this, 'inlined') && !$.hasClass(doc, 'catalog-mode')) || !d.contains(this)) { return; }\n\n    const {boardID, threadID, postID} = Get.postDataFromLink(this);\n\n    const qp = $.el('div', {\n      id: 'qp',\n      className: 'dialog'\n    }\n    );\n\n    $.add(Header.hover, qp);\n    new Fetcher(boardID, threadID, postID, qp, Get.postFromNode(this));\n\n    UI.hover({\n      root: this,\n      el: qp,\n      latestEvent: e,\n      endEvents: 'mouseout click',\n      cb: QuotePreview.mouseout\n    });\n\n    if (Conf['Quote Highlighting'] && (origin = g.posts.get(`${boardID}.${postID}`))) {\n      const posts = [origin].concat(origin.clones);\n      // Remove the clone that's in the qp from the array.\n      posts.pop();\n      for (var post of posts) {\n        $.addClass(post.nodes.post, 'qphl');\n      }\n    }\n  },\n\n  mouseout() {\n    // Stop if it only contains text.\n    let root;\n    if (!(root = this.el.firstElementChild)) { return; }\n\n    $.event('PostsRemoved', null, Header.hover);\n\n    const clone = Get.postFromRoot(root);\n    let post  = clone.origin;\n    post.rmClone(root.dataset.clone);\n\n    if (!Conf['Quote Highlighting']) { return; }\n    for (post of [post].concat(post.clones)) {\n      $.rmClass(post.nodes.post, 'qphl');\n    }\n  }\n};\nexport default QuotePreview;\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nimport Callbacks from '../classes/Callbacks';\nimport CatalogThread from '../classes/CatalogThread';\nimport Notice from '../classes/Notice';\nimport Post from '../classes/Post';\nimport Thread from '../classes/Thread';\nimport Config from '../config/Config';\nimport Filter from '../Filtering/Filter';\nimport PostHiding from '../Filtering/PostHiding';\nimport ThreadHiding from '../Filtering/ThreadHiding';\nimport Main from '../main/Main';\nimport CatalogLinks from '../Miscellaneous/CatalogLinks';\nimport RelativeDates from '../Miscellaneous/RelativeDates';\nimport ThreadWatcher from '../Monitoring/ThreadWatcher';\nimport $$ from '../platform/$$';\nimport $ from '../platform/$';\nimport QuotePreview from '../Quotelinks/QuotePreview';\nimport { c, Conf, d, doc, g } from '../globals/globals';\nimport Header from './Header';\nimport UI from './UI';\nimport Menu from '../Menu/Menu';\n\nimport NavLinksPage from './Index/NavLinks.html';\nimport PageList from './Index/PageList.html';\nimport BoardConfig from './BoardConfig';\nimport Get from './Get';\nimport { dict, SECOND } from '../platform/helpers';\n\nvar Index = {\n  showHiddenThreads: false,\n  changed: {},\n\n  enabledOn({siteID, boardID}) {\n    return Conf['JSON Index'] && (g.sites[siteID].software === 'yotsuba') && (boardID !== 'f');\n  },\n\n  init() {\n    let input, inputs, name;\n    if (g.VIEW !== 'index') { return; }\n\n    // For IndexRefresh events\n    $.one(d, '4chanXInitFinished', this.cb.initFinished);\n    $.on(d, 'PostsInserted', this.cb.postsInserted);\n\n    if (!this.enabledOn(g.BOARD)) { return; }\n\n    this.enabled = true;\n\n    Callbacks.Post.push({\n      name: 'Index Page Numbers',\n      cb:   this.node\n    });\n    Callbacks.CatalogThread.push({\n      name: 'Catalog Features',\n      cb:   this.catalogNode\n    });\n\n    this.search = history.state?.searched || '';\n    if (history.state?.mode) {\n      Conf['Index Mode'] = history.state?.mode;\n    }\n    this.currentSort = history.state?.sort;\n    if (!this.currentSort) { this.currentSort = typeof Conf['Index Sort'] === 'object' ? (\n        Conf['Index Sort'][g.BOARD.ID] || 'bump'\n      ) : (\n        Conf['Index Sort']\n      ); }\n    this.currentPage = this.getCurrentPage();\n    this.processHash();\n\n    $.addClass(doc, 'index-loading', `${Conf['Index Mode'].replace(/\\ /g, '-')}-mode`);\n    $.on(window, 'popstate', this.cb.popstate);\n    $.on(d, 'scroll', this.scroll);\n    $.on(d, 'SortIndex', this.cb.resort);\n\n    // Header refresh button\n    this.button = $.el('a', {\n      title: 'Refresh',\n      href: 'javascript:;',\n      textContent: ''\n    }\n    );\n    $.on(this.button, 'click', () => Index.update());\n    Header.addShortcut('index-refresh', this.button, 590);\n\n    // Header \"Index Navigation\" submenu\n    const entries = [];\n    this.inputs = (inputs = dict());\n    for (name in Config.Index) {\n      var arr = Config.Index[name];\n      if (arr instanceof Array) {\n        var label = UI.checkbox(name, `${name[0]}${name.slice(1).toLowerCase()}`);\n        label.title = arr[1];\n        entries.push({el: label});\n        input = label.firstChild;\n        $.on(input, 'change', $.cb.checked);\n        inputs[name] = input;\n      }\n    }\n    $.on(inputs['Show Replies'], 'change', this.cb.replies);\n    $.on(inputs['Catalog Hover Expand'], 'change', this.cb.hover);\n    $.on(inputs['Pin Watched Threads'], 'change', this.cb.resort);\n    $.on(inputs['Anchor Hidden Threads'], 'change', this.cb.resort);\n\n    const watchSettings = function(e) {\n      if (input = $.getOwn(inputs, e.target.name)) {\n        input.checked = e.target.checked;\n        return $.event('change', null, input);\n      }\n    };\n    $.on(d, 'OpenSettings', () => $.on($.id('fourchanx-settings'), 'change', watchSettings));\n\n    const sortEntry = UI.checkbox('Per-Board Sort Type', 'Per-board sort type', (typeof Conf['Index Sort'] === 'object'));\n    sortEntry.title = 'Set the sorting order of each board independently.';\n    $.on(sortEntry.firstChild, 'change', this.cb.perBoardSort);\n    entries.splice(3, 0, {el: sortEntry});\n\n    Header.menu.addEntry({\n      el: $.el('span',\n        {textContent: 'Index Navigation'}),\n      order: 100,\n      subEntries: entries\n    });\n\n    // Navigation links at top of index\n    this.navLinks = $.el('div', {className: 'navLinks json-index'});\n    $.extend(this.navLinks, {innerHTML: NavLinksPage});\n    $('.cataloglink a', this.navLinks).href = CatalogLinks.catalog();\n    if (!BoardConfig.isArchived(g.BOARD.ID)) { $('.archlistlink', this.navLinks).hidden = true; }\n    $.on($('#index-last-refresh a', this.navLinks), 'click', this.cb.refreshFront);\n\n    // Search field\n    this.searchInput = $('#index-search', this.navLinks);\n    this.setupSearch();\n    $.on(this.searchInput, 'input', this.onSearchInput);\n    $.on($('#index-search-clear', this.navLinks), 'click', this.clearSearch);\n\n    // Hidden threads toggle\n    this.hideLabel = $('#hidden-label', this.navLinks);\n    $.on($('#hidden-toggle a', this.navLinks), 'click', this.cb.toggleHiddenThreads);\n\n    // Drop-down menus and reverse sort toggle\n    this.selectRev   = $('#index-rev',  this.navLinks);\n    this.selectMode  = $('#index-mode', this.navLinks);\n    this.selectSort  = $('#index-sort', this.navLinks);\n    this.selectSize  = $('#index-size', this.navLinks);\n    $.on(this.selectRev,  'change', this.cb.sort);\n    $.on(this.selectMode, 'change', this.cb.mode);\n    $.on(this.selectSort, 'change', this.cb.sort);\n    $.on(this.selectSize, 'change', $.cb.value);\n    $.on(this.selectSize, 'change', this.cb.size);\n    for (var select of [this.selectMode, this.selectSize]) {\n      select.value = Conf[select.name];\n    }\n    this.selectRev.checked = /-rev$/.test(Index.currentSort);\n    this.selectSort.value  = Index.currentSort.replace(/-rev$/, '');\n\n    // Last Long Reply options\n    this.lastLongOptions = $('#lastlong-options', this.navLinks);\n    this.lastLongInputs = $$('input', this.lastLongOptions);\n    this.lastLongThresholds = [0, 0];\n    this.lastLongOptions.hidden = (this.selectSort.value !== 'lastlong');\n    for (let i = 0; i < this.lastLongInputs.length; i++) {\n      input = this.lastLongInputs[i];\n      $.on(input, 'change', this.cb.lastLongThresholds);\n      var tRaw = Conf[`Last Long Reply Thresholds ${i}`];\n      input.value = (this.lastLongThresholds[i] =\n        typeof tRaw === 'object' ? (tRaw[g.BOARD.ID] ?? 100) : tRaw);\n    }\n\n    // Thread container\n    this.root = $.el('div', {className: 'board json-index'});\n    $.on(this.root, 'click', this.cb.hoverToggle);\n    this.cb.size();\n    this.cb.hover();\n\n    // Page list\n    this.pagelist = $.el('div', {className: 'pagelist json-index'});\n    $.extend(this.pagelist, {innerHTML: PageList});\n    $('.cataloglink a', this.pagelist).href = CatalogLinks.catalog();\n    $.on(this.pagelist, 'click', this.cb.pageNav);\n\n    this.update(true);\n\n    $.onExists(doc, 'title + *', () => d.title = d.title.replace(/\\ -\\ Page\\ \\d+/, ''));\n\n    $.onExists(doc, '.board > .thread > .postContainer, .board + *', function() {\n      let el;\n      g.SITE.Build.hat = $('.board > .thread > img:first-child');\n      if (g.SITE.Build.hat) {\n        g.BOARD.threads.forEach(function(thread) {\n          if (thread.nodes.root) {\n            return $.prepend(thread.nodes.root, g.SITE.Build.hat.cloneNode(false));\n          }\n        });\n        $.addClass(doc, 'hats-enabled');\n        $.addStyle(`.catalog-thread::after {background-image: url(${g.SITE.Build.hat.src});}`);\n      }\n\n      const board = $('.board');\n      $.replace(board, Index.root);\n      if (Index.loaded) {\n        $.event('PostsInserted', null, Index.root);\n      }\n      // Hacks:\n      // - When removing an element from the document during page load,\n      //   its ancestors will still be correctly created inside of it.\n      // - Creating loadable elements inside of an origin-less document\n      //   will not download them.\n      // - Combine the two and you get a download canceller!\n      //   Does not work on Firefox unfortunately. bugzil.la/939713\n      try {\n        d.implementation.createDocument(null, null, null).appendChild(board);\n      } catch (error) {}\n\n      for (el of $$('.navLinks')) { $.rm(el); }\n      $.rm($.id('ctrl-top'));\n      const topNavPos = $.id('delform').previousElementSibling;\n      $.before(topNavPos, $.el('hr'));\n      $.before(topNavPos, Index.navLinks);\n      const timeEl = $('#index-last-refresh time', Index.navLinks);\n      if (timeEl.dataset.utc) { return RelativeDates.update(timeEl); }\n    });\n\n    return Main.ready(function() {\n      let pagelist;\n      if (pagelist = $('.pagelist')) {\n        $.replace(pagelist, Index.pagelist);\n      }\n      return $.rmClass(doc, 'index-loading');\n    });\n  },\n\n  scroll() {\n    if (Index.req || !Index.liveThreadData || (Conf['Index Mode'] !== 'infinite') || (window.scrollY <= (doc.scrollHeight - (300 + window.innerHeight)))) { return; }\n    if (Index.pageNum == null) { Index.pageNum = Index.currentPage; } // Avoid having to pushState to keep track of the current page\n\n    const pageNum = ++Index.pageNum;\n    if (pageNum > Index.pagesNum) { return Index.endNotice(); }\n\n    const threadIDs = Index.threadsOnPage(pageNum);\n    return Index.buildStructure(threadIDs);\n  },\n\n  endNotice: (function() {\n    let notify = false;\n    const reset = () => notify = false;\n    return function() {\n      if (notify) { return; }\n      notify = true;\n      new Notice('info', \"Last page reached.\", 2);\n      return setTimeout(reset, 3 * SECOND);\n    };\n  })(),\n\n  menu: {\n    init() {\n      if ((g.VIEW !== 'index') || !Conf['Menu'] || !Conf['Thread Hiding Link'] || !Index.enabledOn(g.BOARD)) { return; }\n\n      return Menu.menu.addEntry({\n        el: $.el('a', {\n          href:      'javascript:;',\n          className: 'has-shortcut-text'\n        }\n        , {innerHTML: \"<span></span><span class=\\\"shortcut-text\\\">Shift+click</span>\"}),\n        order: 20,\n        open({thread}) {\n          if (Conf['Index Mode'] !== 'catalog') { return false; }\n          this.el.firstElementChild.textContent = thread.isHidden ?\n            'Unhide'\n          :\n            'Hide';\n          if (this.cb) { $.off(this.el, 'click', this.cb); }\n          this.cb = function() {\n            $.event('CloseMenu');\n            return Index.toggleHide(thread);\n          };\n          $.on(this.el, 'click', this.cb);\n          return true;\n        }\n      });\n    }\n  },\n\n  node() {\n    if (this.isReply || this.isClone || (Index.threadPosition[this.ID] == null)) { return; }\n    return this.thread.setPage(Math.floor(Index.threadPosition[this.ID] / Index.threadsNumPerPage) + 1);\n  },\n\n  catalogNode() {\n    return $.on(this.nodes.root, 'mousedown click', e => {\n      if ((e.button !== 0) || !e.shiftKey) { return; }\n      if (e.type === 'click') { Index.toggleHide(this.thread); }\n      return e.preventDefault();\n    });\n  }, // Also on mousedown to prevent highlighting text.\n\n  toggleHide(thread) {\n    if (Index.showHiddenThreads) {\n      ThreadHiding.show(thread);\n      if (!ThreadHiding.db.get({boardID: thread.board.ID, threadID: thread.ID})) { return; }\n      // Don't save when un-hiding filtered threads.\n    } else {\n      ThreadHiding.hide(thread);\n    }\n    return ThreadHiding.saveHiddenState(thread);\n  },\n\n  cycleSortType() {\n    let i;\n    const types = Index.selectSort.options.filter(option => !option.disabled);\n    for (i = 0; i < types.length; i++) {\n      var type = types[i];\n      if (type.selected) { break; }\n    }\n    types[(i + 1) % types.length].selected = true;\n    return $.event('change', null, Index.selectSort);\n  },\n\n  cb: {\n    initFinished() {\n      Index.initFinishedFired = true;\n      return $.queueTask(() => Index.cb.postsInserted());\n    },\n\n    postsInserted() {\n      if (!Index.initFinishedFired) { return; }\n      let n = 0;\n      g.posts.forEach(function(post) {\n        if (!post.isFetchedQuote && !post.indexRefreshSeen && doc.contains(post.nodes.root)) {\n          post.indexRefreshSeen = true;\n          return n++;\n        }\n      });\n      if (n) { return $.event('IndexRefresh'); }\n    },\n\n    toggleHiddenThreads() {\n      $('#hidden-toggle a', Index.navLinks).textContent = (Index.showHiddenThreads = !Index.showHiddenThreads) ?\n        'Hide'\n      :\n        'Show';\n      Index.sort();\n      return Index.buildIndex();\n    },\n\n    mode() {\n      Index.pushState({mode: this.value});\n      return Index.pageLoad(false);\n    },\n\n    sort() {\n      const value = Index.selectRev.checked ? Index.selectSort.value + \"-rev\" : Index.selectSort.value;\n      Index.pushState({sort: value});\n      return Index.pageLoad(false);\n    },\n\n    resort(e) {\n      Index.changed.order = true;\n      if (!e?.detail?.deferred) { return Index.pageLoad(false); }\n    },\n\n    perBoardSort() {\n      Conf['Index Sort'] = this.checked ? dict() : '';\n      Index.saveSort();\n      for (let i = 0; i < 2; i++) {\n        Conf[`Last Long Reply Thresholds ${i}`] = this.checked ? dict() : '';\n        Index.saveLastLongThresholds(i);\n      }\n    },\n\n    lastLongThresholds() {\n      const i = [...this.parentNode.children].indexOf(this);\n      const value = +this.value;\n      if (!Number.isFinite(value)) {\n        this.value = Index.lastLongThresholds[i];\n        return;\n      }\n      Index.lastLongThresholds[i] = value;\n      Index.saveLastLongThresholds(i);\n      Index.changed.order = true;\n      return Index.pageLoad(false);\n    },\n\n    size(e) {\n      if (Conf['Index Mode'] !== 'catalog') {\n        $.rmClass(Index.root, 'catalog-small');\n        $.rmClass(Index.root, 'catalog-large');\n      } else if (Conf['Index Size'] === 'small') {\n        $.addClass(Index.root, 'catalog-small');\n        $.rmClass(Index.root,  'catalog-large');\n      } else {\n        $.addClass(Index.root, 'catalog-large');\n        $.rmClass(Index.root,  'catalog-small');\n      }\n      if (e) { return Index.buildIndex(); }\n    },\n\n    replies() {\n      return Index.buildIndex();\n    },\n\n    hover() {\n      return doc.classList.toggle('catalog-hover-expand', Conf['Catalog Hover Expand']);\n    },\n\n    hoverToggle(e) {\n      if (Conf['Catalog Hover Toggle'] && $.hasClass(doc, 'catalog-mode') && !$.modifiedClick(e) && !$.x('ancestor-or-self::a', e.target)) {\n        let thread;\n        const input = Index.inputs['Catalog Hover Expand'];\n        input.checked = !input.checked;\n        $.event('change', null, input);\n        if (thread = Get.threadFromNode(e.target)) {\n          Index.cb.catalogReplies.call(thread);\n          return Index.cb.hoverAdjust.call(thread.OP.nodes);\n        }\n      }\n    },\n\n    popstate(e) {\n      if (e?.state) {\n        const {searched, mode, sort} = e.state;\n        const page = Index.getCurrentPage();\n        Index.setState({search: searched, mode, sort, page});\n        return Index.pageLoad(false);\n      } else {\n        // page load or hash change\n        const nCommands = Index.processHash();\n        if (Conf['Refreshed Navigation'] && nCommands) {\n          return Index.update();\n        } else {\n          return Index.pageLoad();\n        }\n      }\n    },\n\n    pageNav(e) {\n      let a;\n      if ($.modifiedClick(e)) { return; }\n      switch (e.target.nodeName) {\n        case 'BUTTON':\n          e.target.blur();\n          a = e.target.parentNode;\n          break;\n        case 'A':\n          a = e.target;\n          break;\n        default:\n          return;\n      }\n      if (a.textContent === 'Catalog') { return; }\n      e.preventDefault();\n      return Index.userPageNav(+a.pathname.split(/\\/+/)[2] || 1);\n    },\n\n    refreshFront() {\n      Index.pushState({page: 1});\n      return Index.update();\n    },\n\n    catalogReplies() {\n      if (Conf['Show Replies'] && $.hasClass(doc, 'catalog-hover-expand') && !this.catalogView.nodes.replies) {\n        return Index.buildCatalogReplies(this);\n      }\n    },\n\n    hoverAdjust() {\n      // Prevent hovered catalog threads from going offscreen.\n      let x;\n      if (!$.hasClass(doc, 'catalog-hover-expand')) { return; }\n      const rect = this.post.getBoundingClientRect();\n      if (x = $.minmax(0, -rect.left, doc.clientWidth - rect.right)) {\n        const {style} = this.post;\n        style.left = `${x}px`;\n        style.right = `${-x}px`;\n        return $.one(this.root, 'mouseleave', () => style.left = (style.right = null));\n      }\n    }\n  },\n\n  scrollToIndex() {\n    // Scroll to navlinks, or top of board if navlinks are hidden.\n    return Header.scrollToIfNeeded((Index.navLinks.getBoundingClientRect().height ? Index.navLinks : Index.root));\n  },\n\n  getCurrentPage() {\n    return +window.location.pathname.split(/\\/+/)[2] || 1;\n  },\n\n  userPageNav(page) {\n    Index.pushState({page});\n    if (Conf['Refreshed Navigation']) {\n      return Index.update();\n    } else {\n      return Index.pageLoad();\n    }\n  },\n\n  hashCommands: {\n    mode: {\n      'paged':         'paged',\n      'infinite-scrolling': 'infinite',\n      'infinite':      'infinite',\n      'all-threads':   'all pages',\n      'all-pages':     'all pages',\n      'catalog':       'catalog'\n    },\n    sort: {\n      'bump-order':        'bump',\n      'last-reply':        'lastreply',\n      'last-long-reply':   'lastlong',\n      'creation-date':     'birth',\n      'reply-count':       'replycount',\n      'file-count':        'filecount',\n      'posts-per-minute':  'activity'\n    }\n  },\n\n  processHash() {\n    // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=483304\n    let hash = location.href.match(/#.*/)?.[0] || '';\n    const state =\n      {replace: true};\n    const commands = hash.slice(1).split('/');\n    const leftover = [];\n    for (var command of commands) {\n      var mode, sort;\n      if (mode = $.getOwn(Index.hashCommands.mode, command)) {\n        state.mode = mode;\n      } else if (command === 'index') {\n        state.mode = Conf['Previous Index Mode'];\n        state.page = 1;\n      } else if (sort = $.getOwn(Index.hashCommands.sort, command.replace(/-rev$/, ''))) {\n        state.sort = sort;\n        if (/-rev$/.test(command)) { state.sort += '-rev'; }\n      } else if (/^s=/.test(command)) {\n        state.search = decodeURIComponent(command.slice(2)).replace(/\\+/g, ' ').trim();\n      } else {\n        leftover.push(command);\n      }\n    }\n    hash = leftover.join('/');\n    if (hash) { state.hash = `#${hash}`; }\n    Index.pushState(state);\n    return commands.length - leftover.length;\n  },\n\n  pushState(state) {\n    let {search, hash, replace} = state;\n    let pageBeforeSearch = history.state?.oldpage;\n    if ((search != null) && (search !== Index.search)) {\n      state.page = search ? 1 : (pageBeforeSearch || 1);\n      if (!search) {\n        pageBeforeSearch = undefined;\n      } else if (!Index.search) {\n        pageBeforeSearch = Index.currentPage;\n      }\n    }\n    Index.setState(state);\n    const pathname = Index.currentPage === 1 ? `/${g.BOARD}/` : `/${g.BOARD}/${Index.currentPage}`;\n    if (!hash) { hash = ''; }\n    return history[replace ? 'replaceState' : 'pushState']({\n      mode:     Conf['Index Mode'],\n      sort:     Index.currentSort,\n      searched: Index.search,\n      oldpage:  pageBeforeSearch\n    }\n    , '', `${location.protocol}//${location.host}${pathname}${hash}`);\n  },\n\n  setState({search, mode, sort, page, hash}) {\n    if ((search != null) && (search !== Index.search)) {\n      Index.changed.search = true;\n      Index.search = search;\n    }\n    if ((mode != null) && (mode !== Conf['Index Mode'])) {\n      Index.changed.mode = true;\n      Conf['Index Mode'] = mode;\n      $.set('Index Mode', mode);\n      if ((mode !== 'catalog') && (Conf['Previous Index Mode'] !== mode)) {\n        Conf['Previous Index Mode'] = mode;\n        $.set('Previous Index Mode', mode);\n      }\n    }\n    if ((sort != null) && (sort !== Index.currentSort)) {\n      Index.changed.sort = true;\n      Index.currentSort = sort;\n      Index.saveSort();\n    }\n    if (['all pages', 'catalog'].includes(Conf['Index Mode'])) { page = 1; }\n    if ((page != null) && (page !== Index.currentPage)) {\n      Index.changed.page = true;\n      Index.currentPage = page;\n    }\n    if (hash != null) {\n      return Index.changed.hash = true;\n    }\n  },\n\n  savePerBoard(key, value) {\n    if (typeof Conf[key] === 'object') {\n      Conf[key][g.BOARD.ID] = value;\n    } else {\n      Conf[key] = value;\n    }\n    return $.set(key, Conf[key]);\n  },\n\n  saveSort() {\n    return Index.savePerBoard('Index Sort', Index.currentSort);\n  },\n\n  saveLastLongThresholds(i) {\n    return Index.savePerBoard(`Last Long Reply Thresholds ${i}`, Index.lastLongThresholds[i]);\n  },\n\n  pageLoad(scroll=true) {\n    if (!Index.liveThreadData) { return; }\n    let {threads, order, search, mode, sort, page, hash} = Index.changed;\n    if (!threads) { threads = search; }\n    if (!order) { order = sort; }\n    if (threads || order) { Index.sort(); }\n    if (threads) { Index.buildPagelist(); }\n    if (search) { Index.setupSearch(); }\n    if (mode) { Index.setupMode(); }\n    if (sort) { Index.setupSort(); }\n    if (threads || mode || page || order) { Index.buildIndex(); }\n    if (threads || page) { Index.setPage(); }\n    if (scroll && !hash) { Index.scrollToIndex(); }\n    if (hash) { Header.hashScroll(); }\n    return Index.changed = {};\n  },\n\n  setupMode() {\n    for (var mode of ['paged', 'infinite', 'all pages', 'catalog']) {\n      $[mode === Conf['Index Mode'] ? 'addClass' : 'rmClass'](doc, `${mode.replace(/\\ /g, '-')}-mode`);\n    }\n    Index.selectMode.value = Conf['Index Mode'];\n    Index.cb.size();\n    Index.showHiddenThreads = false;\n    return $('#hidden-toggle a', Index.navLinks).textContent = 'Show';\n  },\n\n  setupSort() {\n    Index.selectRev.checked = /-rev$/.test(Index.currentSort);\n    Index.selectSort.value  = Index.currentSort.replace(/-rev$/, '');\n    return Index.lastLongOptions.hidden = (Index.selectSort.value !== 'lastlong');\n  },\n\n  getPagesNum() {\n    if (Index.search) {\n      return Math.ceil(Index.sortedThreadIDs.length / Index.threadsNumPerPage);\n    } else {\n      return Index.pagesNum;\n    }\n  },\n\n  getMaxPageNum() {\n    return Math.max(1, Index.getPagesNum());\n  },\n\n  buildPagelist() {\n    const pagesRoot = $('.pages', Index.pagelist);\n    const maxPageNum = Index.getMaxPageNum();\n    if (pagesRoot.childElementCount !== maxPageNum) {\n      const nodes = [];\n      for (let i = 1, end = maxPageNum; i <= end; i++) {\n        var a = $.el('a', {\n          textContent: i,\n          href: i === 1 ? './' : i\n        }\n        );\n        nodes.push($.tn('['), a, $.tn('] '));\n      }\n      $.rmAll(pagesRoot);\n      return $.add(pagesRoot, nodes);\n    }\n  },\n\n  setPage() {\n    let a, strong;\n    const pageNum    = Index.currentPage;\n    const maxPageNum = Index.getMaxPageNum();\n    const pagesRoot  = $('.pages', Index.pagelist);\n\n    // Previous/Next buttons\n    const prev = pagesRoot.previousElementSibling.firstElementChild;\n    const next = pagesRoot.nextElementSibling.firstElementChild;\n    let href = Math.max(pageNum - 1, 1);\n    prev.href = href === 1 ? './' : href;\n    prev.firstElementChild.disabled = href === pageNum;\n    href = Math.min(pageNum + 1, maxPageNum);\n    next.href = href === 1 ? './' : href;\n    next.firstElementChild.disabled = href === pageNum;\n\n    // <strong> current page\n    if (strong = $('strong', pagesRoot)) {\n      if (+strong.textContent === pageNum) { return; }\n      $.replace(strong, strong.firstChild);\n    } else {\n      strong = $.el('strong');\n    }\n\n    if (a = pagesRoot.children[pageNum - 1]) {\n      $.before(a, strong);\n      return $.add(strong, a);\n    }\n  },\n\n  updateHideLabel() {\n    if (!Index.hideLabel) { return; }\n    let hiddenCount = 0;\n    for (var threadID of Index.liveThreadIDs) {\n      if (Index.isHidden(threadID)) {\n        hiddenCount++;\n      }\n    }\n    if (!hiddenCount) {\n      Index.hideLabel.hidden = true;\n      if (Index.showHiddenThreads) { Index.cb.toggleHiddenThreads(); }\n      return;\n    }\n    Index.hideLabel.hidden = false;\n    return $('#hidden-count', Index.navLinks).textContent = hiddenCount === 1 ?\n      '1 hidden thread'\n    :\n      `${hiddenCount} hidden threads`;\n  },\n\n  update(firstTime) {\n    let oldReq;\n    if (oldReq = Index.req) {\n      delete Index.req;\n      oldReq.abort();\n    }\n\n    if (Conf['Index Refresh Notifications']) {\n      // Optional notification for manual refreshes\n      if (!Index.notice) { Index.notice = new Notice('info', 'Refreshing index...'); }\n      if (!Index.nTimeout) { Index.nTimeout = setTimeout(() => {\n          if (Index.notice) {\n            Index.notice.el.lastElementChild.textContent += ' (disable JSON Index if this takes too long)';\n          }\n        }\n        , 3 * SECOND); }\n    } else {\n      // Also display notice if Index Refresh is taking too long\n      if (!Index.nTimeout) { Index.nTimeout = setTimeout(() => Index.notice || (Index.notice = new Notice('info', 'Refreshing index... (disable JSON Index if this takes too long)'))\n      , 3 * SECOND); }\n    }\n\n    // Hard refresh in case of incomplete page load.\n    if (!firstTime && (d.readyState !== 'loading') && !$('.board + *')) {\n      location.reload();\n      return;\n    }\n\n    Index.req = $.whenModified(\n      g.SITE.urls.catalogJSON({boardID: g.BOARD.ID}),\n      'Index',\n      Index.load\n    );\n    return $.addClass(Index.button, 'spin');\n  },\n\n  load() {\n    let err;\n    if (this !== Index.req) { return; } // aborted\n\n    $.rmClass(Index.button, 'spin');\n    const {notice, nTimeout} = Index;\n    if (nTimeout) { clearTimeout(nTimeout); }\n    delete Index.nTimeout;\n    delete Index.req;\n    delete Index.notice;\n\n    if (![200, 304].includes(this.status)) {\n      err = `Index refresh failed. ${this.status ? `Error ${this.statusText} (${this.status})` : 'Connection Error'}`;\n      if (notice) {\n        notice.setType('warning');\n        notice.el.lastElementChild.textContent = err;\n        setTimeout(notice.close, SECOND);\n      } else {\n        new Notice('warning', err, 1);\n      }\n      return;\n    }\n\n    try {\n      if (this.status === 200) {\n        Index.parse(this.response);\n      } else if (this.status === 304) {\n        Index.pageLoad();\n      }\n    } catch (error) {\n      err = error;\n      c.error(`Index failure: ${err.message}`, err.stack);\n      if (notice) {\n        notice.setType('error');\n        notice.el.lastElementChild.textContent = 'Index refresh failed.';\n        setTimeout(notice.close, SECOND);\n      } else {\n        new Notice('error', 'Index refresh failed.', 1);\n      }\n      return;\n    }\n\n    if (notice) {\n      if (Conf['Index Refresh Notifications']) {\n        notice.setType('success');\n        notice.el.lastElementChild.textContent = 'Index refreshed!';\n        setTimeout(notice.close, SECOND);\n      } else {\n        notice.close();\n      }\n    }\n\n    const timeEl = $('#index-last-refresh time', Index.navLinks);\n    timeEl.dataset.utc = Date.parse(this.getResponseHeader('Last-Modified'));\n    return RelativeDates.update(timeEl);\n  },\n\n  parse(pages) {\n    $.cleanCache(url => /^https?:\\/\\/a\\.4cdn\\.org\\//.test(url));\n    Index.parseThreadList(pages);\n    Index.changed.threads = true;\n    return Index.pageLoad();\n  },\n\n  parseThreadList(pages) {\n    Index.pagesNum          = pages.length;\n    Index.threadsNumPerPage = pages[0]?.threads.length || 1;\n    Index.liveThreadData    = pages.reduce(((arr, next) => arr.concat(next.threads)), []);\n    Index.liveThreadIDs     = Index.liveThreadData.map(data => data.no);\n    Index.liveThreadDict    = dict();\n    Index.threadPosition    = dict();\n    Index.parsedThreads     = dict();\n    Index.replyData         = dict();\n    for (let i = 0; i < Index.liveThreadData.length; i++) {\n      var obj, results;\n      var data = Index.liveThreadData[i];\n      Index.liveThreadDict[data.no] = data;\n      Index.threadPosition[data.no] = i;\n      Index.parsedThreads[data.no] = (obj = g.SITE.Build.parseJSON(data, g.BOARD));\n      obj.filterResults = (results = Filter.test(obj));\n      obj.isOnTop  = results.top;\n      obj.isHidden = results.hide || ThreadHiding.isHidden(obj.boardID, obj.threadID);\n      if (data.last_replies) {\n        for (var reply of data.last_replies) {\n          Index.replyData[`${g.BOARD}.${reply.no}`] = reply;\n        }\n      }\n    }\n    if (Index.liveThreadData[0]) {\n      g.SITE.Build.spoilerRange[g.BOARD.ID] = Index.liveThreadData[0].custom_spoiler;\n    }\n    g.BOARD.threads.forEach(function(thread) {\n      if (!Index.liveThreadIDs.includes(thread.ID)) { return thread.collect(); }\n    });\n    $.event('IndexUpdate',\n      {threads: ((Index.liveThreadIDs.map((ID) => `${g.BOARD}.${ID}`)))});\n  },\n\n  isHidden(threadID) {\n    let thread;\n    if ((thread = g.BOARD.threads.get(threadID)) && thread.OP && !thread.OP.isFetchedQuote) {\n      return thread.isHidden;\n    } else {\n      return Index.parsedThreads[threadID].isHidden;\n    }\n  },\n\n  isHiddenReply(threadID, replyData) {\n    return PostHiding.isHidden(g.BOARD.ID, threadID, replyData.no) || Filter.isHidden(g.SITE.Build.parseJSON(replyData, g.BOARD));\n  },\n\n  buildThreads(threadIDs, isCatalog, withReplies) {\n    let errors;\n    const threads    = [];\n    const newThreads = [];\n    let newPosts   = [];\n    for (var ID of threadIDs) {\n      var opRoot, thread;\n      try {\n        var OP;\n        var threadData = Index.liveThreadDict[ID];\n\n        if (thread = g.BOARD.threads.get(ID)) {\n          var isStale = (thread.json !== threadData) && (JSON.stringify(thread.json) !== JSON.stringify(threadData));\n          if (isStale) {\n            thread.setCount('post', threadData.replies + 1,                threadData.bumplimit);\n            thread.setCount('file', threadData.images  + !!threadData.ext, threadData.imagelimit);\n            thread.setStatus('Sticky', !!threadData.sticky);\n            thread.setStatus('Closed', !!threadData.closed);\n          }\n          if (thread.catalogView) {\n            $.rm(thread.catalogView.nodes.replies);\n            thread.catalogView.nodes.replies = null;\n          }\n        } else {\n          thread = new Thread(ID, g.BOARD);\n          newThreads.push(thread);\n        }\n        var lastPost = threadData.last_replies && threadData.last_replies.length ? threadData.last_replies[threadData.last_replies.length - 1].no : ID;\n        if (lastPost > thread.lastPost) { thread.lastPost = lastPost; }\n        thread.json = threadData;\n        threads.push(thread);\n\n        if ((OP = thread.OP) && !OP.isFetchedQuote) {\n          OP.setCatalogOP(isCatalog);\n          thread.setPage(Math.floor(Index.threadPosition[ID] / Index.threadsNumPerPage) + 1);\n        } else {\n          var obj = Index.parsedThreads[ID];\n          opRoot = g.SITE.Build.post(obj);\n          OP = new Post(opRoot, thread, g.BOARD);\n          OP.filterResults = obj.filterResults;\n          newPosts.push(OP);\n        }\n\n        if (!isCatalog || !thread.nodes.root) {\n          g.SITE.Build.thread(thread, threadData, withReplies);\n        }\n      } catch (err) {\n        // Skip posts that we failed to parse.\n        if (!errors) { errors = []; }\n        errors.push({\n          message: `Parsing of Thread No.${thread} failed. Thread will be skipped.`,\n          error: err,\n          html: opRoot?.outerHTML\n        });\n      }\n    }\n    if (errors) { Main.handleErrors(errors); }\n\n    if (withReplies) {\n      newPosts = newPosts.concat(Index.buildReplies(threads));\n    }\n\n    Main.callbackNodes('Thread', newThreads);\n    Main.callbackNodes('Post',   newPosts);\n    Index.updateHideLabel();\n    $.event('IndexRefreshInternal', {threadIDs: (threads.map((t) => t.fullID)), isCatalog});\n\n    return threads;\n  },\n\n  buildReplies(threads) {\n    let errors;\n    const posts = [];\n    for (var thread of threads) {\n      var lastReplies;\n      if (!(lastReplies = Index.liveThreadDict[thread.ID].last_replies)) { continue; }\n      var nodes = [];\n      for (var data of lastReplies) {\n        var node, post;\n        if ((post = thread.posts.get(data.no)) && !post.isFetchedQuote) {\n          nodes.push(post.nodes.root);\n          continue;\n        }\n        nodes.push(node = g.SITE.Build.postFromObject(data, thread.board.ID));\n        try {\n          posts.push(new Post(node, thread, thread.board));\n        } catch (err) {\n          // Skip posts that we failed to parse.\n          if (!errors) { errors = []; }\n          errors.push({\n            message: `Parsing of Post No.${data.no} failed. Post will be skipped.`,\n            error: err,\n            html: node?.outerHTML\n          });\n        }\n      }\n      $.add(thread.nodes.root, nodes);\n    }\n\n    if (errors) { Main.handleErrors(errors); }\n    return posts;\n  },\n\n  buildCatalogViews(threads) {\n    const catalogThreads = [];\n    for (var thread of threads) {\n      if (!thread.catalogView) {\n        var {ID} = thread;\n        var page = Math.floor(Index.threadPosition[ID] / Index.threadsNumPerPage) + 1;\n        var root = g.SITE.Build.catalogThread(thread, Index.liveThreadDict[ID], page);\n        catalogThreads.push(new CatalogThread(root, thread));\n      }\n    }\n    Main.callbackNodes('CatalogThread', catalogThreads);\n  },\n\n  sizeCatalogViews(threads) {\n    // XXX When browsers support CSS3 attr(), use it instead.\n    const size = Conf['Index Size'] === 'small' ? 150 : 250;\n    for (var thread of threads) {\n      var {thumb} = thread.catalogView.nodes;\n      var {width, height} = thumb.dataset;\n      if (!width) { continue; }\n      var ratio = size / Math.max(width, height);\n      thumb.style.width  = (width  * ratio) + 'px';\n      thumb.style.height = (height * ratio) + 'px';\n    }\n  },\n\n  buildCatalogReplies(thread) {\n    let lastReplies;\n    const {nodes} = thread.catalogView;\n    if (!(lastReplies = Index.liveThreadDict[thread.ID].last_replies)) { return; }\n\n    const replies = [];\n    for (var data of lastReplies) {\n      if (Index.isHiddenReply(thread.ID, data)) { continue; }\n      var reply = g.SITE.Build.catalogReply(thread, data);\n      RelativeDates.update($('time', reply));\n      $.on($('.catalog-reply-preview', reply), 'mouseover', QuotePreview.mouseover);\n      replies.push(reply);\n    }\n\n    nodes.replies = $.el('div', {className: 'catalog-replies'});\n    $.add(nodes.replies, replies);\n    $.add(thread.OP.nodes.post, nodes.replies);\n  },\n\n  sort() {\n    let threadIDs;\n    const {liveThreadIDs, liveThreadData} = Index;\n    if (!liveThreadData) { return; }\n    const tmp_time = new Date().getTime()/1000;\n    const sortType = Index.currentSort.replace(/-rev$/, '');\n    Index.sortedThreadIDs = (() => { switch (sortType) {\n      case 'lastreply': case 'lastlong':\n        var repliesAvailable = liveThreadData.some(thread => thread.last_replies?.length);\n        var lastlong = function(thread) {\n          if (!repliesAvailable) {\n            return thread.last_modified;\n          }\n          const iterable = thread.last_replies || [];\n          for (let i = iterable.length - 1; i >= 0; i--) {\n            var r = iterable[i];\n            if (Index.isHiddenReply(thread.no, r)) { continue; }\n            if (sortType === 'lastreply') {\n              return r;\n            }\n            var len = r.com ? g.SITE.Build.parseComment(r.com).replace(/[^a-z]/ig, '').length : 0;\n            if (len >= Index.lastLongThresholds[+!!r.ext]) {\n              return r;\n            }\n          }\n          if (thread.omitted_posts && thread.last_replies?.length) { return thread.last_replies[0]; } else { return thread; }\n        };\n        var lastlongD = dict();\n        for (var thread of liveThreadData) {\n          lastlongD[thread.no] = lastlong(thread).no;\n        }\n        return [...liveThreadData].sort((a, b) => lastlongD[b.no] - lastlongD[a.no]).map(post => post.no);\n      case 'bump':       return liveThreadIDs;\n      case 'birth':      return [...liveThreadIDs ].sort((a, b) => b - a);\n      case 'replycount': return [...liveThreadData].sort((a, b) => b.replies - a.replies).map(post => post.no);\n      case 'filecount':  return [...liveThreadData].sort((a, b) => b.images  - a.images).map(post => post.no);\n      case 'activity':   return [...liveThreadData].sort((a, b) => ((tmp_time-a.time)/(a.replies+1)) - ((tmp_time-b.time)/(b.replies+1))).map(post => post.no);\n      default: return liveThreadIDs;\n    } })();\n    if (/-rev$/.test(Index.currentSort)) {\n      Index.sortedThreadIDs.reverse();\n    }\n    if (Index.search && (threadIDs = Index.querySearch(Index.search))) {\n      Index.sortedThreadIDs = threadIDs;\n    }\n    // Sticky threads\n    Index.sortOnTop(obj => obj.isSticky);\n    // Highlighted threads\n    Index.sortOnTop(obj => obj.isOnTop || (Conf['Pin Watched Threads'] && ThreadWatcher.isWatchedRaw(obj.boardID, obj.threadID)));\n    // Non-hidden threads\n    if (Conf['Anchor Hidden Threads']) { return Index.sortOnTop(obj => !Index.isHidden(obj.threadID)); }\n  },\n\n  sortOnTop(match) {\n    const topThreads    = [];\n    const bottomThreads = [];\n    for (var ID of Index.sortedThreadIDs) {\n      (match(Index.parsedThreads[ID]) ? topThreads : bottomThreads).push(ID);\n    }\n    return Index.sortedThreadIDs = topThreads.concat(bottomThreads);\n  },\n\n  buildIndex() {\n    let threadIDs;\n    if (!Index.liveThreadData) { return; }\n    switch (Conf['Index Mode']) {\n      case 'all pages':\n        threadIDs = Index.sortedThreadIDs;\n        break;\n      case 'catalog':\n        threadIDs = Index.sortedThreadIDs.filter(ID => !Index.isHidden(ID) !== Index.showHiddenThreads);\n        break;\n      default:\n        threadIDs = Index.threadsOnPage(Index.currentPage);\n    }\n    delete Index.pageNum;\n    $.rmAll(Index.root);\n    $.rmAll(Header.hover);\n    if (Index.loaded && Index.root.parentNode) {\n      $.event('PostsRemoved', null, Index.root);\n    }\n    if (Conf['Index Mode'] === 'catalog') {\n      Index.buildCatalog(threadIDs);\n    } else {\n      Index.buildStructure(threadIDs);\n    }\n  },\n\n  threadsOnPage(pageNum) {\n    const nodesPerPage = Index.threadsNumPerPage;\n    const offset = nodesPerPage * (pageNum - 1);\n    return Index.sortedThreadIDs.slice(offset ,  offset + nodesPerPage);\n  },\n\n  buildStructure(threadIDs) {\n    const threads = Index.buildThreads(threadIDs, false, Conf['Show Replies']);\n    const nodes = [];\n    for (var thread of threads) {\n      nodes.push(thread.nodes.root, $.el('hr'));\n    }\n    $.add(Index.root, nodes);\n    if (Index.root.parentNode) {\n      $.event('PostsInserted', null, Index.root);\n    }\n    Index.loaded = true;\n  },\n\n  buildCatalog(threadIDs) {\n    let i = 0;\n    const n = threadIDs.length;\n    let node0 = null;\n    var fn = function() {\n      if (node0 && !node0.parentNode) { return; } // Index.root cleared\n      const j = (i > 0) && Index.root.parentNode ? n : i + 30;\n      node0 = Index.buildCatalogPart(threadIDs.slice(i, j))[0];\n      i = j;\n      if (i < n) {\n        return $.queueTask(fn);\n      } else {\n        if (Index.root.parentNode) {\n          $.event('PostsInserted', null, Index.root);\n        }\n        return Index.loaded = true;\n      }\n    };\n    fn();\n  },\n\n  buildCatalogPart(threadIDs) {\n    const threads = Index.buildThreads(threadIDs, true);\n    Index.buildCatalogViews(threads);\n    Index.sizeCatalogViews(threads);\n    const nodes = [];\n    for (var thread of threads) {\n      thread.OP.setCatalogOP(true);\n      $.add(thread.catalogView.nodes.root, thread.OP.nodes.root);\n      nodes.push(thread.catalogView.nodes.root);\n      $.on(thread.catalogView.nodes.root, 'mouseenter', Index.cb.catalogReplies.bind(thread));\n      $.on(thread.OP.nodes.root, 'mouseenter', Index.cb.hoverAdjust.bind(thread.OP.nodes));\n    }\n    $.add(Index.root, nodes);\n    return nodes;\n  },\n\n  clearSearch() {\n    Index.searchInput.value = '';\n    Index.onSearchInput();\n    return Index.searchInput.focus();\n  },\n\n  setupSearch() {\n    Index.searchInput.value = Index.search;\n    if (Index.search) {\n      return Index.searchInput.dataset.searching = 1;\n    } else {\n      // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=1021289\n      return Index.searchInput.removeAttribute('data-searching');\n    }\n  },\n\n  onSearchInput() {\n    const search = Index.searchInput.value.trim();\n    if (search === Index.search) { return; }\n    Index.pushState({\n      search,\n      replace: !!search === !!Index.search\n    });\n    return Index.pageLoad(false);\n  },\n\n  querySearch(query) {\n    let keywords, match;\n    if (match = query.match(/^([\\w+]+):\\/(.*)\\/(\\w*)$/)) {\n      let regexp;\n      try {\n        regexp = RegExp(match[2], match[3]);\n      } catch (error) {\n        return [];\n      }\n      return Index.sortedThreadIDs.filter(ID => regexp.test(Filter.values(match[1], Index.parsedThreads[ID]).join('\\n')));\n    }\n    if (!(keywords = query.toLowerCase().match(/\\S+/g))) { return; }\n    return Index.sortedThreadIDs.filter(ID => Index.searchMatch(Index.parsedThreads[ID], keywords));\n  },\n\n  searchMatch(obj, keywords) {\n    const {info, file} = obj;\n    if (info.comment == null) { info.comment = g.SITE.Build.parseComment(info.commentHTML.innerHTML); }\n    let text = [];\n    for (var key of ['comment', 'subject', 'name', 'tripcode']) {\n      if (key in info) { text.push(info[key]); }\n    }\n    if (file) { text.push(file.name); }\n    text = text.join(' ').toLowerCase();\n    for (var keyword of keywords) {\n      if (-1 === text.indexOf(keyword)) { return false; }\n    }\n    return true;\n  }\n};\nexport default Index;\n","import Callbacks from \"../classes/Callbacks\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Thread from \"../classes/Thread\";\nimport Index from \"../General/Index\";\nimport UI from \"../General/UI\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport Menu from \"../Menu/Menu\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ThreadHiding = {\n  init() {\n    if (!['index', 'catalog'].includes(g.VIEW) || (!Conf['Thread Hiding Buttons'] && !(Conf['Menu'] && Conf['Thread Hiding Link']) && !Conf['JSON Index'])) { return; }\n    this.db = new DataBoard('hiddenThreads');\n    if (g.VIEW === 'catalog') { return this.catalogWatch(); }\n    this.catalogSet(g.BOARD);\n    $.on(d, 'IndexRefreshInternal', this.onIndexRefresh);\n    if (Conf['Thread Hiding Buttons']) {\n      $.addClass(doc, 'thread-hide');\n    }\n    return Callbacks.Post.push({\n      name: 'Thread Hiding',\n      cb:   this.node\n    });\n  },\n\n  catalogSet(board) {\n    if (!$.hasStorage || (g.SITE.software !== 'yotsuba')) { return; }\n    const hiddenThreads = ThreadHiding.db.get({\n      boardID: board.ID,\n      defaultValue: dict()\n    });\n    for (var threadID in hiddenThreads) { hiddenThreads[threadID] = true; }\n    return localStorage.setItem(`4chan-hide-t-${board}`, JSON.stringify(hiddenThreads));\n  },\n\n  catalogWatch() {\n    if (!$.hasStorage || (g.SITE.software !== 'yotsuba')) { return; }\n    this.hiddenThreads = JSON.parse(localStorage.getItem(`4chan-hide-t-${g.BOARD}`)) || {};\n    return Main.ready(() => // 4chan's catalog sets the style to \"display: none;\" when hiding or unhiding a thread.\n    new MutationObserver(ThreadHiding.catalogSave).observe($.id('threads'), {\n      attributes: true,\n      subtree: true,\n      attributeFilter: ['style']\n    }));\n  },\n\n  catalogSave() {\n    let threadID;\n    const hiddenThreads2 = JSON.parse(localStorage.getItem(`4chan-hide-t-${g.BOARD}`)) || {};\n    for (threadID in hiddenThreads2) {\n      if (!$.hasOwn(ThreadHiding.hiddenThreads, threadID)) {\n        ThreadHiding.db.set({\n          boardID:  g.BOARD.ID,\n          threadID,\n          val:      {makeStub: Conf['Stubs']}});\n      }\n    }\n    for (threadID in ThreadHiding.hiddenThreads) {\n      if (!$.hasOwn(hiddenThreads2, threadID)) {\n        ThreadHiding.db.delete({\n          boardID:  g.BOARD.ID,\n          threadID\n        });\n      }\n    }\n    return ThreadHiding.hiddenThreads = hiddenThreads2;\n  },\n\n  isHidden(boardID, threadID) {\n    return !!(ThreadHiding.db && ThreadHiding.db.get({boardID, threadID}));\n  },\n\n  node() {\n    let data;\n    if (this.isReply || this.isClone || this.isFetchedQuote) { return; }\n\n    if (Conf['Thread Hiding Buttons']) {\n      $.prepend(this.nodes.root, ThreadHiding.makeButton(this.thread, 'hide'));\n    }\n\n    if (data = ThreadHiding.db.get({boardID: this.board.ID, threadID: this.ID})) {\n      return ThreadHiding.hide(this.thread, data.makeStub);\n    }\n  },\n\n  onIndexRefresh() {\n    return g.BOARD.threads.forEach(function(thread) {\n      const {root} = thread.nodes;\n      if (thread.isHidden && thread.stub && !root.contains(thread.stub)) {\n        return ThreadHiding.makeStub(thread, root);\n      }\n    });\n  },\n\n  menu: {\n    init() {\n      if ((g.VIEW !== 'index') || !Conf['Menu'] || !Conf['Thread Hiding Link']) { return; }\n\n      let div = $.el('div', {\n        className: 'hide-thread-link',\n        textContent: 'Hide'\n      }\n      );\n\n      const apply = $.el('a', {\n        textContent: 'Apply',\n        href: 'javascript:;'\n      }\n      );\n      $.on(apply, 'click', ThreadHiding.menu.hide);\n\n      const makeStub = UI.checkbox('Stubs', 'Make stub');\n\n      Menu.menu.addEntry({\n        el: div,\n        order: 20,\n        open({thread, isReply}) {\n          if (isReply || thread.isHidden || (Conf['JSON Index'] && (Conf['Index Mode'] === 'catalog'))) {\n            return false;\n          }\n          ThreadHiding.menu.thread = thread;\n          return true;\n        },\n        subEntries: [{el: apply}, {el: makeStub}]});\n\n      div = $.el('a', {\n        className: 'show-thread-link',\n        textContent: 'Show',\n        href: 'javascript:;'\n      }\n      );\n      $.on(div, 'click', ThreadHiding.menu.show);\n\n      Menu.menu.addEntry({\n        el: div,\n        order: 20,\n        open({thread, isReply}) {\n          if (isReply || !thread.isHidden || (Conf['JSON Index'] && (Conf['Index Mode'] === 'catalog'))) {\n            return false;\n          }\n          ThreadHiding.menu.thread = thread;\n          return true;\n        }\n      });\n\n      const hideStubLink = $.el('a', {\n        textContent: 'Hide stub',\n        href: 'javascript:;'\n      }\n      );\n      $.on(hideStubLink, 'click', ThreadHiding.menu.hideStub);\n\n      return Menu.menu.addEntry({\n        el: hideStubLink,\n        order: 15,\n        open({thread, isReply}) {\n          if (isReply || !thread.isHidden || (Conf['JSON Index'] && (Conf['Index Mode'] === 'catalog'))) {\n            return false;\n          }\n          return ThreadHiding.menu.thread = thread;\n        }\n      });\n    },\n\n    hide() {\n      const makeStub = $('input', this.parentNode).checked;\n      const {thread} = ThreadHiding.menu;\n      ThreadHiding.hide(thread, makeStub);\n      ThreadHiding.saveHiddenState(thread, makeStub);\n      return $.event('CloseMenu');\n    },\n\n    show() {\n      const {thread} = ThreadHiding.menu;\n      ThreadHiding.show(thread);\n      ThreadHiding.saveHiddenState(thread);\n      return $.event('CloseMenu');\n    },\n\n    hideStub() {\n      const {thread} = ThreadHiding.menu;\n      ThreadHiding.show(thread);\n      ThreadHiding.hide(thread, false);\n      ThreadHiding.saveHiddenState(thread, false);\n      $.event('CloseMenu');\n    }\n  },\n\n  makeButton(thread, type) {\n    const a = $.el('a', {\n      className: `${type}-thread-button`,\n      href:      'javascript:;'\n    }\n    );\n    $.extend(a, {textContent: type === \"hide\" ? '' : '' });\n    a.dataset.fullID = thread.fullID;\n    $.on(a, 'click', ThreadHiding.toggle);\n    return a;\n  },\n\n  makeStub(thread, root) {\n    let summary, threadDivider;\n    let numReplies  = $$(g.SITE.selectors.replyOriginal, root).length;\n    if (summary = $(g.SITE.selectors.summary, root)) { numReplies += +summary.textContent.match(/\\d+/); }\n\n    const a = ThreadHiding.makeButton(thread, 'show');\n    $.add(a, $.tn(` ${thread.OP.info.nameBlock} (${numReplies === 1 ? '1 reply' : `${numReplies} replies`})`));\n    thread.stub = $.el('div',\n      {className: 'stub'});\n    if (Conf['Menu']) {\n      $.add(thread.stub, [a, Menu.makeButton(thread.OP)]);\n    } else {\n      $.add(thread.stub, a);\n    }\n    $.prepend(root, thread.stub);\n\n    // Prevent hiding of thread divider on sites that put it inside the thread\n    if (threadDivider = $(g.SITE.selectors.threadDivider, root)) {\n      return $.addClass(threadDivider, 'threadDivider');\n    }\n  },\n\n  saveHiddenState(thread, makeStub) {\n    if (thread.isHidden) {\n      ThreadHiding.db.set({\n        boardID:  thread.board.ID,\n        threadID: thread.ID,\n        val: {makeStub}});\n    } else {\n      ThreadHiding.db.delete({\n        boardID:  thread.board.ID,\n        threadID: thread.ID\n      });\n    }\n    return ThreadHiding.catalogSet(thread.board);\n  },\n\n  toggle(thread) {\n    if (!(thread instanceof Thread)) {\n      thread = g.threads.get(this.dataset.fullID);\n    }\n    if (thread.isHidden) {\n      ThreadHiding.show(thread);\n    } else {\n      ThreadHiding.hide(thread);\n    }\n    return ThreadHiding.saveHiddenState(thread);\n  },\n\n  hide(thread, makeStub=Conf['Stubs']) {\n    if (thread.isHidden) { return; }\n    const threadRoot = thread.nodes.root;\n    thread.isHidden = true;\n    Index.updateHideLabel();\n    if (thread.catalogView && !Index.showHiddenThreads) {\n      $.rm(thread.catalogView.nodes.root);\n      $.event('PostsRemoved', null, Index.root);\n    }\n\n    if (!makeStub) { return threadRoot.hidden = true; }\n\n    return ThreadHiding.makeStub(thread, threadRoot);\n  },\n\n  show(thread) {\n    if (thread.stub) {\n      $.rm(thread.stub);\n      delete thread.stub;\n    }\n    const threadRoot = thread.nodes.root;\n    threadRoot.hidden = (thread.isHidden = false);\n    Index.updateHideLabel();\n    if (thread.catalogView && Index.showHiddenThreads) {\n      $.rm(thread.catalogView.nodes.root);\n      return $.event('PostsRemoved', null, Index.root);\n    }\n  }\n};\nexport default ThreadHiding;\n",null,null,null,"import $ from \"../platform/$\";\nimport CSS from \"../css/CSS\";\nimport { Conf } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst CustomCSS = {\n  init() {\n    if (!Conf['Custom CSS']) { return; }\n    return this.addStyle();\n  },\n\n  addStyle() {\n    return this.style = $.addStyle(CSS.sub(Conf['usercss']), 'custom-css', '#fourchanx-css');\n  },\n\n  rmStyle() {\n    if (this.style) {\n      $.rm(this.style);\n      return delete this.style;\n    }\n  },\n\n  update() {\n    if (!this.style) {\n      return this.addStyle();\n    }\n    return this.style.textContent = CSS.sub(Conf['usercss']);\n  }\n};\nexport default CustomCSS;\n","import { Conf, d } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst SWTinyboard = {\n  isOPContainerThread: true,\n  mayLackJSON: true,\n  threadModTimeIgnoresSage: true,\n\n  disabledFeatures: [\n    'Resurrect Quotes',\n    'Quick Reply Personas',\n    'Quick Reply',\n    'Cooldown',\n    'Report Link',\n    'Delete Link',\n    'Edit Link',\n    'Quote Inlining',\n    'Quote Previewing',\n    'Quote Backlinks',\n    'File Info Formatting',\n    'Image Expansion',\n    'Image Expansion (Menu)',\n    'Comment Expansion',\n    'Thread Expansion',\n    'Favicon',\n    'Quote Threading',\n    'Thread Updater',\n    'Banner',\n    'Flash Features',\n    'Reply Pruning'\n  ],\n\n  detect() {\n    for (var script of $$('script:not([src])', d.head)) {\n      var m;\n      if (m = script.textContent.match(/\\bvar configRoot=(\".*?\")/)) {\n        var properties = dict();\n        try {\n          var root = JSON.parse(m[1]);\n          if (root[0] === '/') {\n            properties.root = location.origin + root;\n          } else if (/^https?:/.test(root)) {\n            properties.root = root;\n          }\n        } catch (error) {}\n        return properties;\n      }\n    }\n    return false;\n  },\n\n  awaitBoard(cb) {\n    let reactUI;\n    if (reactUI = $.id('react-ui')) {\n      const s = (this.selectors = Object.create(this.selectors));\n      s.boardFor = {index: '.page-container'};\n      s.thread = 'div[id^=\"thread_\"]';\n      return Main.mounted(cb);\n    } else {\n      return cb();\n    }\n  },\n\n  urls: {\n    thread({siteID, boardID, threadID}, isArchived) {\n      return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/${isArchived ? 'archive/' : ''}res/${threadID}.html`;\n    },\n    post({postID})                   { return `#${postID}`; },\n    index({siteID, boardID})          { return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/`; },\n    catalog({siteID, boardID})          { return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/catalog.html`; },\n    threadJSON({siteID, boardID, threadID}, isArchived) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/${isArchived ? 'archive/' : ''}res/${threadID}.json`; } else { return ''; }\n    },\n    archivedThreadJSON(thread) {\n      return SWTinyboard.urls.threadJSON(thread, true);\n    },\n    threadsListJSON({siteID, boardID}) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/threads.json`; } else { return ''; }\n    },\n    archiveListJSON({siteID, boardID}) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/archive/archive.json`; } else { return ''; }\n    },\n    catalogJSON({siteID, boardID}) {\n      const root = Conf['siteProperties'][siteID]?.root;\n      if (root) { return `${root}${boardID}/catalog.json`; } else { return ''; }\n    },\n    file({siteID, boardID}, filename) {\n      return `${Conf['siteProperties'][siteID]?.root || `http://${siteID}/`}${boardID}/${filename}`;\n    },\n    thumb(board, filename) {\n      return SWTinyboard.urls.file(board, filename);\n    }\n  },\n\n  selectors: {\n    board:         'form[name=\"postcontrols\"]',\n    thread:        'input[name=\"board\"] ~ div[id^=\"thread_\"]',\n    threadDivider: 'div[id^=\"thread_\"] > hr:last-child',\n    summary:       '.omitted',\n    postContainer: 'div[id^=\"reply_\"]:not(.hidden)', // postContainer is thread for OP\n    opBottom:      '.op',\n    replyOriginal: 'div[id^=\"reply_\"]:not(.hidden)',\n    infoRoot:      '.intro',\n    info: {\n      subject:   '.subject',\n      name:      '.name',\n      email:     '.email',\n      tripcode:  '.trip',\n      uniqueID:  '.poster_id',\n      capcode:   '.capcode',\n      flag:      '.flag',\n      date:      'time',\n      nameBlock: 'label',\n      quote:     'a[href*=\"#q\"]',\n      reply:     'a[href*=\"/res/\"]:not([href*=\"#\"])'\n    },\n    icons: {\n      isSticky:   '.fa-thumb-tack',\n      isClosed:   '.fa-lock'\n    },\n    file: {\n      text:  '.fileinfo',\n      link:  '.fileinfo > a',\n      thumb: 'a > .post-image'\n    },\n    thumbLink: '.file > a',\n    multifile: '.files > .file',\n    highlightable: {\n      op:      ' > .op',\n      reply:   '.reply',\n      catalog: ' > .thread'\n    },\n    comment:   '.body',\n    spoiler:   '.spoiler',\n    quotelink: 'a[onclick*=\"highlightReply(\"]',\n    catalog: {\n      board:  '#Grid',\n      thread: '.mix',\n      thumb:  '.thread-image'\n    },\n    boardList: '.boardlist',\n    boardListBottom: '.boardlist.bottom',\n    styleSheet: '#stylesheet',\n    psa:       '.blotter',\n    nav: {\n      prev: '.pages > form > [value=Previous]',\n      next: '.pages > form > [value=Next]'\n    }\n  },\n\n  classes: {\n    highlight: 'highlighted'\n  },\n\n  xpath: {\n    thread:         'div[starts-with(@id,\"thread_\")]',\n    postContainer:  'div[starts-with(@id,\"reply_\") or starts-with(@id,\"thread_\")]',\n    replyContainer: 'div[starts-with(@id,\"reply_\")]'\n  },\n\n  regexp: {\n    quotelink:\n      new RegExp(`\\\n/\\\n([^/]+)\\\n/res/\\\n(\\\\d+)\\\n(?:\\\\.\\\\w+)?#\\\n(\\\\d+)\\\n$\\\n`),\n    quotelinkHTML:\n      /<a [^>]*\\bhref=\"[^\"]*\\/([^\\/]+)\\/res\\/(\\d+)(?:\\.\\w+)?#(\\d+)\"/g\n  },\n\n  Build: {\n    parseJSON(data, board) {\n      const o = this.parseJSON(data, board);\n      if (data.ext === 'deleted') {\n        delete o.file;\n        $.extend(o, {\n          files: [],\n          fileDeleted: true,\n          filesDeleted: [0]\n        });\n      }\n      if (data.extra_files) {\n        let file;\n        for (let i = 0; i < data.extra_files.length; i++) {\n          var extra_file = data.extra_files[i];\n          if (extra_file.ext === 'deleted') {\n            o.filesDeleted.push(i);\n          } else {\n            file = this.parseJSONFile(data, board);\n            o.files.push(file);\n          }\n        }\n        if (o.files.length) {\n          o.file = o.files[0];\n        }\n      }\n      return o;\n    },\n\n    parseComment(html) {\n      html = html\n        .replace(/<br\\b[^<]*>/gi, '\\n')\n        .replace(/<[^>]*>/g, '');\n      return $.unescape(html);\n    }\n  },\n\n  bgColoredEl() {\n    return $.el('div', {className: 'post reply'});\n  },\n\n  isFileURL(url) {\n    return /\\/src\\/[^\\/]+/.test(url.pathname);\n  },\n\n  preParsingFixes(board) {\n    // fixes effects of unclosed link in announcement\n    let broken;\n    if (broken = $('a > input[name=\"board\"]', board)) {\n      return $.before(broken.parentNode, broken);\n    }\n  },\n\n  parseNodes(post, nodes) {\n    // Add vichan's span.poster_id around the ID if not already present.\n    let m;\n    if (nodes.uniqueID) { return; }\n    let text = '';\n    let node = nodes.nameBlock.nextSibling;\n    while (node && (node.nodeType === 3)) {\n      text += node.textContent;\n      node = node.nextSibling;\n    }\n    if (m = text.match(/(\\s*ID:\\s*)(\\S+)/)) {\n      let uniqueID;\n      nodes.info.normalize();\n      let {nextSibling} = nodes.nameBlock;\n      nextSibling = nextSibling.splitText(m[1].length);\n      nextSibling.splitText(m[2].length);\n      nodes.uniqueID = (uniqueID = $.el('span', {className: 'poster_id'}));\n      $.replace(nextSibling, uniqueID);\n      return $.add(uniqueID, nextSibling);\n    }\n  },\n\n  parseDate(node) {\n    let date = Date.parse(node.getAttribute('datetime')?.trim());\n    if (!isNaN(date)) { return new Date(date); }\n    date = Date.parse(node.textContent.trim() + ' UTC'); // e.g. onesixtwo.club\n    if (!isNaN(date)) { return new Date(date); }\n    return undefined;\n  },\n\n  parseFile(post, file) {\n    let info, infoNode;\n    const {text, link, thumb} = file;\n    if ($.x(`ancestor::${this.xpath.postContainer}[1]`, text) !== post.nodes.root) { return false; } // file belongs to a reply\n    if (!(infoNode = link.nextSibling?.textContent.includes('(') ? link.nextSibling : link.nextElementSibling)) { return false; }\n    if (!(info = infoNode.textContent.match(/\\((.*,\\s*)?([\\d.]+ ?[KMG]?B).*\\)/))) { return false; }\n    const nameNode = $('.postfilename', text);\n    $.extend(file, {\n      name:       nameNode ? (nameNode.title || nameNode.textContent) : link.pathname.match(/[^/]*$/)[0],\n      size:       info[2],\n      dimensions: info[0].match(/\\d+x\\d+/)?.[0]\n    });\n    if (thumb) {\n      $.extend(file, {\n        thumbURL:  /\\/static\\//.test(thumb.src) && $.isImage(link.href) ? link.href : thumb.src,\n        isSpoiler: /^Spoiler/i.test(info[1] || '') || (link.textContent === 'Spoiler Image')\n      }\n      );\n    }\n    return true;\n  },\n\n  isThumbExpanded(file) {\n    // Detect old Tinyboard image expansion that changes src attribute on thumbnail.\n    return $.hasClass(file.thumb.parentNode, 'expanded') || (file.thumb.parentNode.dataset.expanded === 'true');\n  },\n\n  isLinkified(link) {\n    return /\\bnofollow\\b/.test(link.rel);\n  },\n\n  catalogPin(threadRoot) {\n    return threadRoot.dataset.sticky = 'true';\n  }\n};\nexport default SWTinyboard;\n",null,"import { Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport PassMessagePage from './PassMessage/PassMessageHtml';\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nconst PassMessage = {\n  init() {\n    if (Conf['passMessageClosed']) { return; }\n    const msg = $.el('div',\n      {className: 'box-outer top-box'}\n    ,\n      PassMessagePage);\n    msg.style.cssText = 'padding-bottom: 0;';\n    const close = $('a', msg);\n    $.on(close, 'click', function() {\n      $.rm(msg);\n      return $.set('passMessageClosed', true);\n    });\n    return $.ready(function() {\n      let hd;\n      if (hd = $.id('hd')) {\n        return $.after(hd, msg);\n      } else {\n        return $.prepend(d.body, msg);\n      }\n    });\n  }\n};\nexport default PassMessage;\n","import Redirect from \"../Archive/Redirect\";\nimport $ from \"../platform/$\";\nimport ReportPage from './Report/ArchiveReport.html';\nimport CSS from \"../css/CSS\";\nimport Captcha from \"../Posting/Captcha\";\nimport { Conf, d, g } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar Report = {\n  init() {\n    let match;\n    if (!(match = location.search.match(/\\bno=(\\d+)/))) { return; }\n    Captcha.replace.init();\n    this.postID = +match[1];\n    return $.ready(this.ready);\n  },\n\n  ready() {\n    $.addStyle(CSS.report);\n\n    if (Conf['Archive Report']) { Report.archive(); }\n\n    new MutationObserver(function() {\n      Report.fit('iframe[src^=\"https://www.google.com/recaptcha/api2/frame\"]');\n      return Report.fit('body');\n    }).observe(d.body, {\n      childList:  true,\n      attributes: true,\n      subtree:    true\n    }\n    );\n    return Report.fit('body');\n  },\n\n  fit(selector) {\n    let el;\n    if (!((el = $(selector, doc)) && (getComputedStyle(el).visibility !== 'hidden'))) { return; }\n    const dy = (el.getBoundingClientRect().bottom - doc.clientHeight) + 8;\n    if (dy > 0) { return window.resizeBy(0, dy); }\n  },\n\n  archive() {\n    let match, urls;\n    if (!(urls = Redirect.report(g.BOARD.ID)).length) { return; }\n\n    const form    = $('form');\n    const types   = $.id('reportTypes');\n    const message = $('h3');\n\n    const fieldset = $.el('fieldset', {\n      id: 'archive-report',\n      hidden: true\n    }\n    ,\n      { innerHTML: ReportPage });\n    const enabled = $('#archive-report-enabled', fieldset);\n    const reason  = $('#archive-report-reason',  fieldset);\n    const submit  = $('#archive-report-submit',  fieldset);\n\n    $.on(enabled, 'change', function() {\n      return reason.disabled = !this.checked;\n    });\n\n    if (form && types) {\n      fieldset.hidden = !$('[value=\"31\"]', types).checked;\n      $.on(types, 'change', function(e) {\n        fieldset.hidden = (e.target.value !== '31');\n        return Report.fit('body');\n      });\n      $.after(types, fieldset);\n      Report.fit('body');\n      $.one(form, 'submit', function(e) {\n        if (!fieldset.hidden && enabled.checked) {\n          e.preventDefault();\n          return Report.archiveSubmit(urls, reason.value, results => {\n            this.action = '#archiveresults=' + encodeURIComponent(JSON.stringify(results));\n            return this.submit();\n          });\n        }\n      });\n    } else if (message) {\n      fieldset.hidden = /Report submitted!/.test(message.textContent);\n      $.on(enabled, 'change', function() {\n        return submit.hidden = !this.checked;\n      });\n      $.after(message, fieldset);\n      $.on(submit, 'click', () => Report.archiveSubmit(urls, reason.value, Report.archiveResults));\n    }\n\n    if (match = location.hash.match(/^#archiveresults=(.*)$/)) {\n      try {\n        return Report.archiveResults(JSON.parse(decodeURIComponent(match[1])));\n      } catch (error) {}\n    }\n  },\n\n  archiveSubmit(urls, reason, cb) {\n    const form = $.formData({\n      board:  g.BOARD.ID,\n      num:    Report.postID,\n      reason\n    });\n    const results = [];\n    for (var [name, url] of urls) {\n      (function(name, url) {\n        return $.ajax(url, {\n          onloadend() {\n            results.push([name, this.response || {error: ''}]);\n            if (results.length === urls.length) {\n              return cb(results);\n            }\n          },\n          form\n        });\n      })(name, url);\n    }\n  },\n\n  archiveResults(results) {\n    const fieldset = $.id('archive-report');\n    for (var [name, response] of results) {\n      var line = $.el('h3',\n        {className: 'archive-report-response'});\n      if ('success' in response) {\n        $.addClass(line, 'archive-report-success');\n        line.textContent = `${name}: ${response.success}`;\n      } else {\n        $.addClass(line, 'archive-report-error');\n        line.textContent = `${name}: ${response.error || 'Error reporting post.'}`;\n      }\n      if (fieldset) {\n        $.before(fieldset, line);\n      } else {\n        $.add(d.body, line);\n      }\n    }\n  }\n};\nexport default Report;\n","import DataBoard from \"../classes/DataBoard\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PostSuccessful = {\n  init() {\n    if (!Conf['Remember Your Posts']) { return; }\n    return $.ready(this.ready);\n  },\n\n  ready() {\n    if (d.title !== 'Post successful!') { return; }\n\n    let [_, threadID, postID] = $('h1').nextSibling.textContent.match(/thread:(\\d+),no:(\\d+)/);\n    postID   = +postID;\n    threadID = +threadID || postID;\n\n    const db = new DataBoard('yourPosts');\n    return db.set({\n      boardID: g.BOARD.ID,\n      threadID,\n      postID,\n      val: true\n    });\n  }\n};\nexport default PostSuccessful;\n",null,null,null,null,"import SWTinyboard from \"./SW.tinyboard\";\nimport SWYotsuba from \"./SW.yotsuba\";\n\nconst SW = { tinyboard: SWTinyboard, yotsuba: SWYotsuba };\nexport default SW;\n",null,null,"import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, E, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport QuoteThreading from \"../Quotelinks/QuoteThreading\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ReplyPruning = {\n  init() {\n    if ((g.VIEW !== 'thread') || !Conf['Reply Pruning']) { return; }\n\n    this.container = $.frag();\n\n    this.summary = $.el('span', {\n      hidden:    true,\n      className: 'summary'\n    }\n    );\n    this.summary.style.cursor = 'pointer';\n    $.on(this.summary, 'click', () => {\n      this.inputs.enabled.checked = !this.inputs.enabled.checked;\n      return $.event('change', null, this.inputs.enabled);\n    });\n\n    const label = UI.checkbox('Prune Replies', 'Show Last', Conf['Prune All Threads']);\n    const el = $.el('span',\n      {title: 'Maximum number of replies to show.'}\n    ,\n      {innerHTML: \" <input type=\\\"number\\\" name=\\\"Max Replies\\\" min=\\\"0\\\" step=\\\"1\\\" value=\\\"\" + E(Conf[\"Max Replies\"]) + \"\\\" class=\\\"field\\\">\"});\n    $.prepend(el, label);\n\n    this.inputs = {\n      enabled: label.firstElementChild,\n      replies: el.lastElementChild\n    };\n\n    this.setEnabled.call(this.inputs.enabled);\n    $.on(this.inputs.enabled, 'change', this.setEnabled);\n    $.on(this.inputs.replies, 'change', $.cb.value);\n\n    Header.menu.addEntry({\n      el,\n      order: 190\n    });\n\n    return Callbacks.Thread.push({\n      name: 'Reply Pruning',\n      cb:   this.node\n    });\n  },\n\n  position: 0,\n  hidden: 0,\n  hiddenFiles: 0,\n  total: 0,\n  totalFiles: 0,\n\n  setEnabled() {\n    const other = QuoteThreading.input;\n    if (this.checked && other?.checked) {\n      other.checked = false;\n      $.event('change', null, other);\n    }\n    return ReplyPruning.active = this.checked;\n  },\n\n  showIfHidden(id) {\n    if (ReplyPruning.container && $(`#${id}`, ReplyPruning.container)) {\n      ReplyPruning.inputs.enabled.checked = false;\n      return $.event('change', null, ReplyPruning.inputs.enabled);\n    }\n  },\n\n  node() {\n    let middle;\n    ReplyPruning.thread = this;\n\n    if (this.isSticky) {\n      ReplyPruning.active = (ReplyPruning.inputs.enabled.checked = true);\n      if (QuoteThreading.input) {\n        // Disable Quote Threading for this thread but don't save the setting.\n        Conf['Thread Quotes'] = (QuoteThreading.input.checked = false);\n      }\n    }\n\n    this.posts.forEach(function(post) {\n      if (post.isReply) {\n        ReplyPruning.total++;\n        if (post.file) { return ReplyPruning.totalFiles++; }\n      }\n    });\n\n    // If we're linked to a post that we would hide, don't hide the posts in the first place.\n    if (\n      ReplyPruning.active &&\n      /^#p\\d+$/.test(location.hash) &&\n      (1 <= (middle = this.posts.keys.indexOf(location.hash.slice(2))) && middle < 1 + Math.max(ReplyPruning.total - +Conf[\"Max Replies\"], 0))\n    ) {\n      ReplyPruning.active = (ReplyPruning.inputs.enabled.checked = false);\n    }\n\n    $.after(this.OP.nodes.root, ReplyPruning.summary);\n\n    $.on(ReplyPruning.inputs.enabled, 'change', ReplyPruning.update);\n    $.on(ReplyPruning.inputs.replies, 'change', ReplyPruning.update);\n    $.on(d, 'ThreadUpdate', ReplyPruning.updateCount);\n    $.on(d, 'ThreadUpdate', ReplyPruning.update);\n\n    return ReplyPruning.update();\n  },\n\n  updateCount(e) {\n    if (e.detail[404]) { return; }\n    for (var fullID of e.detail.newPosts) {\n      ReplyPruning.total++;\n      if (g.posts.get(fullID).file) { ReplyPruning.totalFiles++; }\n    }\n  },\n\n  update() {\n    let boardTop, node, post;\n    const hidden1 = ReplyPruning.hidden;\n    const hidden2 = ReplyPruning.active ?\n      Math.max(ReplyPruning.total - +Conf[\"Max Replies\"], 0)\n    :\n      0;\n\n    // Record position from bottom of document\n    const oldPos = d.body.clientHeight - window.scrollY;\n\n    const {posts} = ReplyPruning.thread;\n\n    if (ReplyPruning.hidden < hidden2) {\n      while ((ReplyPruning.hidden < hidden2) && (ReplyPruning.position < posts.keys.length)) {\n        post = posts.get(posts.keys[ReplyPruning.position++]);\n        if (post.isReply && !post.isFetchedQuote) {\n          while ((node = ReplyPruning.summary.nextSibling) && (node !== post.nodes.root)) { $.add(ReplyPruning.container, node); }\n          $.add(ReplyPruning.container, post.nodes.root);\n          ReplyPruning.hidden++;\n          if (post.file) { ReplyPruning.hiddenFiles++; }\n        }\n      }\n\n    } else if (ReplyPruning.hidden > hidden2) {\n      const frag = $.frag();\n      while ((ReplyPruning.hidden > hidden2) && (ReplyPruning.position > 0)) {\n        post = posts.get(posts.keys[--ReplyPruning.position]);\n        if (post.isReply && !post.isFetchedQuote) {\n          while ((node = ReplyPruning.container.lastChild) && (node !== post.nodes.root)) { $.prepend(frag, node); }\n          $.prepend(frag, post.nodes.root);\n          ReplyPruning.hidden--;\n          if (post.file) { ReplyPruning.hiddenFiles--; }\n        }\n      }\n      $.after(ReplyPruning.summary, frag);\n      $.event('PostsInserted', null, ReplyPruning.summary.parentNode);\n    }\n\n    ReplyPruning.summary.textContent = ReplyPruning.active ?\n      g.SITE.Build.summaryText('+', ReplyPruning.hidden, ReplyPruning.hiddenFiles)\n    :\n      g.SITE.Build.summaryText('-', ReplyPruning.total, ReplyPruning.totalFiles);\n    ReplyPruning.summary.hidden = (ReplyPruning.total <= +Conf[\"Max Replies\"]);\n\n    // Maintain position in thread when posts are added/removed above\n    if ((hidden1 !== hidden2) && ((boardTop = Header.getTopOf($('.board'))) < 0)) {\n      return window.scrollBy(0, Math.max(d.body.clientHeight - oldPos, window.scrollY + boardTop) - window.scrollY);\n    }\n  }\n};\nexport default ReplyPruning;\n","import Callbacks from \"../classes/Callbacks\";\nimport RandomAccessList from \"../classes/RandomAccessList\";\nimport Header from \"../General/Header\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport ReplyPruning from \"../Monitoring/ReplyPruning\";\nimport Unread from \"../Monitoring/Unread\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n/*\n  <3 aeosynth\n*/\n\nvar QuoteThreading = {\n  init() {\n    if (!Conf['Quote Threading'] || (g.VIEW !== 'thread')) { return; }\n\n    this.controls = $.el('label',\n      {innerHTML: \"<input id=\\\"threadingControl\\\" name=\\\"Thread Quotes\\\" type=\\\"checkbox\\\"> Threading\"});\n\n    this.threadNewLink = $.el('span', {\n      className: 'brackets-wrap threadnewlink',\n      hidden: true\n    }\n    );\n    $.extend(this.threadNewLink, {innerHTML: \"<a href=\\\"javascript:;\\\">Thread New Posts</a>\"});\n\n    this.input = $('input', this.controls);\n    this.input.checked = Conf['Thread Quotes'];\n\n    $.on(this.input, 'change', this.setEnabled);\n    $.on(this.input, 'change', this.rethread);\n    $.on(this.threadNewLink.firstElementChild, 'click', this.rethread);\n    $.on(d, '4chanXInitFinished', () => { return this.ready = true; });\n\n    Header.menu.addEntry(this.entry = {\n      el:    this.controls,\n      order: 99\n    }\n    );\n\n    Callbacks.Thread.push({\n      name: 'Quote Threading',\n      cb:   this.setThread\n    });\n\n    return Callbacks.Post.push({\n      name: 'Quote Threading',\n      cb:   this.node\n    });\n  },\n\n  parent:   dict(),\n  children: dict(),\n  inserted: dict(),\n\n  toggleThreading() {\n    return this.setThreadingState(!Conf['Thread Quotes']);\n  },\n\n  setThreadingState(enabled) {\n    this.input.checked = enabled;\n    this.setEnabled.call(this.input);\n    return this.rethread.call(this.input);\n  },\n\n  setEnabled() {\n    if (this.checked) {\n      $.set('Prune All Threads', false);\n      const other = ReplyPruning.inputs?.enabled;\n      if (other?.checked) {\n        other.checked = false;\n        $.event('change', null, other);\n      }\n    }\n    return $.cb.checked.call(this);\n  },\n\n  setThread() {\n    QuoteThreading.thread = this;\n    return $.asap((() => !Conf['Thread Updater'] || $('.navLinksBot > .updatelink')), function() {\n      let navLinksBot;\n      if (navLinksBot = $('.navLinksBot')) { return $.add(navLinksBot, [$.tn(' '), QuoteThreading.threadNewLink]); }\n    });\n  },\n\n  node() {\n    let parent;\n    if (this.isFetchedQuote || this.isClone || !this.isReply) { return; }\n\n    const parents = new Set();\n    let lastParent = null;\n    for (var quote of this.quotes) {\n      if ((parent = g.posts.get(quote))) {\n        if (!parent.isFetchedQuote && parent.isReply && (parent.ID < this.ID)) {\n          parents.add(parent.ID);\n          if (!lastParent || (parent.ID > lastParent.ID)) { lastParent = parent; }\n        }\n      }\n    }\n\n    if (!lastParent) { return; }\n\n    let ancestor = lastParent;\n    while ((ancestor = QuoteThreading.parent[ancestor.fullID])) {\n      parents.delete(ancestor.ID);\n    }\n\n    if (parents.size === 1) {\n      return QuoteThreading.parent[this.fullID] = lastParent;\n    }\n  },\n\n  descendants(post) {\n    let children;\n    let posts = [post];\n    if (children = QuoteThreading.children[post.fullID]) {\n      for (var child of children) {\n        posts = posts.concat(QuoteThreading.descendants(child));\n      }\n    }\n    return posts;\n  },\n\n  insert(post) {\n    let parent, x;\n    if (!(\n      Conf['Thread Quotes'] &&\n      (parent = QuoteThreading.parent[post.fullID]) &&\n      !QuoteThreading.inserted[post.fullID]\n    )) { return false; }\n\n    const descendants = QuoteThreading.descendants(post);\n    if (!Unread.posts.has(parent.ID)) {\n      if ((function() { for (var x of descendants) { if (Unread.posts.has(x.ID)) { return true; } } })()) {\n        QuoteThreading.threadNewLink.hidden = false;\n        return false;\n      }\n    }\n\n    const {order} = Unread;\n    const children = (QuoteThreading.children[parent.fullID] || (QuoteThreading.children[parent.fullID] = []));\n    const threadContainer = parent.nodes.threadContainer || $.el('div', {className: 'threadContainer'});\n    const nodes = [post.nodes.root];\n    if (post.nodes.threadContainer) { nodes.push(post.nodes.threadContainer); }\n\n    let i = children.length;\n    for (let j = children.length - 1; j >= 0; j--) { var child = children[j]; if (child.ID >= post.ID) { i--; } }\n    if (i !== children.length) {\n      const next = children[i];\n      for (x of descendants) { order.before(order[next.ID], order[x.ID]); }\n      children.splice(i, 0, post);\n      $.before(next.nodes.root, nodes);\n    } else {\n      let prev2;\n      let prev = parent;\n      while ((prev2 = QuoteThreading.children[prev.fullID]) && prev2.length) {\n        prev = prev2[prev2.length-1];\n      }\n      for (let k = descendants.length - 1; k >= 0; k--) { x = descendants[k]; order.after(order[prev.ID], order[x.ID]); }\n      children.push(post);\n      $.add(threadContainer, nodes);\n    }\n\n    QuoteThreading.inserted[post.fullID] = true;\n\n    if (!parent.nodes.threadContainer) {\n      parent.nodes.threadContainer = threadContainer;\n      $.addClass(parent.nodes.root, 'threadOP');\n      $.after(parent.nodes.root, threadContainer);\n    }\n\n    return true;\n  },\n\n  rethread() {\n    if (!QuoteThreading.ready) { return; }\n    const {thread} = QuoteThreading;\n    const {posts} = thread;\n\n    QuoteThreading.threadNewLink.hidden = true;\n\n    if (Conf['Thread Quotes']) {\n      posts.forEach(QuoteThreading.insert);\n    } else {\n      const nodes = [];\n      Unread.order = new RandomAccessList();\n      QuoteThreading.inserted = dict();\n      posts.forEach(function(post) {\n        if (post.isFetchedQuote) { return; }\n        Unread.order.push(post);\n        if (post.isReply) { nodes.push(post.nodes.root); }\n        if (QuoteThreading.children[post.fullID]) {\n          delete QuoteThreading.children[post.fullID];\n          $.rmClass(post.nodes.root, 'threadOP');\n          $.rm(post.nodes.threadContainer);\n          return delete post.nodes.threadContainer;\n        }\n      });\n      $.add(thread.nodes.root, nodes);\n    }\n\n    Unread.position = Unread.order.first;\n    Unread.updatePosition();\n    Unread.setLine(true);\n    Unread.read();\n    return Unread.update();\n  }\n};\nexport default QuoteThreading;\n",null,null,"import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { Conf, doc, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar FappeTyme = {\n  init() {\n    if ((!Conf['Fappe Tyme'] && !Conf['Werk Tyme']) || !['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n\n    this.nodes = {};\n    this.enabled = {\n      fappe: false,\n      werk:  Conf['werk']\n    };\n\n    for (var type of [\"Fappe\", \"Werk\"]) {\n      if (Conf[`${type} Tyme`]) {\n        var lc = type.toLowerCase();\n        var el = UI.checkbox(lc, `${type} Tyme`, false);\n        el.title = `${type} Tyme`;\n\n        this.nodes[lc] = el.firstElementChild;\n        if (Conf[lc]) { this.set(lc, true); }\n        $.on(this.nodes[lc], 'change', this.toggle.bind(this, lc));\n\n        Header.menu.addEntry({\n          el,\n          order: 97\n        });\n\n        var indicator = $.el('span', {\n          className: 'indicator',\n          textContent: type[0],\n          title: `${type} Tyme active`\n        }\n        );\n        $.on(indicator, 'click', function() {\n          const check = $.getOwn(FappeTyme.nodes, this.parentNode.id.replace('shortcut-', ''));\n          check.checked = !check.checked;\n          return $.event('change', null, check);\n        });\n        Header.addShortcut(lc, indicator, 410);\n      }\n    }\n\n    if (Conf['Werk Tyme']) {\n      $.sync('werk', this.set.bind(this, 'werk'));\n    }\n\n    Callbacks.Post.push({\n      name: 'Fappe Tyme',\n      cb:   this.node\n    });\n\n    return Callbacks.CatalogThread.push({\n      name: 'Werk Tyme',\n      cb:   this.catalogNode\n    });\n  },\n\n  node() {\n    return this.nodes.root.classList.toggle('noFile', !this.files.length);\n  },\n\n  catalogNode() {\n    const file = this.thread.OP.files[0];\n    if (!file) { return; }\n    const filename = $.el('div', {\n      textContent: file.name,\n      className:   'werkTyme-filename'\n    }\n    );\n    return $.add(this.nodes.thumb.parentNode, filename);\n  },\n\n  set(type, enabled) {\n    this.enabled[type] = (this.nodes[type].checked = enabled);\n    return $[`${enabled ? 'add' : 'rm'}Class`](doc, `${type}Tyme`);\n  },\n\n  toggle(type) {\n    this.set(type, !this.enabled[type]);\n    if (type === 'werk') { return $.cb.checked.call(this.nodes[type]); }\n  }\n};\nexport default FappeTyme;\n","import Callbacks from \"../classes/Callbacks\";\nimport Notice from \"../classes/Notice\";\nimport Filter from \"../Filtering/Filter\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS204: Change includes calls to have a more natural evaluation order\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Sauce = {\n  init() {\n    let link;\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Sauce']) { return; }\n    $.addClass(doc, 'show-sauce');\n\n    const links = [];\n    for (link of Conf['sauces'].split('\\n')) {\n      var linkData;\n      if ((link[0] !== '#') && (linkData = this.parseLink(link))) {\n        links.push(linkData);\n      }\n    }\n    if (!links.length) { return; }\n\n    this.links = links;\n    this.link  = $.el('a', {\n      target:    '_blank',\n      className: 'sauce'\n    }\n    );\n    return Callbacks.Post.push({\n      name: 'Sauce',\n      cb:   this.node\n    });\n  },\n\n  parseLink(link) {\n    if (!(link = link.trim())) { return null; }\n    const parts = dict();\n    const iterable = link.split(/;(?=(?:text|boards|types|regexp|sandbox):?)/);\n    for (let i = 0; i < iterable.length; i++) {\n      var part = iterable[i];\n      if (i === 0) {\n        parts['url'] = part;\n      } else {\n        var m = part.match(/^(\\w*):?(.*)$/);\n        parts[m[1]] = m[2];\n      }\n    }\n    if (!parts['text']) { parts['text'] = parts['url'].match(/(\\w+)\\.\\w+\\//)?.[1] || '?'; }\n    if ('boards' in parts) {\n      parts['boards'] = Filter.parseBoards(parts['boards']);\n    }\n    if ('regexp' in parts) {\n      try {\n        let regexp;\n        if (regexp = parts['regexp'].match(/^\\/(.*)\\/(\\w*)$/)) {\n          parts['regexp'] = RegExp(regexp[1], regexp[2]);\n        } else {\n          parts['regexp'] = RegExp(parts['regexp']);\n        }\n      } catch (err) {\n        new Notice('warning', [\n          $.tn(\"Invalid regexp for Sauce link:\"),\n          $.el('br'),\n          $.tn(link),\n          $.el('br'),\n          $.tn(err.message)\n        ], 60);\n        return null;\n      }\n    }\n    return parts;\n  },\n\n  createSauceLink(link, post, file) {\n    let a, matches, needle;\n    const ext = file.url.match(/[^.]*$/)[0];\n    const parts = dict();\n    $.extend(parts, link);\n\n    if (!!parts['boards'] && !parts['boards'][`${post.siteID}/${post.boardID}`] && !parts['boards'][`${post.siteID}/*`]) { return null; }\n    if (!!parts['types']  && (needle = ext, !parts['types'].split(',').includes(needle))) { return null; }\n    if (!!parts['regexp'] && (!(matches = file.name.match(parts['regexp'])))) { return null; }\n\n    const missing = [];\n    for (var key of ['url', 'text']) {\n      parts[key] = parts[key].replace(/%(T?URL|IMG|[sh]?MD5|board|name|%|semi|\\$\\d+)/g, function(orig, parameter) {\n        let type;\n        if (parameter[0] === '$') {\n          if (!matches) { return orig; }\n          type = matches[parameter.slice(1)] || '';\n        } else {\n          type = Sauce.formatters[parameter](post, file, ext);\n          if ((type == null)) {\n            missing.push(parameter);\n            return '';\n          }\n        }\n\n        if ((key === 'url') && !['%', 'semi'].includes(parameter)) {\n          if (/^javascript:/i.test(parts['url'])) { type = JSON.stringify(type); }\n          type = encodeURIComponent(type);\n        }\n        return type;\n      });\n    }\n\n    if (g.SITE.areMD5sDeferred?.(post.board) && missing.length && !missing.filter(x => !/^.?MD5$/.test(x)).length) {\n      a = Sauce.link.cloneNode(false);\n      a.dataset.skip = '1';\n      return a;\n    }\n\n    if (missing.length) { return null; }\n\n    a = Sauce.link.cloneNode(false);\n    a.href = parts['url'];\n    a.textContent = parts['text'];\n    if (/^javascript:/i.test(parts['url'])) { a.removeAttribute('target'); }\n    return a;\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var file of this.files) {\n      Sauce.file(this, file);\n    }\n  },\n\n  file(post, file) {\n    let link, node;\n    const nodes = [];\n    const skipped = [];\n    for (link of Sauce.links) {\n      if (node = Sauce.createSauceLink(link, post, file)) {\n        nodes.push($.tn(' '), node);\n        if (node.dataset.skip) { skipped.push([link, node]); }\n      }\n    }\n    $.add(file.text, nodes);\n\n    if (skipped.length) {\n      var observer = new MutationObserver(function() {\n        if (file.text.dataset.md5) {\n          for ([link, node] of skipped) {\n            var node2;\n            if (node2 = Sauce.createSauceLink(link, post, file)) {\n              $.replace(node, node2);\n            }\n          }\n          return observer.disconnect();\n        }\n      });\n      return observer.observe(file.text, {attributes: true});\n    }\n  },\n\n  formatters: {\n    TURL(post, file) { return file.thumbURL; },\n    URL(post, file) { return file.url; },\n    IMG(post, file, ext) { if (['gif', 'jpg', 'jpeg', 'png'].includes(ext)) { return file.url; } else { return file.thumbURL; } },\n    MD5(post, file) { return file.MD5; },\n    sMD5(post, file) { return file.MD5?.replace(/[+/=]/g, c => ({'+': '-', '/': '_', '=': ''})[c]); },\n    hMD5(post, file) { if (file.MD5) { return (atob(file.MD5).map((c) => `0${c.charCodeAt(0).toString(16)}`.slice(-2))).join(''); } },\n    board(post) { return post.board.ID; },\n    name(post, file) { return file.name; },\n    '%'() { return '%'; },\n    semi() { return ';'; }\n  }\n};\nexport default Sauce;\n","/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nimport galleryPage from './Gallery/Gallery.html';\nimport $ from '../platform/$';\nimport Callbacks from '../classes/Callbacks';\nimport Notice from '../classes/Notice';\nimport Main from '../main/Main';\nimport Keybinds from '../Miscellaneous/Keybinds';\nimport $$ from '../platform/$$';\nimport ImageCommon from './ImageCommon';\nimport Sauce from './Sauce';\nimport Volume from './Volume';\nimport Header from '../General/Header';\nimport { Conf, d, doc, g } from '../globals/globals';\nimport UI from '../General/UI';\nimport Get from '../General/Get';\nimport { debounce, dict, SECOND } from '../platform/helpers';\n\nvar Gallery = {\n  init() {\n    if (!(this.enabled = Conf['Gallery'] && ['index', 'thread'].includes(g.VIEW))) { return; }\n\n    this.delay = Conf['Slide Delay'];\n\n    const el = $.el('a', {\n      href: 'javascript:;',\n      title: 'Gallery',\n      textContent: '',\n    });\n\n    $.on(el, 'click', this.cb.toggle);\n\n    Header.addShortcut('gallery', el, 530);\n\n    return Callbacks.Post.push({\n      name: 'Gallery',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    return (() => {\n      const result = [];\n      for (var file of this.files) {\n        if (file.thumb) {\n          if (Gallery.nodes) {\n            Gallery.generateThumb(this, file);\n            Gallery.nodes.total.textContent = Gallery.images.length;\n          }\n\n          if (!Conf['Image Expansion'] && ((g.SITE.software !== 'tinyboard') || !Main.jsEnabled)) {\n            result.push($.on(file.thumbLink, 'click', Gallery.cb.image));\n          } else {\n            result.push(undefined);\n          }\n        }\n      }\n      return result;\n    })();\n  },\n\n  build(image) {\n    let dialog, thumb;\n    const {cb} = Gallery;\n\n    if (Conf['Fullscreen Gallery']) {\n      $.one(d, 'fullscreenchange mozfullscreenchange webkitfullscreenchange', () => $.on(d, 'fullscreenchange mozfullscreenchange webkitfullscreenchange', cb.close));\n      doc.mozRequestFullScreen?.();\n      doc.webkitRequestFullScreen?.(Element.ALLOW_KEYBOARD_INPUT);\n    }\n\n    Gallery.images  = [];\n    const nodes = (Gallery.nodes = {});\n    Gallery.fileIDs = dict();\n    Gallery.slideshow = false;\n\n    nodes.el = (dialog = $.el('div',\n      {id: 'a-gallery'}));\n    $.extend(dialog, {innerHTML: galleryPage });\n\n    const object = {\n      buttons: '.gal-buttons',\n      frame:   '.gal-image',\n      name:    '.gal-name',\n      count:   '.count',\n      total:   '.total',\n      sauce:   '.gal-sauce',\n      thumbs:  '.gal-thumbnails',\n      next:    '.gal-image a',\n      current: '.gal-image img'\n    };\n    for (var key in object) { var value = object[key]; nodes[key] = $(value, dialog); }\n\n    const menuButton = $('.menu-button', dialog);\n    nodes.menu = new UI.Menu('gallery');\n\n    $.on(nodes.frame, 'click', cb.blank);\n    if (Conf['Mouse Wheel Volume']) { $.on(nodes.frame, 'wheel', Volume.wheel); }\n    $.on(nodes.next,  'click', cb.click);\n    $.on(nodes.name,  'click', ImageCommon.download);\n\n    $.on($('.gal-prev',  dialog), 'click', cb.prev);\n    $.on($('.gal-next',  dialog), 'click', cb.next);\n    $.on($('.gal-start', dialog), 'click', cb.start);\n    $.on($('.gal-stop',  dialog), 'click', cb.stop);\n    $.on($('.gal-close', dialog), 'click', cb.close);\n\n    $.on(menuButton, 'click', function(e) {\n      return nodes.menu.toggle(e, this, g);\n    });\n\n    for (var entry of Gallery.menu.createSubEntries()) {\n      entry.order = 0;\n      nodes.menu.addEntry(entry);\n    }\n\n    $.on(d, 'keydown', cb.keybinds);\n    if (Conf['Keybinds']) { $.off(d, 'keydown', Keybinds.keydown); }\n\n    $.on(window, 'resize', Gallery.cb.setHeight);\n\n    for (var postThumb of $$(g.SITE.selectors.file.thumb)) {\n      var post;\n      if (!(post = Get.postFromNode(postThumb))) { continue; }\n      for (var file of post.files) {\n        if (file.thumb) {\n          Gallery.generateThumb(post, file);\n          // If no image to open is given, pick image we have scrolled to.\n          if (!image && Gallery.fileIDs[`${post.fullID}.${file.index}`]) {\n            var candidate = file.thumbLink;\n            if ((Header.getTopOf(candidate) + candidate.getBoundingClientRect().height) >= 0) {\n              image = candidate;\n            }\n          }\n        }\n      }\n    }\n    $.addClass(doc, 'gallery-open');\n\n    $.add(d.body, dialog);\n\n    nodes.thumbs.scrollTop = 0;\n    nodes.current.parentElement.scrollTop = 0;\n\n    if (image) { thumb = $(`[href='${image.href}']`, nodes.thumbs); }\n    if (!thumb) { thumb = Gallery.images[Gallery.images.length-1]; }\n    if (thumb) { Gallery.open(thumb); }\n\n    doc.style.overflow = 'hidden';\n    return nodes.total.textContent = Gallery.images.length;\n  },\n\n  generateThumb(post, file) {\n    if (post.isClone || post.isHidden) { return; }\n    if (!file || !file.thumb || (!file.isImage && !file.isVideo && !Conf['PDF in Gallery'])) { return; }\n    if (Gallery.fileIDs[`${post.fullID}.${file.index}`]) { return; }\n\n    Gallery.fileIDs[`${post.fullID}.${file.index}`] = true;\n\n    const thumb = $.el('a', {\n      className: 'gal-thumb',\n      href:      file.url,\n      target:    '_blank',\n      title:     file.name\n    }\n    );\n\n    thumb.dataset.id   = Gallery.images.length;\n    thumb.dataset.post = post.fullID;\n    thumb.dataset.file = file.index;\n\n    const thumbImg = file.thumb.cloneNode(false);\n    thumbImg.style.cssText = '';\n    $.add(thumb, thumbImg);\n\n    $.on(thumb, 'click', Gallery.cb.open);\n\n    Gallery.images.push(thumb);\n    return $.add(Gallery.nodes.thumbs, thumb);\n  },\n\n  load(thumb, errorCB) {\n    const ext = thumb.href.match(/\\w*$/);\n    const elType = $.getOwn({'webm': 'video', 'mp4': 'video', 'ogv': 'video', 'pdf': 'iframe'}, ext) || 'img';\n    const file = $.el(elType);\n    $.extend(file.dataset, thumb.dataset);\n    $.on(file, 'error', errorCB);\n    file.src = thumb.href;\n    return file;\n  },\n\n  open(thumb) {\n    let el, file, post;\n    const {nodes} = Gallery;\n    const oldID = +nodes.current.dataset.id;\n    const newID = +thumb.dataset.id;\n\n    // Highlight, center selected thumbnail\n    if (el = Gallery.images[oldID]) { $.rmClass(el,    'gal-highlight'); }\n    $.addClass(thumb, 'gal-highlight');\n    nodes.thumbs.scrollTop = (thumb.offsetTop + (thumb.offsetHeight/2)) - (nodes.thumbs.clientHeight/2);\n\n    // Load image or use preloaded image\n    if (Gallery.cache?.dataset.id === (''+newID)) {\n      file = Gallery.cache;\n      $.off(file, 'error', Gallery.cacheError);\n      $.on(file, 'error', Gallery.error);\n    } else {\n      file = Gallery.load(thumb, Gallery.error);\n    }\n\n    // Replace old image with new one\n    $.off(nodes.current, 'error', Gallery.error);\n    ImageCommon.pause(nodes.current);\n    $.replace(nodes.current, file);\n    nodes.current = file;\n\n    if (file.nodeName === 'VIDEO') {\n      file.loop = true;\n      Volume.setup(file);\n      if (Conf['Autoplay']) { file.play(); }\n      if (Conf['Show Controls']) { ImageCommon.addControls(file); }\n    }\n\n    doc.classList.toggle('gal-pdf', file.nodeName === 'IFRAME');\n    Gallery.cb.setHeight();\n    nodes.count.textContent = +thumb.dataset.id + 1;\n    nodes.name.download     = (nodes.name.textContent = thumb.title);\n    nodes.name.href         = thumb.href;\n    nodes.frame.scrollTop   = 0;\n    nodes.next.focus();\n\n    // Set sauce links\n    $.rmAll(nodes.sauce);\n    if (Conf['Sauce'] && Sauce.links && (post = g.posts.get(file.dataset.post))) {\n      const sauces = [];\n      for (var link of Sauce.links) {\n        var node;\n        if (node = Sauce.createSauceLink(link, post, post.files[+file.dataset.file])) {\n          sauces.push($.tn(' '), node);\n        }\n      }\n      $.add(nodes.sauce, sauces);\n    }\n\n    // Continue slideshow if moving forward, stop otherwise\n    if (Gallery.slideshow && ((newID > oldID) || ((oldID === (Gallery.images.length-1)) && (newID === 0)))) {\n      Gallery.setupTimer();\n    } else {\n      Gallery.cb.stop();\n    }\n\n    // Scroll to post\n    if (Conf['Scroll to Post'] && (post = g.posts.get(file.dataset.post))) {\n      Header.scrollTo(post.nodes.root);\n    }\n\n    // Preload next image\n    if (isNaN(oldID) || (newID === ((oldID + 1) % Gallery.images.length))) {\n      return Gallery.cache = Gallery.load(Gallery.images[(newID + 1) % Gallery.images.length], Gallery.cacheError);\n    }\n  },\n\n  error() {\n    if (this.error?.code === MediaError.MEDIA_ERR_DECODE) {\n      return new Notice('error', 'Corrupt or unplayable video', 30);\n    }\n    if (ImageCommon.isFromArchive(this)) { return; }\n    const post = g.posts.get(this.dataset.post);\n    const file = post.files[+this.dataset.file];\n    return ImageCommon.error(this, post, file, null, url => {\n      if (!url) { return; }\n      Gallery.images[+this.dataset.id].href = url;\n      if (Gallery.nodes.current === this) { return this.src = url; }\n    });\n  },\n\n  cacheError() {\n    return delete Gallery.cache;\n  },\n\n  cleanupTimer() {\n    clearTimeout(Gallery.timeoutID);\n    const {current} = Gallery.nodes;\n    $.off(current, 'canplaythrough load', Gallery.startTimer);\n    return $.off(current, 'ended', Gallery.cb.next);\n  },\n\n  startTimer() {\n    return Gallery.timeoutID = setTimeout(Gallery.checkTimer, Gallery.delay * SECOND);\n  },\n\n  setupTimer() {\n    Gallery.cleanupTimer();\n    const {current} = Gallery.nodes;\n    const isVideo = current.nodeName === 'VIDEO';\n    if (isVideo) { current.play(); }\n    if ((isVideo ? current.readyState >= 4 : current.complete) || (current.nodeName === 'IFRAME')) {\n      return Gallery.startTimer();\n    } else {\n      return $.on(current, (isVideo ? 'canplaythrough' : 'load'), Gallery.startTimer);\n    }\n  },\n\n  checkTimer() {\n    const {current} = Gallery.nodes;\n    if ((current.nodeName === 'VIDEO') && !current.paused) {\n      $.on(current, 'ended', Gallery.cb.next);\n      return current.loop = false;\n    } else {\n      return Gallery.cb.next();\n    }\n  },\n\n  cb: {\n    keybinds(e) {\n      let key;\n      if (!(key = Keybinds.keyCode(e))) { return; }\n\n      const cb = (() => { switch (key) {\n        case Conf['Close']: case Conf['Open Gallery']:\n          return Gallery.cb.close;\n        case Conf['Next Gallery Image']:\n          return Gallery.cb.next;\n        case Conf['Advance Gallery']:\n          return Gallery.cb.advance;\n        case Conf['Previous Gallery Image']:\n          return Gallery.cb.prev;\n        case Conf['Pause']:\n          return Gallery.cb.pause;\n        case Conf['Slideshow']:\n          return Gallery.cb.toggleSlideshow;\n        case Conf['Rotate image anticlockwise']:\n          return Gallery.cb.rotateLeft;\n        case Conf['Rotate image clockwise']:\n          return Gallery.cb.rotateRight;\n        case Conf['Download Gallery Image']:\n          return Gallery.cb.download;\n      } })();\n\n      if (!cb) { return; }\n      e.stopPropagation();\n      e.preventDefault();\n      return cb();\n    },\n\n    open(e) {\n      if (e) { e.preventDefault(); }\n      if (this) { return Gallery.open(this); }\n    },\n\n    image(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      return Gallery.build(this);\n    },\n\n    prev() {\n      return Gallery.cb.open.call(\n        Gallery.images[+Gallery.nodes.current.dataset.id - 1] || Gallery.images[Gallery.images.length - 1]\n      );\n    },\n    next() {\n      return Gallery.cb.open.call(\n        Gallery.images[+Gallery.nodes.current.dataset.id + 1] || Gallery.images[0]\n      );\n    },\n\n    click(e) {\n      if (ImageCommon.onControls(e)) { return; }\n      e.preventDefault();\n      return Gallery.cb.advance();\n    },\n\n    advance() { if (!Conf['Autoplay'] && Gallery.nodes.current.paused) { return Gallery.nodes.current.play(); } else { return Gallery.cb.next(); } },\n    toggle() { return (Gallery.nodes ? Gallery.cb.close : Gallery.build)(); },\n    blank(e) { if (e.target === this) { return Gallery.cb.close(); } },\n    toggleSlideshow() {  return Gallery.cb[Gallery.slideshow ? 'stop' : 'start'](); },\n\n    download() {\n      const name = $('.gal-name');\n      return name.click();\n    },\n\n    pause() {\n      Gallery.cb.stop();\n      const {current} = Gallery.nodes;\n      if (current.nodeName === 'VIDEO') { return current[current.paused ? 'play' : 'pause'](); }\n    },\n\n    start() {\n      $.addClass(Gallery.nodes.buttons, 'gal-playing');\n      Gallery.slideshow = true;\n      return Gallery.setupTimer();\n    },\n\n    stop() {\n      if (!Gallery.slideshow) { return; }\n      Gallery.cleanupTimer();\n      const {current} = Gallery.nodes;\n      if (current.nodeName === 'VIDEO') { current.loop = true; }\n      $.rmClass(Gallery.nodes.buttons, 'gal-playing');\n      return Gallery.slideshow = false;\n    },\n\n    rotateLeft() { return Gallery.cb.rotate(270); },\n    rotateRight() { return Gallery.cb.rotate(90); },\n\n    rotate: debounce(100, function(delta) {\n      const {current} = Gallery.nodes;\n      if (current.nodeName === 'IFRAME') { return; }\n      current.dataRotate = ((current.dataRotate || 0) + delta) % 360;\n      current.style.transform = `rotate(${current.dataRotate}deg)`;\n      return Gallery.cb.setHeight();\n    }),\n\n    close() {\n      $.off(Gallery.nodes.current, 'error', Gallery.error);\n      ImageCommon.pause(Gallery.nodes.current);\n      $.rm(Gallery.nodes.el);\n      $.rmClass(doc, 'gallery-open');\n      if (Conf['Fullscreen Gallery']) {\n        $.off(d, 'fullscreenchange mozfullscreenchange webkitfullscreenchange', Gallery.cb.close);\n        d.mozCancelFullScreen?.();\n        d.webkitExitFullscreen?.();\n      }\n      delete Gallery.nodes;\n      delete Gallery.fileIDs;\n      doc.style.overflow = '';\n\n      $.off(d, 'keydown', Gallery.cb.keybinds);\n      if (Conf['Keybinds']) { $.on(d, 'keydown', Keybinds.keydown); }\n      $.off(window, 'resize', Gallery.cb.setHeight);\n      return clearTimeout(Gallery.timeoutID);\n    },\n\n    setFitness() {\n      return (this.checked ? $.addClass : $.rmClass)(doc, `gal-${this.name.toLowerCase().replace(/\\s+/g, '-')}`);\n    },\n\n    setHeight: debounce(100, function () {\n      let dim, margin, minHeight;\n      const {current, frame} = Gallery.nodes;\n      const {style} = current;\n\n      if (Conf['Stretch to Fit'] && (dim = g.posts.get(current.dataset.post)?.files[+current.dataset.file].dimensions)) {\n        const [width, height] = dim.split('x');\n        let containerWidth = frame.clientWidth;\n        let containerHeight = doc.clientHeight - 25;\n        if (((current.dataRotate || 0) % 180) === 90) {\n          [containerWidth, containerHeight] = [containerHeight, containerWidth];\n        }\n        minHeight = Math.min(containerHeight, (height / width) * containerWidth);\n        style.minHeight = minHeight + 'px';\n        style.minWidth = ((width / height) * minHeight) + 'px';\n      } else {\n        style.minHeight = (style.minWidth = '');\n      }\n\n      if (((current.dataRotate || 0) % 180) === 90) {\n        style.maxWidth  = Conf['Fit Height'] ? `${doc.clientHeight - 25}px` : 'none';\n        style.maxHeight = Conf['Fit Width']  ? `${frame.clientWidth}px`     : 'none';\n        margin = (current.clientWidth - current.clientHeight)/2;\n        return style.margin = `${margin}px ${-margin}px`;\n      } else {\n        return style.maxWidth = (style.maxHeight = (style.margin = ''));\n      }\n    }),\n\n    setDelay() { return Gallery.delay = +this.value; }\n  },\n\n  menu: {\n    init() {\n      if (!Gallery.enabled) { return; }\n\n      const el = $.el('span', {\n        textContent: 'Gallery',\n        className: 'gallery-link'\n      }\n      );\n\n      return Header.menu.addEntry({\n        el,\n        order: 105,\n        subEntries: Gallery.menu.createSubEntries()\n      });\n    },\n\n    createSubEntry(name) {\n      const label = UI.checkbox(name, name);\n      const input = label.firstElementChild;\n      if (['Hide Thumbnails', 'Fit Width', 'Fit Height'].includes(name)) { $.on(input, 'change', Gallery.cb.setFitness); }\n      $.event('change', null, input);\n      $.on(input, 'change', $.cb.checked);\n      if (['Hide Thumbnails', 'Fit Width', 'Fit Height', 'Stretch to Fit'].includes(name)) { $.on(input, 'change', Gallery.cb.setHeight); }\n      return {el: label};\n    },\n\n    createSubEntries() {\n      const subEntries = (['Hide Thumbnails', 'Fit Width', 'Fit Height', 'Stretch to Fit', 'Scroll to Post'].map((item) => Gallery.menu.createSubEntry(item)));\n\n      const delayLabel = $.el('label', {innerHTML: 'Slide Delay: <input type=\"number\" name=\"Slide Delay\" min=\"0\" step=\"any\" class=\"field\">'});\n      const delayInput = delayLabel.firstElementChild;\n      delayInput.value = Gallery.delay;\n      $.on(delayInput, 'change', Gallery.cb.setDelay);\n      $.on(delayInput, 'change', $.cb.value);\n      subEntries.push({el: delayLabel});\n\n      return subEntries;\n    }\n  }\n};\nexport default Gallery;\n","import Get from '../General/Get';\nimport Header from '../General/Header';\nimport UI from '../General/UI';\nimport { g, Conf, d, doc, E } from '../globals/globals';\nimport ImageHost from '../Images/ImageHost';\nimport Main from '../main/Main';\nimport $ from '../platform/$';\nimport $$ from '../platform/$$';\nimport CrossOrigin from '../platform/CrossOrigin';\nimport { dict } from '../platform/helpers';\nimport EmbeddingPage from './Embedding/Embed.html';\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar Embedding = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW) || !Conf['Linkify'] || (!Conf['Embedding'] && !Conf['Link Title'] && !Conf['Cover Preview'])) { return; }\n    this.types = dict();\n    for (var type of this.ordered_types) { this.types[type.key] = type; }\n\n    if (Conf['Embedding'] && (g.VIEW !== 'archive')) {\n      this.dialog = UI.dialog('embedding',\n        { innerHTML: EmbeddingPage });\n      this.media = $('#media-embed', this.dialog);\n      $.one(d, '4chanXInitFinished', this.ready);\n      $.on(d, 'IndexRefreshInternal', () => g.posts.forEach(function(post) {\n        for (post of [post, ...post.clones]) {\n          for (var embed of post.nodes.embedlinks) {\n            Embedding.cb.catalogRemove.call(embed);\n          }\n        }\n      }));\n    }\n    if (Conf['Link Title']) {\n      return $.on(d, '4chanXInitFinished PostsInserted', function() {\n        for (var key in Embedding.types) {\n          var service = Embedding.types[key];\n          if (service.title?.batchSize) {\n            Embedding.flushTitles(service.title);\n          }\n        }\n      });\n    }\n  },\n\n  events(post) {\n    let el, i, items;\n    if (g.VIEW === 'archive') { return; }\n    if (Conf['Embedding']) {\n      i = 0;\n      items = (post.nodes.embedlinks = $$('.embedder', post.nodes.comment));\n      while ((el = items[i++])) {\n        $.on(el, 'click', Embedding.cb.click);\n        if ($.hasClass(el, 'embedded')) { Embedding.cb.toggle.call(el); }\n      }\n    }\n    if (Conf['Cover Preview']) {\n      i = 0;\n      items = $$('.linkify', post.nodes.comment);\n      while ((el = items[i++])) {\n        var data;\n        if (data = Embedding.services(el)) {\n          Embedding.preview(data);\n        }\n      }\n      return;\n    }\n  },\n\n  process(link, post) {\n    let data;\n    if (!Conf['Embedding'] && !Conf['Link Title'] && !Conf['Cover Preview']) { return; }\n    if ($.x('ancestor::pre', link)) { return; }\n    if (data = Embedding.services(link)) {\n      data.post = post;\n      if (Conf['Embedding'] && (g.VIEW !== 'archive')) { Embedding.embed(data); }\n      if (Conf['Link Title']) { Embedding.title(data); }\n      if (Conf['Cover Preview'] && (g.VIEW !== 'archive')) { return Embedding.preview(data); }\n    }\n  },\n\n  services(link) {\n    const {href} = link;\n    for (var type of Embedding.ordered_types) {\n      var match;\n      if (match = type.regExp.exec(href)) {\n        return {key: type.key, uid: match[1], options: match[2], link};\n      }\n    }\n  },\n\n  embed(data) {\n    const {key, uid, options, link, post} = data;\n    const {href} = link;\n\n    $.addClass(link, key.toLowerCase());\n\n    const embed = $.el('a', {\n      className:   'embedder',\n      href:        'javascript:;'\n    }\n    ,\n      {innerHTML: '(<span>un</span>embed)'});\n\n    const object = {key, uid, options, href};\n    for (var name in object) { var value = object[name]; embed.dataset[name] = value; }\n\n    $.on(embed, 'click', Embedding.cb.click);\n    $.after(link, [$.tn(' '), embed]);\n    post.nodes.embedlinks.push(embed);\n\n    if (Conf['Auto-embed'] && !Conf['Floating Embeds'] && !post.isFetchedQuote) {\n      if ($.hasClass(doc, 'catalog-mode')) {\n        return $.addClass(embed, 'embed-removed');\n      } else {\n        return Embedding.cb.toggle.call(embed);\n      }\n    }\n  },\n\n  ready() {\n    if (!Main.isThisPageLegit()) { return; }\n    $.addClass(Embedding.dialog, 'empty');\n    $.on($('.close', Embedding.dialog), 'click',     Embedding.closeFloat);\n    $.on($('.move',  Embedding.dialog), 'mousedown', Embedding.dragEmbed);\n    $.on($('.jump',  Embedding.dialog), 'click', function() {\n      if (doc.contains(Embedding.lastEmbed)) { return Header.scrollTo(Embedding.lastEmbed); }\n    });\n    return $.add(d.body, Embedding.dialog);\n  },\n\n  closeFloat() {\n    delete Embedding.lastEmbed;\n    $.addClass(Embedding.dialog, 'empty');\n    return $.replace(Embedding.media.firstChild, $.el('div'));\n  },\n\n  dragEmbed() {\n    // only webkit can handle a blocking div\n    const {style} = Embedding.media;\n    if (Embedding.dragEmbed.mouseup) {\n      $.off(d, 'mouseup', Embedding.dragEmbed);\n      Embedding.dragEmbed.mouseup = false;\n      style.pointerEvents = '';\n      return;\n    }\n    $.on(d, 'mouseup', Embedding.dragEmbed);\n    Embedding.dragEmbed.mouseup = true;\n    return style.pointerEvents = 'none';\n  },\n\n  title(data) {\n    let service;\n    const {key, uid, options, link, post} = data;\n    if (!(service = Embedding.types[key].title)) { return; }\n    $.addClass(link, key.toLowerCase());\n    if (service.batchSize) {\n      (service.queue || (service.queue = [])).push(data);\n      if (service.queue.length >= service.batchSize) {\n        return Embedding.flushTitles(service);\n      }\n    } else {\n      return CrossOrigin.cache(service.api(uid), (function() { return Embedding.cb.title(this, data); }));\n    }\n  },\n\n  flushTitles(service) {\n    let data;\n    const {queue} = service;\n    if (!queue?.length) { return; }\n    service.queue = [];\n    const cb = function() {\n      for (data of queue) { Embedding.cb.title(this, data); }\n    };\n    return CrossOrigin.cache(service.api((() => {\n      const result = [];\n      for (data of queue) {         result.push(data.uid);\n      }\n      return result;\n    })()), cb);\n  },\n\n  preview(data) {\n    let service;\n    const {key, uid, link} = data;\n    if (!(service = Embedding.types[key].preview)) { return; }\n    return $.on(link, 'mouseover', function(e) {\n      const src = service.url(uid);\n      const {height} = service;\n      const el = $.el('img', {\n        src,\n        id: 'ihover'\n      }\n      );\n      $.add(Header.hover, el);\n      return UI.hover({\n        root: link,\n        el,\n        latestEvent: e,\n        endEvents: 'mouseout click',\n        height\n      });\n    });\n  },\n\n  cb: {\n    click(e) {\n      e.preventDefault();\n      if (!$.hasClass(this, 'embedded') && (Conf['Floating Embeds'] || $.hasClass(doc, 'catalog-mode'))) {\n        let div;\n        if (!(div = Embedding.media.firstChild)) { return; }\n        $.replace(div, Embedding.cb.embed(this));\n        Embedding.lastEmbed = Get.postFromNode(this).nodes.root;\n        return $.rmClass(Embedding.dialog, 'empty');\n      } else {\n        return Embedding.cb.toggle.call(this);\n      }\n    },\n\n    toggle() {\n      if ($.hasClass(this, \"embedded\")) {\n        $.rm(this.nextElementSibling);\n      } else {\n        $.after(this, Embedding.cb.embed(this));\n      }\n      return $.toggleClass(this, 'embedded');\n    },\n\n    embed(a) {\n      // We create an element to embed\n      let el, type;\n      const container = $.el('div', {className: 'media-embed'});\n      $.add(container, (el = (type = Embedding.types[a.dataset.key]).el(a)));\n\n      // Set style values.\n      el.style.cssText = (type.style != null) ?\n        type.style\n      :\n        'border: none; width: 640px; height: 360px;';\n\n      return container;\n    },\n\n    catalogRemove() {\n      const isCatalog = $.hasClass(doc, 'catalog-mode');\n      if ((isCatalog && $.hasClass(this, 'embedded')) || (!isCatalog && $.hasClass(this, 'embed-removed'))) {\n        Embedding.cb.toggle.call(this);\n        return $.toggleClass(this, 'embed-removed');\n      }\n    },\n\n    title(req, data) {\n      let text;\n      const {key, uid, options, link, post} = data;\n      const service = Embedding.types[key].title;\n\n      let {status} = req;\n      if ([200, 304].includes(status) && service.status) {\n        status = service.status(req.response)[0];\n      }\n\n      if (!status) { return; }\n\n      text = `[${key}] ${(() => { switch (status) {\n        case 200: case 304:\n          text = service.text(req.response, uid);\n          if (typeof text === 'string') {\n            return text;\n          } else {\n            return text = link.textContent;\n          }\n        case 404:\n          return \"Not Found\";\n        case 403: case 401:\n          return \"Forbidden or Private\";\n        default:\n          return `${status}'d`;\n      } })()\n      }`;\n\n      link.dataset.original = link.textContent;\n      link.textContent = text;\n      for (var post2 of post.clones) {\n        for (var link2 of $$('a.linkify', post2.nodes.comment)) {\n          if (link2.href === link.href) {\n            if (link2.dataset.original == null) { link2.dataset.original = link2.textContent; }\n            link2.textContent = text;\n          }\n        }\n      }\n    }\n  },\n\n  ordered_types: [{\n      key: 'audio',\n      regExp: /^[^?#]+\\.(?:mp3|m4a|oga|wav|flac)(?:[?#]|$)/i,\n      style: '',\n      el(a) {\n        return $.el('audio', {\n          controls:    true,\n          preload:     'auto',\n          src:         a.dataset.href\n        }\n        );\n      }\n    }\n    , {\n      key: 'image',\n      regExp: /^[^?#]+\\.(?:gif|png|jpg|jpeg|bmp|webp)(?::\\w+)?(?:[?#]|$)/i,\n      style: '',\n      el(a) {\n        const hrefEsc = E(a.dataset.href);\n        return $.el('div', { innerHTML: `<a target=\"_blank\" href=\"${hrefEsc}\"><img src=\"${hrefEsc}\" style=\"max-width: 80vw; max-height: 80vh;\"></a>`});\n      }\n    }\n    , {\n      key: 'video',\n      regExp: /^[^?#]+\\.(?:og[gv]|webm|mp4)(?:[?#]|$)/i,\n      style: 'max-width: 80vw; max-height: 80vh;',\n      el(a) {\n        const el = $.el('video', {\n          hidden:   true,\n          controls: true,\n          preload:  'auto',\n          src:      a.dataset.href,\n          loop:     ImageHost.test(a.dataset.href.split('/')[2])\n        });\n        $.on(el, 'loadedmetadata', function() {\n          if ((el.videoHeight === 0) && el.parentNode) {\n            return $.replace(el, Embedding.types.audio.el(a));\n          } else {\n            return el.hidden = false;\n          }\n        });\n        return el;\n      }\n    }\n    , {\n      key: 'PeerTube',\n      regExp: /^(\\w+:\\/\\/[^\\/]+\\/videos\\/watch\\/\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})(.*)/,\n      el(a) {\n        let start;\n        const options = (start = a.dataset.options.match(/[?&](start=\\w+)/)) ? `?${start[1]}` : '';\n        const el = $.el('iframe',\n          {src: a.dataset.uid.replace('/videos/watch/', '/videos/embed/') + options});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'BitChute',\n      regExp:  /^\\w+:\\/\\/(?:www\\.)?bitchute\\.com\\/video\\/([\\w\\-]+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://www.bitchute.com/embed/${a.dataset.uid}/`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Clyp',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?clyp\\.it\\/(\\w{8})/,\n      style: 'border: 0; width: 640px; height: 160px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://clyp.it/${a.dataset.uid}/widget`});\n      },\n      title: {\n        api(uid) { return `https://api.clyp.it/oembed?url=https://clyp.it/${uid}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'Dailymotion',\n      regExp:  /^\\w+:\\/\\/(?:(?:www\\.)?dailymotion\\.com\\/(?:embed\\/)?video|dai\\.ly)\\/([A-Za-z0-9]+)[^?]*(.*)/,\n      el(a) {\n        let start;\n        const options = (start = a.dataset.options.match(/[?&](start=\\d+)/)) ? `?${start[1]}` : '';\n        const el = $.el('iframe',\n          {src: `//www.dailymotion.com/embed/video/${a.dataset.uid}${options}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://api.dailymotion.com/video/${uid}`; },\n        text(_) { return _.title; }\n      },\n      preview: {\n        url(uid) { return `https://www.dailymotion.com/thumbnail/video/${uid}`; },\n        height: 240\n      }\n    }\n    , {\n      key: 'Gfycat',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?gfycat\\.com\\/(?:iframe\\/)?(\\w+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `//gfycat.com/ifr/${a.dataset.uid}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Gist',\n      regExp: /^\\w+:\\/\\/gist\\.github\\.com\\/[\\w\\-]+\\/(\\w+)/,\n      style: '',\n      el: (function() {\n        let counter = 0;\n        return function(a) {\n          const el = $.el('pre', {\n            hidden: true,\n            id: `gist-embed-${counter++}`\n          }\n          );\n          CrossOrigin.cache(`https://api.github.com/gists/${a.dataset.uid}`, function() {\n            el.textContent = Object.values(this.response.files)[0].content;\n            el.className = 'prettyprint';\n            $.global(() => window.prettyPrint?.((function() {}), document.getElementById(document.currentScript.dataset.id).parentNode)\n            , {id: el.id});\n            return el.hidden = false;\n          });\n          return el;\n        };\n      })(),\n      title: {\n        api(uid) { return `https://api.github.com/gists/${uid}`; },\n        text({files}) {\n          for (var file in files) { if (files.hasOwnProperty(file)) { return file; } }\n        }\n      }\n    }\n    , {\n      key: 'InstallGentoo',\n      regExp: /^\\w+:\\/\\/paste\\.installgentoo\\.com\\/view\\/(?:raw\\/|download\\/|embed\\/)?(\\w+)/,\n      el(a) {\n        return $.el('iframe',\n          {src: `https://paste.installgentoo.com/view/embed/${a.dataset.uid}`});\n      }\n    }\n    , {\n      key: 'LiveLeak',\n      regExp: /^\\w+:\\/\\/(?:\\w+\\.)?liveleak\\.com\\/.*\\?.*[tif]=(\\w+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://www.liveleak.com/e/${a.dataset.uid}`,});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Loopvid',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?loopvid.appspot.com\\/#?((?:pf|kd|lv|gd|gh|db|dx|nn|cp|wu|ig|ky|mf|m2|pc|1c|pi|ni|wl|ko|mm|ic|gc)\\/[\\w\\-\\/]+(?:,[\\w\\-\\/]+)*|fc\\/\\w+\\/\\d+|https?:\\/\\/.+)/,\n      style: 'max-width: 80vw; max-height: 80vh;',\n      el(a) {\n        const el = $.el('video', {\n          controls: true,\n          preload:  'auto',\n          loop:     true\n        }\n        );\n        if (/^http/.test(a.dataset.uid)) {\n          $.add(el, $.el('source', {src: a.dataset.uid}));\n          return el;\n        }\n        const [_, host, names] = a.dataset.uid.match(/(\\w+)\\/(.*)/);\n        const types = (() => { switch (host) {\n          case 'gd': case 'wu': case 'fc': return [''];\n          case 'gc': return ['giant', 'fat', 'zippy'];\n          default: return ['.webm', '.mp4'];\n        } })();\n        for (var name of names.split(',')) {\n          for (var type of types) {\n            var base = `${name}${type}`;\n            var urls = (() => { switch (host) {\n              // list from src/common.py at http://loopvid.appspot.com/source.html\n              case 'pf': return [`https://kastden.org/_loopvid_media/pf/${base}`, `https://web.archive.org/web/2/http://a.pomf.se/${base}`];\n              case 'kd': return [`https://kastden.org/loopvid/${base}`];\n              case 'lv': return [`https://lv.kastden.org/${base}`];\n              case 'gd': return [`https://docs.google.com/uc?export=download&id=${base}`];\n              case 'gh': return [`https://googledrive.com/host/${base}`];\n              case 'db': return [`https://dl.dropboxusercontent.com/u/${base}`];\n              case 'dx': return [`https://dl.dropboxusercontent.com/${base}`];\n              case 'nn': return [`https://kastden.org/_loopvid_media/nn/${base}`];\n              case 'cp': return [`https://copy.com/${base}`];\n              case 'wu': return [`http://webmup.com/${base}/vid.webm`];\n              case 'ig': return [`https://i.imgur.com/${base}`];\n              case 'ky': return [`https://kastden.org/_loopvid_media/ky/${base}`];\n              case 'mf': return [`https://kastden.org/_loopvid_media/mf/${base}`, `https://web.archive.org/web/2/https://d.maxfile.ro/${base}`];\n              case 'm2': return [`https://kastden.org/_loopvid_media/m2/${base}`];\n              case 'pc': return [`https://kastden.org/_loopvid_media/pc/${base}`, `https://web.archive.org/web/2/http://a.pomf.cat/${base}`];\n              case '1c': return [`http://b.1339.cf/${base}`];\n              case 'pi': return [`https://kastden.org/_loopvid_media/pi/${base}`, `https://web.archive.org/web/2/https://u.pomf.is/${base}`];\n              case 'ni': return [`https://kastden.org/_loopvid_media/ni/${base}`, `https://web.archive.org/web/2/https://u.nya.is/${base}`];\n              case 'wl': return [`http://webm.land/media/${base}`];\n              case 'ko': return [`https://kordy.kastden.org/loopvid/${base}`];\n              case 'mm': return [`https://kastden.org/_loopvid_media/mm/${base}`, `https://web.archive.org/web/2/https://my.mixtape.moe/${base}`];\n              case 'ic': return [`https://media.8ch.net/file_store/${base}`];\n              case 'fc': return [`//${ImageHost.host()}/${base}.webm`];\n              case 'gc': return [`https://${type}.gfycat.com/${name}.webm`];\n            } })();\n\n            for (var url of urls) {\n              $.add(el, $.el('source', {src: url}));\n            }\n          }\n        }\n        return el;\n      }\n    }\n    , {\n      key: 'Openings.moe',\n      regExp: /^\\w+:\\/\\/openings.moe\\/\\?video=([^.&=]+)/,\n      style: 'width: 1280px; height: 720px; max-width: 80vw; max-height: 80vh;',\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://openings.moe/?video=${a.dataset.uid}`,});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Pastebin',\n      regExp: /^\\w+:\\/\\/(?:\\w+\\.)?pastebin\\.com\\/(?!u\\/)(?:[\\w.]+(?:\\/|\\?i\\=))?(\\w+)/,\n      el(a) {\n        let div;\n        return div = $.el('iframe',\n          {src: `//pastebin.com/embed_iframe.php?i=${a.dataset.uid}`});\n      }\n    }\n    , {\n      key: 'SoundCloud',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?(?:soundcloud\\.com\\/|snd\\.sc\\/)([\\w\\-\\/]+)/,\n      style: 'border: 0; width: 500px; height: 400px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://w.soundcloud.com/player/?visual=true&show_comments=false&url=https%3A%2F%2Fsoundcloud.com%2F${encodeURIComponent(a.dataset.uid)}`});\n      },\n      title: {\n        api(uid) { return `${location.protocol}//soundcloud.com/oembed?format=json&url=https%3A%2F%2Fsoundcloud.com%2F${encodeURIComponent(uid)}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'StrawPoll',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?strawpoll\\.me\\/(?:embed_\\d+\\/)?(\\d+(?:\\/r)?)/,\n      style: 'border: 0; width: 600px; height: 406px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://www.strawpoll.me/embed_1/${a.dataset.uid}`});\n      }\n    }\n    , {\n      key: 'Streamable',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?streamable\\.com\\/(\\w+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://streamable.com/o/${a.dataset.uid}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://api.streamable.com/oembed?url=https://streamable.com/${uid}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'TwitchTV',\n      regExp: /^\\w+:\\/\\/(?:www\\.|secure\\.|clips\\.|m\\.)?twitch\\.tv\\/(\\w[^#\\&\\?]*)/,\n      el(a) {\n        let url;\n        let m = a.dataset.href.match(/^\\w+:\\/\\/(?:(clips\\.)|\\w+\\.)?twitch\\.tv\\/(?:\\w+\\/)?(clip\\/)?(\\w[^#\\&\\?]*)/);\n        if (m[1] || m[2]) {\n          url = `//clips.twitch.tv/embed?clip=${m[3]}&parent=${location.hostname}`;\n        } else {\n          let time;\n          m = a.dataset.uid.match(/(\\w+)(?:\\/(?:v\\/)?(\\d+))?/);\n          url = `//player.twitch.tv/?${m[2] ? `video=v${m[2]}` : `channel=${m[1]}`}&autoplay=false&parent=${location.hostname}`;\n          if (time = a.dataset.href.match(/\\bt=(\\w+)/)) {\n            url += `&time=${time[1]}`;\n          }\n        }\n        const el = $.el('iframe',\n          {src: url});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Twitter',\n      regExp: /^\\w+:\\/\\/(?:www\\.|mobile\\.)?(?:twitter|x)\\.com\\/(\\w+\\/status\\/\\d+)/,\n      style: 'border: none; width: 550px; height: 250px; overflow: hidden; resize: both;',\n      el(a) {\n        const el = $.el('iframe');\n        $.on(el, 'load', function() {\n          return this.contentWindow.postMessage({element: 't', query: 'height'}, 'https://twitframe.com');\n        });\n        var onMessage = function(e) {\n          if ((e.source === el.contentWindow) && (e.origin === 'https://twitframe.com')) {\n            $.off(window, 'message', onMessage);\n            return (cont || el).style.height = `${+$.minmax(e.data.height, 250, 0.8 * doc.clientHeight)}px`;\n          }\n        };\n        $.on(window, 'message', onMessage);\n        el.src = `https://twitframe.com/show?url=https://twitter.com/${a.dataset.uid}`;\n        if ($.engine === 'gecko') {\n          // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=680823\n          el.style.cssText = 'border: none; width: 100%; height: 100%;';\n          var cont = $.el('div');\n          $.add(cont, el);\n          return cont;\n        } else {\n          return el;\n        }\n      }\n    }\n    , {\n      key: 'VidLii',\n      regExp:  /^\\w+:\\/\\/(?:www\\.)?vidlii\\.com\\/watch\\?v=(\\w{11})/,\n      style: 'border: none; width: 640px; height: 392px;',\n      el(a) {\n        const el = $.el('iframe',\n          {src: `https://www.vidlii.com/embed?v=${a.dataset.uid}&a=0`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      }\n    }\n    , {\n      key: 'Vimeo',\n      regExp:  /^\\w+:\\/\\/(?:www\\.)?vimeo\\.com\\/(\\d+)/,\n      el(a) {\n        const el = $.el('iframe',\n          {src: `//player.vimeo.com/video/${a.dataset.uid}?wmode=opaque`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://vimeo.com/api/oembed.json?url=https://vimeo.com/${uid}`; },\n        text(_) { return _.title; }\n      }\n    }\n    , {\n      key: 'Vine',\n      regExp: /^\\w+:\\/\\/(?:www\\.)?vine\\.co\\/v\\/(\\w+)/,\n      style: 'border: none; width: 500px; height: 500px;',\n      el(a) {\n        return $.el('iframe',\n          {src: `https://vine.co/v/${a.dataset.uid}/card`});\n      }\n    }\n    , {\n      key: 'Vocaroo',\n      regExp: /^\\w+:\\/\\/(?:(?:www\\.|old\\.)?vocaroo\\.com|voca\\.ro)\\/((?:i\\/)?\\w+)/,\n      style: '',\n      el(a) {\n        const el = $.el('iframe');\n        el.width = 300;\n        el.height = 60;\n        el.setAttribute('frameborder', 0);\n        el.src = `https://vocaroo.com/embed/${a.dataset.uid.replace(/^i\\//, '')}?autoplay=0`;\n        return el;\n      }\n    }\n    , {\n      key: 'YouTube',\n      regExp: /^\\w+:\\/\\/(?:youtu.be\\/|[\\w.]*youtube[\\w.]*\\/.*(?:v=|\\bembed\\/|\\bv\\/|live\\/))([\\w\\-]{11})(.*)/,\n      el(a) {\n        let start = a.dataset.options.match(/\\b(?:star)?t\\=(\\w+)/);\n        if (start) { start = start[1]; }\n        if (start && !/^\\d+$/.test(start)) {\n          start += ' 0h0m0s';\n          start = (3600 * start.match(/(\\d+)h/)[1]) + (60 * start.match(/(\\d+)m/)[1]) + (1 * start.match(/(\\d+)s/)[1]);\n        }\n        const el = $.el('iframe',\n          {src: `//www.youtube.com/embed/${a.dataset.uid}?rel=0&wmode=opaque${start ? '&start=' + start : ''}`});\n        el.setAttribute(\"allowfullscreen\", \"true\");\n        return el;\n      },\n      title: {\n        api(uid) { return `https://www.youtube.com/oembed?url=https%3A//www.youtube.com/watch%3Fv%3D${uid}&format=json`; },\n        text(_) { return _.title; },\n        status(_) {\n          if (_.error) {\n            const m = _.error.match(/^(\\d*)\\s*(.*)/);\n            return [+m[1], m[2]];\n          } else {\n            return [200, 'OK'];\n          }\n        }\n      },\n      preview: {\n        url(uid) { return `https://img.youtube.com/vi/${uid}/0.jpg`; },\n        height: 360\n      }\n    }\n  ]\n};\nexport default Embedding;\n","import Notice from \"../classes/Notice\";\nimport Config from \"../config/Config\";\nimport Filter from \"../Filtering/Filter\";\nimport ThreadHiding from \"../Filtering/ThreadHiding\";\nimport BoardConfig from \"../General/BoardConfig\";\nimport Get from \"../General/Get\";\nimport Header from \"../General/Header\";\nimport Index from \"../General/Index\";\nimport Settings from \"../General/Settings\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport FappeTyme from \"../Images/FappeTyme\";\nimport Gallery from \"../Images/Gallery\";\nimport ImageExpand from \"../Images/ImageExpand\";\nimport Embedding from \"../Linkification/Embedding\";\nimport ThreadUpdater from \"../Monitoring/ThreadUpdater\";\nimport ThreadWatcher from \"../Monitoring/ThreadWatcher\";\nimport UnreadIndex from \"../Monitoring/UnreadIndex\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport QR from \"../Posting/QR\";\nimport QuoteThreading from \"../Quotelinks/QuoteThreading\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport CatalogLinks from \"./CatalogLinks\";\nimport ExpandThread from \"./ExpandThread\";\nimport Nav from \"./Nav\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Keybinds = {\n  init() {\n    if (!Conf['Keybinds']) { return; }\n\n    for (var hotkey in Config.hotkeys) {\n      $.sync(hotkey, Keybinds.sync);\n    }\n\n    var init = function() {\n      $.off(d, '4chanXInitFinished', init);\n      $.on(d, 'keydown', Keybinds.keydown);\n      for (var node of $$('[accesskey]')) {\n        node.removeAttribute('accesskey');\n      }\n    };\n    return $.on(d, '4chanXInitFinished', init);\n  },\n\n  sync(key, hotkey) {\n    return Conf[hotkey] = key;\n  },\n\n  keydown(e) {\n    let key, thread, threadRoot;\n    let catalog, notifications;\n    if (!(key = Keybinds.keyCode(e))) { return; }\n    const {target} = e;\n    if (['INPUT', 'TEXTAREA'].includes(target.nodeName)) {\n      if (!/(Esc|Alt|Ctrl|Meta|Shift\\+\\w{2,})/.test(key) || !!/^Alt\\+(\\d|Up|Down|Left|Right)$/.test(key)) { return; }\n    }\n    if (['index', 'thread'].includes(g.VIEW)) {\n      threadRoot = Nav.getThread();\n      thread = Get.threadFromRoot(threadRoot);\n    }\n    switch (key) {\n      // QR & Options\n      case Conf['Toggle board list']:\n        if (!Conf['Custom Board Navigation']) { return; }\n        Header.toggleBoardList();\n        break;\n      case Conf['Toggle header']:\n        Header.toggleBarVisibility();\n        break;\n      case Conf['Open empty QR']:\n        if (!QR.postingIsEnabled) { return; }\n        Keybinds.qr();\n        break;\n      case Conf['Open QR']:\n        if (!QR.postingIsEnabled || !threadRoot) { return; }\n        Keybinds.qr(threadRoot);\n        break;\n      case Conf['Open settings']:\n        Settings.open();\n        break;\n      case Conf['Close']:\n        if (Settings.dialog) {\n          Settings.close();\n        } else if ((notifications = $$('.notification')).length) {\n          for (var notification of notifications) {\n            $('.close', notification).click();\n          }\n        } else if (QR.nodes && !(QR.nodes.el.hidden || (window.getComputedStyle(QR.nodes.form).display === 'none'))) {\n          if (Conf['Persistent QR']) {\n            QR.hide();\n          } else {\n            QR.close();\n          }\n        } else if (Embedding.lastEmbed) {\n          Embedding.closeFloat();\n        } else {\n          return;\n        }\n        break;\n      case Conf['Spoiler tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('spoiler', target);\n        break;\n      case Conf['Code tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('code', target);\n        break;\n      case Conf['Eqn tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('eqn', target);\n        break;\n      case Conf['Math tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('math', target);\n        break;\n      case Conf['SJIS tags']:\n        if (target.nodeName !== 'TEXTAREA') { return; }\n        Keybinds.tags('sjis', target);\n        break;\n      case Conf['Toggle sage']:\n        if (!QR.nodes || !!QR.nodes.el.hidden) { return; }\n        Keybinds.sage();\n        break;\n      case Conf['Toggle Cooldown']:\n        if (!QR.nodes || !!QR.nodes.el.hidden || !$.hasClass(QR.nodes.fileSubmit, 'custom-cooldown')) { return; }\n        QR.toggleCustomCooldown();\n        break;\n      case Conf['Post from URL']:\n        if (!QR.postingIsEnabled) { return; }\n        QR.handleUrl('');\n        break;\n      case Conf['Add new post']:\n        if (!QR.postingIsEnabled) { return; }\n        QR.addPost();\n        break;\n      case Conf['Submit QR']:\n        if (!QR.nodes || !!QR.nodes.el.hidden) { return; }\n        if (!QR.status()) { QR.submit(); }\n        break;\n      // Index/Thread related\n      case Conf['Update']:\n        switch (g.VIEW) {\n          case 'thread':\n            if (!ThreadUpdater.enabled) { return; }\n            ThreadUpdater.update();\n            break;\n          case 'index':\n            if (!Index.enabled) { return; }\n            Index.update();\n            break;\n          default:\n            return;\n        }\n        break;\n      case Conf['Watch']:\n        if (!ThreadWatcher.enabled || !thread) { return; }\n        ThreadWatcher.toggle(thread);\n        break;\n      case Conf['Update thread watcher']:\n        if (!ThreadWatcher.enabled) { return; }\n        ThreadWatcher.buttonFetchAll();\n        break;\n      case Conf['Toggle thread watcher']:\n        if (!ThreadWatcher.enabled) { return; }\n        ThreadWatcher.toggleWatcher();\n        break;\n      case Conf['Toggle threading']:\n        if (!QuoteThreading.ready) { return; }\n        QuoteThreading.toggleThreading();\n        break;\n      case Conf['Mark thread read']:\n        if ((g.VIEW !== 'index') || !thread || !UnreadIndex.enabled) { return; }\n        UnreadIndex.markRead.call(threadRoot);\n        break;\n      // Images\n      case Conf['Expand image']:\n        if (!ImageExpand.enabled || !threadRoot) { return; }\n        var post = Get.postFromNode(Keybinds.post(threadRoot));\n        if (post.file) { ImageExpand.toggle(post); }\n        break;\n      case Conf['Expand images']:\n        if (!ImageExpand.enabled) { return; }\n        ImageExpand.cb.toggleAll();\n        break;\n      case Conf['Open Gallery']:\n        if (!Gallery.enabled) { return; }\n        Gallery.cb.toggle();\n        break;\n      case Conf['fappeTyme']:\n        if (!FappeTyme.nodes?.fappe) { return; }\n        FappeTyme.toggle('fappe');\n        break;\n      case Conf['werkTyme']:\n        if (!FappeTyme.nodes?.werk) { return; }\n        FappeTyme.toggle('werk');\n        break;\n      // Board Navigation\n      case Conf['Front page']:\n        if (Index.enabled) {\n          Index.userPageNav(1);\n        } else {\n          location.href = `/${g.BOARD}/`;\n        }\n        break;\n      case Conf['Open front page']:\n        $.open(`${location.origin}/${g.BOARD}/`);\n        break;\n      case Conf['Next page']:\n        if ((g.VIEW !== 'index') || !!g.SITE.isOnePage?.(g.BOARD)) { return; }\n        if (Index.enabled) {\n          if (!['paged', 'infinite'].includes(Conf['Index Mode'])) { return; }\n          $('.next button', Index.pagelist).click();\n        } else {\n          $(g.SITE.selectors.nav.next)?.click();\n        }\n        break;\n      case Conf['Previous page']:\n        if ((g.VIEW !== 'index') || !!g.SITE.isOnePage?.(g.BOARD)) { return; }\n        if (Index.enabled) {\n          if (!['paged', 'infinite'].includes(Conf['Index Mode'])) { return; }\n          $('.prev button', Index.pagelist).click();\n        } else {\n          $(g.SITE.selectors.nav.prev)?.click();\n        }\n        break;\n      case Conf['Search form']:\n        if (g.VIEW !== 'index') { return; }\n        var searchInput = Index.enabled ?\n          Index.searchInput\n        : g.SITE.selectors.searchBox ?\n          $(g.SITE.selectors.searchBox)\n        :\n          undefined;\n        if (!searchInput) { return; }\n        Header.scrollToIfNeeded(searchInput);\n        searchInput.focus();\n        break;\n      case Conf['Paged mode']:\n        if (!Index.enabledOn(g.BOARD)) { return; }\n        location.href = g.VIEW === 'index' ? '#paged' : `/${g.BOARD}/#paged`;\n        break;\n      case Conf['Infinite scrolling mode']:\n        if (!Index.enabledOn(g.BOARD)) { return; }\n        location.href = g.VIEW === 'index' ? '#infinite' : `/${g.BOARD}/#infinite`;\n        break;\n      case Conf['All pages mode']:\n        if (!Index.enabledOn(g.BOARD)) { return; }\n        location.href = g.VIEW === 'index' ? '#all-pages' : `/${g.BOARD}/#all-pages`;\n        break;\n      case Conf['Open catalog']:\n        if (!(catalog = CatalogLinks.catalog())) { return; }\n        location.href = catalog;\n        break;\n      case Conf['Cycle sort type']:\n        if (!Index.enabled) { return; }\n        Index.cycleSortType();\n        break;\n      // Thread Navigation\n      case Conf['Next thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Nav.scroll(+1);\n        break;\n      case Conf['Previous thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Nav.scroll(-1);\n        break;\n      case Conf['Expand thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        ExpandThread.toggle(thread);\n        // Keep thread from moving off screen when contracted.\n        Header.scrollTo(threadRoot);\n        break;\n      case Conf['Open thread']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Keybinds.open(thread);\n        break;\n      case Conf['Open thread tab']:\n        if ((g.VIEW !== 'index') || !threadRoot) { return; }\n        Keybinds.open(thread, true);\n        break;\n      // Reply Navigation\n      case Conf['Next reply']:\n        if (!threadRoot) { return; }\n        Keybinds.hl(+1, threadRoot);\n        break;\n      case Conf['Previous reply']:\n        if (!threadRoot) { return; }\n        Keybinds.hl(-1, threadRoot);\n        break;\n      case Conf['Deselect reply']:\n        if (!threadRoot) { return; }\n        Keybinds.hl(0, threadRoot);\n        break;\n      case Conf['Hide']:\n        if (!thread || !ThreadHiding.db) { return; }\n        Header.scrollTo(threadRoot);\n        ThreadHiding.toggle(thread);\n        break;\n      case Conf['Quick Filter MD5']:\n        if (!threadRoot) { return; }\n        post = Keybinds.post(threadRoot);\n        Keybinds.hl(+1, threadRoot);\n        Filter.quickFilterMD5.call(post, e);\n        break;\n      case Conf['Previous Post Quoting You']:\n        if (!threadRoot || !QuoteYou.db) { return; }\n        QuoteYou.cb.seek('preceding');\n        break;\n      case Conf['Next Post Quoting You']:\n        if (!threadRoot || !QuoteYou.db) { return; }\n        QuoteYou.cb.seek('following');\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n    return e.stopPropagation();\n  },\n\n  keyCode(e) {\n    let key = (() => { let kc;\n    switch ((kc = e.keyCode)) {\n      case 8: // return\n        return '';\n      case 13:\n        return 'Enter';\n      case 27:\n        return 'Esc';\n      case 32:\n        return 'Space';\n      case 37:\n        return 'Left';\n      case 38:\n        return 'Up';\n      case 39:\n        return 'Right';\n      case 40:\n        return 'Down';\n      case 188:\n        return 'Comma';\n      case 190:\n        return 'Period';\n      case 191:\n        return 'Slash';\n      case 59: case 186:\n        return 'Semicolon';\n      default:\n        if ((48 <= kc && kc <= 57) || (65 <= kc && kc <= 90)) { // 0-9, A-Z\n          return String.fromCharCode(kc).toLowerCase();\n        } else if (96 <= kc && kc <= 105) { // numpad 0-9\n          return String.fromCharCode(kc - 48).toLowerCase();\n        } else {\n          return null;\n        }\n    } })();\n    if (key) {\n      if (e.altKey) {   key = 'Alt+'   + key; }\n      if (e.ctrlKey) {  key = 'Ctrl+'  + key; }\n      if (e.metaKey) {  key = 'Meta+'  + key; }\n      if (e.shiftKey) { key = 'Shift+' + key; }\n    }\n    return key;\n  },\n\n  post(thread) {\n    const s = g.SITE.selectors;\n    return (\n      $(`${s.postContainer}${s.highlightable.reply}.${g.SITE.classes.highlight}`, thread) ||\n      $(`${g.SITE.isOPContainerThread ? s.thread : s.postContainer}${s.highlightable.op}`, thread)\n    );\n  },\n\n  qr(thread) {\n    QR.open();\n    if (thread != null) {\n      QR.quote.call(Keybinds.post(thread));\n    }\n    return QR.nodes.com.focus();\n  },\n\n  tags(tag, ta) {\n    BoardConfig.ready(function() {\n      const {config} = g.BOARD;\n      const supported = (() => { switch (tag) {\n        case 'spoiler':     return !!config.spoilers;\n        case 'code':        return !!config.code_tags;\n        case 'math': case 'eqn': return !!config.math_tags;\n        case 'sjis':        return !!config.sjis_tags;\n      } })();\n      if (!supported) { return new Notice('warning', `[${tag}] tags are not supported on /${g.BOARD}/.`, 20); }\n    });\n\n    const {\n      value\n    } = ta;\n    const selStart = ta.selectionStart;\n    const selEnd   = ta.selectionEnd;\n\n    ta.value =\n      value.slice(0, selStart) +\n      `[${tag}]` + value.slice(selStart, selEnd) + `[/${tag}]` +\n      value.slice(selEnd);\n\n    // Move the caret to the end of the selection.\n    const range = (`[${tag}]`).length + selEnd;\n    ta.setSelectionRange(range, range);\n\n    // Fire the 'input' event\n    return $.event('input', null, ta);\n  },\n\n  sage() {\n    const isSage  = /sage/i.test(QR.nodes.email.value);\n    return QR.nodes.email.value = isSage ?\n      \"\"\n    : \"sage\";\n  },\n\n  open(thread, tab) {\n    if (g.VIEW !== 'index') { return; }\n    const url = Get.url('thread', thread);\n    if (tab) {\n      return $.open(url);\n    } else {\n      return location.href = url;\n    }\n  },\n\n  hl(delta, thread) {\n    const replySelector = `${g.SITE.selectors.postContainer}${g.SITE.selectors.highlightable.reply}`;\n    const {highlight} = g.SITE.classes;\n\n    const postEl = $(`${replySelector}.${highlight}`, thread);\n\n    if (!delta) {\n      if (postEl) { $.rmClass(postEl, highlight); }\n      return;\n    }\n\n    if (postEl) {\n      const {height} = postEl.getBoundingClientRect();\n      if ((Header.getTopOf(postEl) >= -height) && (Header.getBottomOf(postEl) >= -height)) { // We're at least partially visible\n        let next;\n        const {root} = Get.postFromNode(postEl).nodes;\n        const axis = delta === +1 ?\n          'following'\n        :\n          'preceding';\n        if (!(next = $.x(`${axis}-sibling::${g.SITE.xpath.replyContainer}[not(@hidden) and not(child::div[@class='stub'])][1]`, root))) { return; }\n        if (!next.matches(replySelector)) { next = $(replySelector, next); }\n        Header.scrollToIfNeeded(next, delta === +1);\n        $.addClass(next, highlight);\n        $.rmClass(postEl, highlight);\n        return;\n      }\n      $.rmClass(postEl, highlight);\n    }\n\n    const replies = $$(replySelector, thread);\n    if (delta === -1) { replies.reverse(); }\n    for (var reply of replies) {\n      if (((delta === +1) && (Header.getTopOf(reply) > 0)) || ((delta === -1) && (Header.getBottomOf(reply) > 0))) {\n        $.addClass(reply, highlight);\n        return;\n      }\n    }\n  }\n};\nexport default Keybinds;\n","import $ from \"../platform/$\";\nimport CaptchaReplace from \"./Captcha.replace\";\nimport CaptchaT from \"./Captcha.t\";\nimport meta from '../../package.json';\nimport Main from \"../main/Main\";\nimport Keybinds from \"../Miscellaneous/Keybinds\";\nimport $$ from \"../platform/$$\";\nimport QR from \"./QR\";\nimport { Conf, d } from \"../globals/globals\";\nimport { MINUTE, SECOND } from \"../platform/helpers\";\n\nconst Captcha = {\n  Cache: {\n    init() {\n      $.on(d, 'SaveCaptcha', e => {\n        return this.saveAPI(e.detail);\n      });\n      return $.on(d, 'NoCaptcha', e => {\n        return this.noCaptcha(e.detail);\n      });\n    },\n\n    captchas: [],\n\n    getCount() {\n      return this.captchas.length;\n    },\n\n    neededRaw() {\n      return !(\n        this.haveCookie() || this.captchas.length || QR.req || this.submitCB\n      ) && (\n          (QR.posts.length > 1) || Conf['Auto-load captcha'] || !QR.posts[0].isOnlyQuotes() || QR.posts[0].file\n        );\n    },\n\n    needed() {\n      return this.neededRaw() && $.event('LoadCaptcha');\n    },\n\n    prerequest() {\n      if (!Conf['Prerequest Captcha']) { return; }\n      // Post count temporarily off by 1 when called from QR.post.rm, QR.close, or QR.submit\n      return $.queueTask(() => {\n        if (\n          !this.prerequested &&\n          this.neededRaw() &&\n          !$.event('LoadCaptcha') &&\n          !QR.captcha.occupied() &&\n          (QR.cooldown.seconds <= 60) &&\n          (QR.selected === QR.posts[QR.posts.length - 1]) &&\n          !QR.selected.isOnlyQuotes()\n        ) {\n          const isReply = (QR.selected.thread !== 'new');\n          if (!$.event('RequestCaptcha', { isReply })) {\n            this.prerequested = true;\n            this.submitCB = captcha => {\n              if (captcha) { return this.save(captcha); }\n            };\n            return this.updateCount();\n          }\n        }\n      });\n    },\n\n    haveCookie() {\n      return /\\b_ct=/.test(d.cookie) && (QR.posts[0].thread !== 'new');\n    },\n\n    getOne() {\n      let captcha;\n      delete this.prerequested;\n      this.clear();\n      if (captcha = this.captchas.shift()) {\n        this.count();\n        return captcha;\n      } else {\n        return null;\n      }\n    },\n\n    request(isReply) {\n      if (!this.submitCB) {\n        if ($.event('RequestCaptcha', { isReply })) { return; }\n      }\n      return cb => {\n        this.submitCB = cb;\n        return this.updateCount();\n      };\n    },\n\n    abort() {\n      if (this.submitCB) {\n        delete this.submitCB;\n        $.event('AbortCaptcha');\n        return this.updateCount();\n      }\n    },\n\n    saveAPI(captcha) {\n      let cb;\n      if (cb = this.submitCB) {\n        delete this.submitCB;\n        cb(captcha);\n        return this.updateCount();\n      } else {\n        return this.save(captcha);\n      }\n    },\n\n    noCaptcha(detail) {\n      let cb;\n      if (cb = this.submitCB) {\n        if (!this.haveCookie() || detail?.error) {\n          QR.error(detail?.error || 'Failed to retrieve captcha.');\n          QR.captcha.setup(d.activeElement === QR.nodes.status);\n        }\n        delete this.submitCB;\n        cb();\n        return this.updateCount();\n      }\n    },\n\n    save(captcha) {\n      let cb;\n      if (cb = this.submitCB) {\n        this.abort();\n        cb(captcha);\n        return;\n      }\n      this.captchas.push(captcha);\n      this.captchas.sort((a, b) => a.timeout - b.timeout);\n      return this.count();\n    },\n\n    clear() {\n      if (this.captchas.length) {\n        let i;\n        const now = Date.now();\n        for (i = 0; i < this.captchas.length; i++) {\n          var captcha = this.captchas[i];\n          if (captcha.timeout > now) { break; }\n        }\n        if (i) {\n          this.captchas = this.captchas.slice(i);\n          return this.count();\n        }\n      }\n    },\n\n    count() {\n      clearTimeout(this.timer);\n      if (this.captchas.length) {\n        this.timer = setTimeout(this.clear.bind(this), this.captchas[0].timeout - Date.now());\n      }\n      return this.updateCount();\n    },\n\n    updateCount() {\n      return $.event('CaptchaCount', this.captchas.length);\n    }\n  }, Replace: CaptchaReplace, t: CaptchaT, v2: {\n    lifetime: 2 * MINUTE,\n\n    init() {\n      if (d.cookie.indexOf('pass_enabled=1') >= 0) { return; }\n      if (!(this.isEnabled = !!$('#g-recaptcha, #captcha-forced-noscript') || !$.id('postForm'))) { return; }\n\n      if (this.noscript = Conf['Force Noscript Captcha'] || !Main.jsEnabled) {\n        $.addClass(QR.nodes.el, 'noscript-captcha');\n      }\n\n      Captcha.cache.init();\n      $.on(d, 'CaptchaCount', this.count.bind(this));\n\n      const root = $.el('div', { className: 'captcha-root' });\n      $.extend(root, {\n        innerHTML:\n          '<div class=\"captcha-counter\"><a href=\"javascript:;\"></a></div>'\n      }\n      );\n      const counter = $('.captcha-counter > a', root);\n      this.nodes = { root, counter };\n      this.count();\n      $.addClass(QR.nodes.el, 'has-captcha', 'captcha-v2');\n      $.after(QR.nodes.com.parentNode, root);\n\n      $.on(counter, 'click', this.toggle.bind(this));\n      $.on(counter, 'keydown', e => {\n        if (Keybinds.keyCode(e) !== 'Space') { return; }\n        this.toggle();\n        e.preventDefault();\n        return e.stopPropagation();\n      });\n      return $.on(window, 'captcha:success', () => {\n        // XXX Greasemonkey 1.x workaround to gain access to GM_* functions.\n        return $.queueTask(() => this.save(false));\n      });\n    },\n\n    timeouts: {},\n    prevNeeded: 0,\n\n    noscriptURL() {\n      let lang;\n      let url = `https://www.google.com/recaptcha/api/fallback?k=${meta.recaptchaKey}`;\n      if (lang = Conf['captchaLanguage'].trim()) {\n        url += `&hl=${encodeURIComponent(lang)}`;\n      }\n      return url;\n    },\n\n    moreNeeded() {\n      // Post count temporarily off by 1 when called from QR.post.rm, QR.close, or QR.submit\n      return $.queueTask(() => {\n        const needed = Captcha.cache.needed();\n        if (needed && !this.prevNeeded) {\n          this.setup(QR.cooldown.auto && (d.activeElement === QR.nodes.status));\n        }\n        return this.prevNeeded = needed;\n      });\n    },\n\n    toggle() {\n      if (this.nodes.container && !this.timeouts.destroy) {\n        return this.destroy();\n      } else {\n        return this.setup(true, true);\n      }\n    },\n\n    setup(focus, force) {\n      if (!this.isEnabled || (!Captcha.cache.needed() && !force)) { return; }\n\n      if (focus) {\n        $.addClass(QR.nodes.el, 'focus');\n        this.nodes.counter.focus();\n      }\n\n      if (this.timeouts.destroy) {\n        clearTimeout(this.timeouts.destroy);\n        delete this.timeouts.destroy;\n        return this.reload();\n      }\n\n      if (this.nodes.container) {\n        // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=1226835\n        $.queueTask(() => {\n          let iframe;\n          if (this.nodes.container && (d.activeElement === this.nodes.counter) && (iframe = $('iframe[src^=\"https://www.google.com/recaptcha/\"]', this.nodes.container))) {\n            iframe.focus();\n            return QR.focus();\n          }\n        }); // Event handler not fired in Firefox\n        return;\n      }\n\n      this.nodes.container = $.el('div', { className: 'captcha-container' });\n      $.prepend(this.nodes.root, this.nodes.container);\n      new MutationObserver(this.afterSetup.bind(this)).observe(this.nodes.container, {\n        childList: true,\n        subtree: true\n      }\n      );\n\n      if (this.noscript) {\n        return this.setupNoscript();\n      } else {\n        return this.setupJS();\n      }\n    },\n\n    setupNoscript() {\n      const iframe = $.el('iframe', {\n        id: 'qr-captcha-iframe',\n        scrolling: 'no',\n        src: this.noscriptURL()\n      }\n      );\n      const div = $.el('div');\n      const textarea = $.el('textarea');\n      $.add(div, textarea);\n      return $.add(this.nodes.container, [iframe, div]);\n    },\n\n    setupJS() {\n      return $.global(function () {\n        const render = function () {\n          const { classList } = document.documentElement;\n          const container = document.querySelector('#qr .captcha-container');\n          return container.dataset.widgetID = window.grecaptcha.render(container, {\n            sitekey: meta.recaptchaKey,\n            theme: classList.contains('tomorrow') || classList.contains('spooky') || classList.contains('dark-captcha') ? 'dark' : 'light',\n            callback(response) {\n              return window.dispatchEvent(new CustomEvent('captcha:success', { detail: response }));\n            }\n          }\n          );\n        };\n        if (window.grecaptcha) {\n          return render();\n        } else {\n          const cbNative = window.onRecaptchaLoaded;\n          window.onRecaptchaLoaded = function () {\n            render();\n            return cbNative();\n          };\n          if (!document.head.querySelector('script[src^=\"https://www.google.com/recaptcha/api.js\"]')) {\n            const script = document.createElement('script');\n            script.src = 'https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoaded&render=explicit';\n            return document.head.appendChild(script);\n          }\n        }\n      });\n    },\n\n    afterSetup(mutations) {\n      for (var mutation of mutations) {\n        for (var node of mutation.addedNodes) {\n          var iframe, textarea;\n          if (iframe = $.x('./descendant-or-self::iframe[starts-with(@src, \"https://www.google.com/recaptcha/\")]', node)) { this.setupIFrame(iframe); }\n          if (textarea = $.x('./descendant-or-self::textarea', node)) { this.setupTextArea(textarea); }\n        }\n      }\n    },\n\n    setupIFrame(iframe) {\n      let needle;\n      if (!doc.contains(iframe)) { return; }\n      Captcha.replace.iframe(iframe);\n      $.addClass(QR.nodes.el, 'captcha-open');\n      this.fixQRPosition();\n      $.on(iframe, 'load', this.fixQRPosition);\n      if (d.activeElement === this.nodes.counter) { iframe.focus(); }\n      // XXX Make sure scroll on space prevention (see src/css/style.css) doesn't cause scrolling of div\n      if (['blink', 'edge'].includes($.engine) && (needle = iframe.parentNode, $$('#qr .captcha-container > div > div:first-of-type').includes(needle))) {\n        return $.on(iframe.parentNode, 'scroll', function () { return this.scrollTop = 0; });\n      }\n    },\n\n    fixQRPosition() {\n      if (QR.nodes.el.getBoundingClientRect().bottom > doc.clientHeight) {\n        QR.nodes.el.style.top = '';\n        return QR.nodes.el.style.bottom = '0px';\n      }\n    },\n\n    setupTextArea(textarea) {\n      return $.one(textarea, 'input', () => this.save(true));\n    },\n\n    destroy() {\n      if (!this.isEnabled) { return; }\n      delete this.timeouts.destroy;\n      $.rmClass(QR.nodes.el, 'captcha-open');\n      if (this.nodes.container) {\n        $.global(function () {\n          const container = document.querySelector('#qr .captcha-container');\n          return window.grecaptcha.reset(container.dataset.widgetID);\n        });\n        $.rm(this.nodes.container);\n        return delete this.nodes.container;\n      }\n    },\n\n    getOne(isReply) {\n      return Captcha.cache.getOne(isReply);\n    },\n\n    save(pasted, token) {\n      Captcha.cache.save({\n        response: token || $('textarea', this.nodes.container).value,\n        timeout: Date.now() + this.lifetime\n      });\n\n      const focus = (d.activeElement?.nodeName === 'IFRAME') && /https?:\\/\\/www\\.google\\.com\\/recaptcha\\//.test(d.activeElement.src);\n      if (Captcha.cache.needed()) {\n        if (focus) {\n          if (QR.cooldown.auto || Conf['Post on Captcha Completion']) {\n            this.nodes.counter.focus();\n          } else {\n            QR.nodes.status.focus();\n          }\n        }\n        this.reload();\n      } else {\n        if (pasted) {\n          this.destroy();\n        } else {\n          if (this.timeouts.destroy == null) { this.timeouts.destroy = setTimeout(this.destroy.bind(this), 3 * SECOND); }\n        }\n        if (focus) { QR.nodes.status.focus(); }\n      }\n\n      if (Conf['Post on Captcha Completion'] && !QR.cooldown.auto) { return QR.submit(); }\n    },\n\n    count() {\n      const count = Captcha.cache.getCount();\n      const loading = Captcha.cache.submitCB ? '...' : '';\n      this.nodes.counter.textContent = `Captchas: ${count}${loading}`;\n      return this.moreNeeded();\n    },\n\n    reload() {\n      if ($('iframe[src^=\"https://www.google.com/recaptcha/api/fallback?\"]', this.nodes.container)) {\n        this.destroy();\n        return this.setup(false, true);\n      } else {\n        return $.global(function () {\n          const container = document.querySelector('#qr .captcha-container');\n          return window.grecaptcha.reset(container.dataset.widgetID);\n        });\n      }\n    },\n\n    occupied() {\n      return !!this.nodes.container && !this.timeouts.destroy;\n    }\n  }\n};\nexport default Captcha;\n","import QuickReplyPage from './QR/QuickReply.html';\nimport $ from '../platform/$';\nimport Callbacks from '../classes/Callbacks';\nimport Notice from '../classes/Notice';\nimport Main from '../main/Main';\nimport Favicon from '../Monitoring/Favicon';\nimport $$ from '../platform/$$';\nimport CrossOrigin from '../platform/CrossOrigin';\nimport Captcha from './Captcha';\nimport meta from '../../package.json';\nimport Header from '../General/Header';\nimport { Conf, E, d, doc, g } from '../globals/globals';\nimport Menu from '../Menu/Menu';\nimport UI from '../General/UI';\nimport BoardConfig from '../General/BoardConfig';\nimport Get from '../General/Get';\nimport { DAY, dict, SECOND } from '../platform/helpers';\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS202: Simplify dynamic range loops\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\n\nvar QR = {\n  mimeTypes: ['image/jpeg', 'image/png', 'image/gif', 'application/pdf', 'application/vnd.adobe.flash.movie', 'application/x-shockwave-flash', 'video/webm'],\n\n  validExtension: /\\.(jpe?g|png|gif|pdf|swf|webm)$/i,\n\n  typeFromExtension: {\n    'jpg':  'image/jpeg',\n    'jpeg': 'image/jpeg',\n    'png':  'image/png',\n    'gif':  'image/gif',\n    'pdf':  'application/pdf',\n    'swf':  'application/vnd.adobe.flash.movie',\n    'webm': 'video/webm'\n  },\n\n  extensionFromType: {\n    'image/jpeg': 'jpg',\n    'image/png': 'png',\n    'image/gif': 'gif',\n    'application/pdf': 'pdf',\n    'application/vnd.adobe.flash.movie': 'swf',\n    'application/x-shockwave-flash': 'swf',\n    'video/webm': 'webm'\n  },\n\n  init() {\n    let sc;\n    if (!Conf['Quick Reply']) { return; }\n\n    this.posts = [];\n\n    $.on(d, '4chanXInitFinished', () => BoardConfig.ready(QR.initReady));\n\n    Callbacks.Post.push({\n      name: 'Quick Reply',\n      cb:   this.node\n    });\n\n    this.shortcut = (sc = $.el('a', {\n      className: 'disabled',\n      textContent: '',\n      title: 'Quick Reply',\n      href: 'javascript:;'\n    }\n    ));\n    $.on(sc, 'click', function() {\n      if (!QR.postingIsEnabled) { return; }\n      if (Conf['Persistent QR'] || !QR.nodes || QR.nodes.el.hidden) {\n        QR.open();\n        return QR.nodes.com.focus();\n      } else {\n        return QR.close();\n      }\n    });\n\n    return Header.addShortcut('qr', sc, 540);\n  },\n\n  initReady() {\n    let origToggle;\n    const captchaVersion = $('#g-recaptcha, #captcha-forced-noscript') ? 'v2' : 't';\n    QR.captcha = Captcha[captchaVersion];\n    QR.postingIsEnabled = true;\n\n    const {config} = g.BOARD;\n    const prop = (key, def) => +(config[key] ?? def);\n\n    QR.min_width  = prop('min_image_width',  1);\n    QR.min_height = prop('min_image_height', 1);\n    QR.max_width  = (QR.max_height = 10000);\n\n    QR.max_size       = prop('max_filesize',      4194304);\n    QR.max_size_video = prop('max_webm_filesize', QR.max_size);\n    QR.max_comment    = prop('max_comment_chars', 2000);\n\n    QR.max_width_video = (QR.max_height_video = 2048);\n    QR.max_duration_video = prop('max_webm_duration', 120);\n\n    QR.forcedAnon = !!config.forced_anon;\n    QR.spoiler    = !!config.spoilers;\n\n    if (origToggle = $.id('togglePostFormLink')) {\n      const link = $.el('h1',\n        {className: \"qr-link-container\"});\n      $.extend(link, {\n        innerHTML:\n          `<a href=\"javascript:;\" class=\"qr-link\">${g.VIEW === \"thread\" ? \"Reply to Thread\" : \"Start a Thread\"}</a>`\n      });\n\n      QR.link = link.firstElementChild;\n      $.on(link.firstChild, 'click', function() {\n        QR.open();\n        return QR.nodes.com.focus();\n      });\n\n      $.before(origToggle, link);\n      origToggle.firstElementChild.textContent = 'Original Form';\n    }\n\n    if (g.VIEW === 'thread') {\n      let navLinksBot;\n      const linkBot = $.el('div',\n        {className: \"brackets-wrap qr-link-container-bottom\"});\n      $.extend(linkBot, {innerHTML: '<a href=\"javascript:;\" class=\"qr-link-bottom\">Reply to Thread</a>'});\n\n      $.on(linkBot.firstElementChild, 'click', function() {\n        QR.open();\n        return QR.nodes.com.focus();\n      });\n\n      if (navLinksBot = $('.navLinksBot')) { $.prepend(navLinksBot, linkBot); }\n    }\n\n    $.on(d, 'QRGetFile',          QR.getFile);\n    $.on(d, 'QRDrawFile',         QR.drawFile);\n    $.on(d, 'QRSetFile',          QR.setFile);\n\n    $.on(d, 'paste',              QR.paste);\n    $.on(d, 'dragover',           QR.dragOver);\n    $.on(d, 'drop',               QR.dropFile);\n    $.on(d, 'dragstart dragend',  QR.drag);\n\n    $.on(d, 'IndexRefreshInternal', QR.generatePostableThreadsList);\n    $.on(d, 'ThreadUpdate', QR.statusCheck);\n\n    if (!Conf['Persistent QR']) { return; }\n    QR.open();\n    if (Conf['Auto Hide QR']) { return QR.hide(); }\n  },\n\n  statusCheck() {\n    if (!QR.nodes) { return; }\n    const {thread} = QR.posts[0];\n    if ((thread !== 'new') && g.threads.get(`${g.BOARD}.${thread}`).isDead) {\n      return QR.abort();\n    } else {\n      return QR.status();\n    }\n  },\n\n  node() {\n    $.on(this.nodes.quote, 'click', QR.quote);\n    if (this.isFetchedQuote) { return QR.generatePostableThreadsList(); }\n  },\n\n  open() {\n    if (QR.nodes) {\n      if (QR.nodes.el.hidden) { QR.captcha.setup(); }\n      QR.nodes.el.hidden = false;\n      QR.unhide();\n    } else {\n      try {\n        QR.dialog();\n      } catch (err) {\n        delete QR.nodes;\n        Main.handleErrors({\n          message: 'Quick Reply dialog creation crashed.',\n          error: err\n        });\n        return;\n      }\n    }\n    return $.rmClass(QR.shortcut, 'disabled');\n  },\n\n  close() {\n    if (QR.req) {\n      QR.abort();\n      return;\n    }\n    QR.nodes.el.hidden = true;\n    QR.cleanNotifications();\n    QR.blur();\n    $.rmClass(QR.nodes.el, 'dump');\n    $.addClass(QR.shortcut, 'disabled');\n    new QR.post(true);\n    for (var post of QR.posts.splice(0, QR.posts.length - 1)) {\n      post.delete();\n    }\n    QR.cooldown.auto = false;\n    QR.status();\n    return QR.captcha.destroy();\n  },\n\n  focus() {\n    return $.queueTask(function() {\n      if (!QR.inBubble()) {\n        QR.hasFocus = d.activeElement && QR.nodes.el.contains(d.activeElement);\n        return QR.nodes.el.classList.toggle('focus', QR.hasFocus);\n      }\n    });\n  },\n\n  inBubble() {\n    const bubbles = $$('iframe[src^=\"https://www.google.com/recaptcha/api2/frame\"]');\n    return bubbles.includes(d.activeElement) || bubbles.some(el => (getComputedStyle(el).visibility !== 'hidden') && (el.getBoundingClientRect().bottom > 0));\n  },\n\n  hide() {\n    QR.blur();\n    $.addClass(QR.nodes.el, 'autohide');\n    return QR.nodes.autohide.checked = true;\n  },\n\n  unhide() {\n    $.rmClass(QR.nodes.el, 'autohide');\n    return QR.nodes.autohide.checked = false;\n  },\n\n  toggleHide() {\n    if (this.checked) {\n      return QR.hide();\n    } else {\n      return QR.unhide();\n    }\n  },\n\n  blur() {\n    if (QR.nodes.el.contains(d.activeElement)) { return d.activeElement.blur(); }\n  },\n\n  toggleSJIS(e) {\n    e.preventDefault();\n    Conf['sjisPreview'] = !Conf['sjisPreview'];\n    $.set('sjisPreview', Conf['sjisPreview']);\n    return QR.nodes.el.classList.toggle('sjis-preview', Conf['sjisPreview']);\n  },\n\n  texPreviewShow() {\n    if ($.hasClass(QR.nodes.el, 'tex-preview')) { return QR.texPreviewHide(); }\n    $.addClass(QR.nodes.el, 'tex-preview');\n    QR.nodes.texPreview.textContent = QR.nodes.com.value;\n    return $.event('mathjax', null, QR.nodes.texPreview);\n  },\n\n  texPreviewHide() {\n    return $.rmClass(QR.nodes.el, 'tex-preview');\n  },\n\n  addPost() {\n    const wasOpen = (QR.nodes && !QR.nodes.el.hidden);\n    QR.open();\n    if (wasOpen) {\n      $.addClass(QR.nodes.el, 'dump');\n      new QR.post(true);\n    }\n    return QR.nodes.com.focus();\n  },\n\n  setCustomCooldown(enabled) {\n    Conf['customCooldownEnabled'] = enabled;\n    QR.cooldown.customCooldown = enabled;\n    return QR.nodes.customCooldown.classList.toggle('disabled', !enabled);\n  },\n\n  toggleCustomCooldown() {\n    const enabled = $.hasClass(QR.nodes.customCooldown, 'disabled');\n    QR.setCustomCooldown(enabled);\n    return $.set('customCooldownEnabled', enabled);\n  },\n\n  error(err, focusOverride) {\n    let el;\n    QR.open();\n    if (typeof err === 'string') {\n      el = $.tn(err);\n    } else {\n      el = err;\n      el.removeAttribute('style');\n    }\n    const notice = new Notice('warning', el);\n    QR.notifications.push(notice);\n    if (!Header.areNotificationsEnabled) {\n      if (d.hidden && !QR.cooldown.auto) { return alert(el.textContent); }\n    } else if (d.hidden || !(focusOverride || d.hasFocus())) {\n      const notif = new Notification(el.textContent, {\n        body: el.textContent,\n        icon: Favicon.logo\n      }\n      );\n      notif.onclick = () => window.focus();\n      if ($.engine !== 'gecko') {\n        // Firefox automatically closes notifications\n        // so we can't control the onclose properly.\n        notif.onclose = () => notice.close();\n        return notif.onshow  = () => setTimeout(function() {\n          notif.onclose = null;\n          return notif.close();\n        }\n        , 7 * SECOND);\n      }\n    }\n  },\n\n  connectionError() {\n    return $.el('span',\n      { innerHTML:\n        'Connection error while posting. ' +\n        '[<a href=\"' + meta.faq + '#connection-errors\" target=\"_blank\">More info</a>]'\n      }\n    );\n  },\n\n  notifications: [],\n\n  cleanNotifications() {\n    for (var notification of QR.notifications) {\n      notification.close();\n    }\n    return QR.notifications = [];\n  },\n\n  status() {\n    let disabled, value;\n    if (!QR.nodes) { return; }\n    const {thread} = QR.posts[0];\n    if ((thread !== 'new') && g.threads.get(`${g.BOARD}.${thread}`).isDead) {\n      value    = 'Dead';\n      disabled = true;\n      QR.cooldown.auto = false;\n    }\n\n    value = QR.req ?\n      QR.req.progress\n    :\n      QR.cooldown.seconds || value;\n\n    const {status} = QR.nodes;\n    status.value = !value ?\n      'Submit'\n    : QR.cooldown.auto ?\n      `Auto ${value}`\n    :\n      value;\n    return status.disabled = disabled || false;\n  },\n\n  openPost() {\n    QR.open();\n    if (QR.selected.isLocked) {\n      const index = QR.posts.indexOf(QR.selected);\n      (QR.posts[index+1] || new QR.post()).select();\n      $.addClass(QR.nodes.el, 'dump');\n      return QR.cooldown.auto = true;\n    }\n  },\n\n  quote(e) {\n    let range;\n    e?.preventDefault();\n    if (!QR.postingIsEnabled) { return; }\n    const sel  = d.getSelection();\n    const post = Get.postFromNode(this);\n    const {root} = post.nodes;\n    const postRange = new Range();\n    postRange.selectNode(root);\n    let text = post.board.ID === g.BOARD.ID ? `>>${post}\\n` : `>>>/${post.board}/${post}\\n`;\n    for (let i = 0, end = sel.rangeCount, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n      try {\n        var insideCode, node;\n        range = sel.getRangeAt(i);\n        // Trim range to be fully inside post\n        if (range.compareBoundaryPoints(Range.START_TO_START, postRange) < 0) {\n          range.setStartBefore(root);\n        }\n        if (range.compareBoundaryPoints(Range.END_TO_END, postRange) > 0) {\n          range.setEndAfter(root);\n        }\n\n        if (!range.toString().trim()) { continue; }\n\n        var frag  = range.cloneContents();\n        var ancestor = range.commonAncestorContainer;\n        // Quoting the insides of a spoiler/code tag.\n        if ($.x('ancestor-or-self::*[self::s or contains(@class,\"removed-spoiler\")]', ancestor)) {\n          $.prepend(frag, $.tn('[spoiler]'));\n          $.add(frag, $.tn('[/spoiler]'));\n        }\n        if (insideCode = $.x('ancestor-or-self::pre[contains(@class,\"prettyprint\")]', ancestor)) {\n          $.prepend(frag, $.tn('[code]'));\n          $.add(frag, $.tn('[/code]'));\n        }\n        for (node of $$((insideCode ? 'br' : '.prettyprint br'), frag)) {\n          $.replace(node, $.tn('\\n'));\n        }\n        for (node of $$('br', frag)) {\n          if (node !== frag.lastChild) { $.replace(node, $.tn('\\n>')); }\n        }\n        g.SITE.insertTags?.(frag);\n        for (node of $$('.linkify[data-original]', frag)) {\n          $.replace(node, $.tn(node.dataset.original));\n        }\n        for (node of $$('.embedder', frag)) {\n          if (node.previousSibling?.nodeValue === ' ') { $.rm(node.previousSibling); }\n          $.rm(node);\n        }\n        text += `>${frag.textContent.trim()}\\n`;\n      } catch (error) { }\n    }\n\n    QR.openPost();\n    const {com, thread} = QR.nodes;\n    if (!com.value) { thread.value = Get.threadFromNode(this); }\n\n    const wasOnlyQuotes = QR.selected.isOnlyQuotes();\n\n    const caretPos = com.selectionStart;\n    // Replace selection for text.\n    com.value = com.value.slice(0, caretPos) + text + com.value.slice(com.selectionEnd);\n    // Move the caret to the end of the new quote.\n    range = caretPos + text.length;\n    com.setSelectionRange(range, range);\n    com.focus();\n\n    // This allows us to determine if any text other than quotes has been typed.\n    if (wasOnlyQuotes) { QR.selected.quotedText = com.value; }\n\n    QR.selected.save(com);\n    return QR.selected.save(thread);\n  },\n\n  characterCount() {\n    const counter = QR.nodes.charCount;\n    const count   = QR.nodes.com.value.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, '_').length;\n    counter.textContent = count;\n    counter.hidden      = count < (QR.max_comment/2);\n    return (count > QR.max_comment ? $.addClass : $.rmClass)(counter, 'warning');\n  },\n\n  getFile() {\n    return $.event('QRFile', QR.selected?.file);\n  },\n\n  drawFile(e) {\n    const file = QR.selected?.file;\n    if (!file || !/^(image|video)\\//.test(file.type)) { return; }\n    const isVideo = /^video\\//.test(file);\n    const el = $.el((isVideo ? 'video' : 'img'));\n    $.on(el, 'error', () => QR.openError());\n    $.on(el, (isVideo ? 'loadeddata' : 'load'), function() {\n      e.target.getContext('2d').drawImage(el, 0, 0);\n      URL.revokeObjectURL(el.src);\n      return $.event('QRImageDrawn', null, e.target);\n    });\n    return el.src = URL.createObjectURL(file);\n  },\n\n  openError() {\n    const div = $.el('div');\n    $.extend(div, {\n      innerHTML:\n        'Could not open file. [<a href=\"' + E(meta.faq) + '#error-reading-metadata\" target=\"_blank\">More info</a>]'\n    });\n    return QR.error(div);\n  },\n\n  setFile(e) {\n    const {file, name, source} = e.detail;\n    if (name != null) { file.name   = name; }\n    if (source != null) { file.source = source; }\n    QR.open();\n    return QR.handleFiles([file]);\n  },\n\n  drag(e) {\n    // Let it drag anything from the page.\n    const toggle = e.type === 'dragstart' ? $.off : $.on;\n    toggle(d, 'dragover', QR.dragOver);\n    return toggle(d, 'drop',     QR.dropFile);\n  },\n\n  dragOver(e) {\n    e.preventDefault();\n    return e.dataTransfer.dropEffect = 'copy';\n  }, // cursor feedback\n\n  dropFile(e) {\n    // Let it only handle files from the desktop.\n    if (!e.dataTransfer.files.length) { return; }\n    e.preventDefault();\n    QR.open();\n    return QR.handleFiles(e.dataTransfer.files);\n  },\n\n  paste(e) {\n    if (!e.clipboardData.items) { return; }\n    let file = null;\n    let score = -1;\n    for (var item of e.clipboardData.items) {\n      var file2;\n      if ((item.kind === 'file') && (file2 = item.getAsFile())) {\n        var score2 = (2*(file2.size <= QR.max_size)) + (file2.type === 'image/png');\n        if (score2 > score) {\n          file = file2;\n          score = score2;\n        }\n      }\n    }\n    if (file) {\n      const {type} = file;\n      const blob = new Blob([file], {type});\n      blob.name = `${Conf['pastedname']}.${$.getOwn(QR.extensionFromType, type) || 'jpg'}`;\n      QR.open();\n      QR.handleFiles([blob]);\n      $.addClass(QR.nodes.el, 'dump');\n    }\n  },\n\n  pasteFF() {\n    const {pasteArea} = QR.nodes;\n    if (!pasteArea.childNodes.length) { return; }\n    const images = $$('img', pasteArea);\n    $.rmAll(pasteArea);\n    for (var img of images) {\n      var m;\n      var {src} = img;\n      if (m = src.match(/data:(image\\/(\\w+));base64,(.+)/)) {\n        var bstr = atob(m[3]);\n        var arr = new Uint8Array(bstr.length);\n        for (var i = 0, end = bstr.length, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n          arr[i] = bstr.charCodeAt(i);\n        }\n        var blob = new Blob([arr], {type: m[1]});\n        blob.name = `${Conf['pastedname']}.${m[2]}`;\n        QR.handleFiles([blob]);\n      } else if (/^https?:\\/\\//.test(src)) {\n        QR.handleUrl(src);\n      }\n    }\n  },\n\n  handleUrl(urlDefault) {\n    QR.open();\n    QR.selected.preventAutoPost();\n    return CrossOrigin.permission(function() {\n      const url = prompt('Enter a URL:', urlDefault);\n      if (url === null) { return; }\n      QR.nodes.fileButton.focus();\n      return CrossOrigin.file(url, function(blob) {\n        if (blob && !/^text\\//.test(blob.type)) {\n          return QR.handleFiles([blob]);\n        } else {\n          return QR.error(\"Can't load file.\");\n        }\n      });\n    });\n  },\n\n  handleFiles(files) {\n    if (this !== QR) { // file input\n      files  = [...this.files];\n      this.value = null;\n    }\n    if (!files.length) { return; }\n    QR.cleanNotifications();\n    for (var file of files) {\n      QR.handleFile(file, files.length);\n    }\n    if (files.length !== 1) { $.addClass(QR.nodes.el, 'dump'); }\n    if ((d.activeElement === QR.nodes.fileButton) && $.hasClass(QR.nodes.fileSubmit, 'has-file')) {\n      return QR.nodes.filename.focus();\n    }\n  },\n\n  handleFile(file, nfiles) {\n    let post;\n    const isText = /^text\\//.test(file.type);\n    if (nfiles === 1) {\n      post = QR.selected;\n    } else {\n      post = QR.posts[QR.posts.length - 1];\n      if (isText ? post.com || post.pasting : post.file) {\n        post = new QR.post();\n      }\n    }\n    return post[isText ? 'pasteText' : 'setFile'](file);\n  },\n\n  openFileInput() {\n    if (QR.nodes.fileButton.disabled) { return; }\n    QR.nodes.fileInput.click();\n    return QR.nodes.fileButton.focus();\n  },\n\n  generatePostableThreadsList() {\n    if (!QR.nodes) { return; }\n    const list    = QR.nodes.thread;\n    const options = [list.firstElementChild];\n    for (var thread of g.BOARD.threads.keys) {\n      options.push($.el('option', {\n        value: thread,\n        textContent: `Thread ${thread}`\n      }\n      )\n      );\n    }\n    const val = list.value;\n    $.rmAll(list);\n    $.add(list, options);\n    list.value = val;\n    if (list.value === val) { return; }\n    // Fix the value if the option disappeared.\n    list.value = g.VIEW === 'thread' ?\n      g.THREADID\n    :\n      'new';\n    return (g.VIEW === 'thread' ? $.addClass : $.rmClass)(QR.nodes.el, 'reply-to-thread');\n  },\n\n  dialog() {\n    let dialog, event, nodes;\n    let name;\n    QR.nodes = (nodes = {\n      el: (dialog = UI.dialog('qr',\n        { innerHTML: QuickReplyPage }))\n    });\n\n    const setNode = (name, query) => nodes[name] = $(query, dialog);\n\n    setNode('move',           '.move');\n    setNode('autohide',       '#autohide');\n    setNode('close',          '.close');\n    setNode('thread',         'select');\n    setNode('form',           'form');\n    setNode('sjisToggle',     '#sjis-toggle');\n    setNode('texButton',      '#tex-preview-button');\n    setNode('name',           '[data-name=name]');\n    setNode('email',          '[data-name=email]');\n    setNode('sub',            '[data-name=sub]');\n    setNode('com',            '[data-name=com]');\n    setNode('charCount',      '#char-count');\n    setNode('texPreview',     '#tex-preview');\n    setNode('dumpList',       '#dump-list');\n    setNode('addPost',        '#add-post');\n    setNode('oekaki',         '.oekaki');\n    setNode('drawButton',     '#qr-draw-button');\n    setNode('fileSubmit',     '#file-n-submit');\n    setNode('fileButton',     '#qr-file-button');\n    setNode('noFile',         '#qr-no-file');\n    setNode('filename',       '#qr-filename');\n    setNode('spoiler',        '#qr-file-spoiler');\n    setNode('oekakiButton',   '#qr-oekaki-button');\n    setNode('fileRM',         '#qr-filerm');\n    setNode('urlButton',      '#url-button');\n    setNode('pasteArea',      '#paste-area');\n    setNode('customCooldown', '#custom-cooldown-button');\n    setNode('dumpButton',     '#dump-button');\n    setNode('status',         '[type=submit]');\n    setNode('flashTag',       '[name=filetag]');\n    setNode('fileInput',      '[type=file]');\n\n    const {config} = g.BOARD;\n    const {classList} = QR.nodes.el;\n    classList.toggle('forced-anon',  QR.forcedAnon);\n    classList.toggle('has-spoiler',  QR.spoiler);\n    classList.toggle('has-sjis',     !!config.sjis_tags);\n    classList.toggle('has-math',     !!config.math_tags);\n    classList.toggle('sjis-preview', !!config.sjis_tags && Conf['sjisPreview']);\n    classList.toggle('show-new-thread-option', Conf['Show New Thread Option in Threads']);\n\n    if (parseInt(Conf['customCooldown'], 10) > 0) {\n      $.addClass(QR.nodes.fileSubmit, 'custom-cooldown');\n      $.get('customCooldownEnabled', Conf['customCooldownEnabled'], function({customCooldownEnabled}) {\n        QR.setCustomCooldown(customCooldownEnabled);\n        return $.sync('customCooldownEnabled', QR.setCustomCooldown);\n      });\n    }\n\n    QR.flagsInput();\n\n    $.on(nodes.autohide,       'change',    QR.toggleHide);\n    $.on(nodes.close,          'click',     QR.close);\n    $.on(nodes.status,         'click',     QR.submit);\n    $.on(nodes.form,           'submit',    QR.submit);\n    $.on(nodes.sjisToggle,     'click',     QR.toggleSJIS);\n    $.on(nodes.texButton,      'mousedown', QR.texPreviewShow);\n    $.on(nodes.texButton,      'mouseup',   QR.texPreviewHide);\n    $.on(nodes.addPost,        'click',     () => new QR.post(true));\n    $.on(nodes.drawButton,     'click',     QR.oekaki.draw);\n    $.on(nodes.fileButton,     'click',     QR.openFileInput);\n    $.on(nodes.noFile,         'click',     QR.openFileInput);\n    $.on(nodes.filename,       'focus',     function() { return $.addClass(this.parentNode, 'focus'); });\n    $.on(nodes.filename,       'blur',      function() { return $.rmClass(this.parentNode, 'focus'); });\n    $.on(nodes.spoiler,        'change',    () => QR.selected.nodes.spoiler.click());\n    $.on(nodes.oekakiButton,   'click',     QR.oekaki.button);\n    $.on(nodes.fileRM,         'click',     () => QR.selected.rmFile());\n    $.on(nodes.urlButton,      'click',     () => QR.handleUrl(''));\n    $.on(nodes.customCooldown, 'click',     QR.toggleCustomCooldown);\n    $.on(nodes.dumpButton,     'click',     () => nodes.el.classList.toggle('dump'));\n    $.on(nodes.fileInput,      'change',    QR.handleFiles);\n\n    window.addEventListener('focus', QR.focus, true);\n    window.addEventListener('blur',  QR.focus, true);\n    // We don't receive blur events from captcha iframe.\n    $.on(d, 'click', QR.focus);\n\n    // XXX Workaround for image pasting in Firefox, obsolete as of v50.\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=906420\n    if (($.engine === 'gecko') && !window.DataTransferItemList) {\n      nodes.pasteArea.hidden = false;\n    }\n    new MutationObserver(QR.pasteFF).observe(nodes.pasteArea, {childList: true});\n\n    // save selected post's data\n    const items = ['thread', 'name', 'email', 'sub', 'com', 'filename', 'flag'];\n    let i = 0;\n    const save = function() { return QR.selected.save(this); };\n    while ((name = items[i++])) {\n      var node;\n      if (!(node = nodes[name])) { continue; }\n      event = node.nodeName === 'SELECT' ? 'change' : 'input';\n      $.on(nodes[name], event, save);\n    }\n\n    // XXX Blink and WebKit treat width and height of <textarea>s as min-width and min-height\n    if (($.engine === 'gecko') && Conf['Remember QR Size']) {\n      $.get('QR Size', '', item => nodes.com.style.cssText = item['QR Size']);\n      $.on(nodes.com, 'mouseup', function(e) {\n        if (e.button !== 0) { return; }\n        return $.set('QR Size', this.style.cssText);\n      });\n    }\n\n    QR.generatePostableThreadsList();\n    QR.persona.load();\n    new QR.post(true);\n    QR.status();\n    QR.cooldown.setup();\n    QR.captcha.init();\n\n    $.add(d.body, dialog);\n    QR.captcha.setup();\n    QR.oekaki.setup();\n\n    // Create a custom event when the QR dialog is first initialized.\n    // Use it to extend the QR's functionalities, or for XTRM RICE.\n    return $.event('QRDialogCreation', null, dialog);\n  },\n\n  flags() {\n    const select = $.el('select', {\n      name:      'flag',\n      className: 'flagSelector'\n    }\n    );\n\n    const addFlag = (value, textContent) => $.add(select, $.el('option', {value, textContent}));\n\n    addFlag('0', (g.BOARD.config.country_flags ? 'Geographic Location' : 'None'));\n    for (var value in g.BOARD.config.board_flags) {\n      var textContent = g.BOARD.config.board_flags[value];\n      addFlag(value, textContent);\n    }\n\n    return select;\n  },\n\n  flagsInput() {\n    const {nodes} = QR;\n    if (!nodes) { return; }\n    if (nodes.flag) {\n      $.rm(nodes.flag);\n      delete nodes.flag;\n    }\n\n    if (g.BOARD.config.board_flags) {\n      const flag = QR.flags();\n      flag.dataset.name    = 'flag';\n      flag.dataset.default = '0';\n      nodes.flag = flag;\n      return $.add(nodes.form, flag);\n    }\n  },\n\n  submit(e) {\n    let captcha, err, filetag;\n    e?.preventDefault();\n    const force = e?.shiftKey;\n\n    if (QR.req) {\n      QR.abort();\n      return;\n    }\n\n    $.forceSync('cooldowns');\n    if (QR.cooldown.seconds) {\n      if (force) {\n        QR.cooldown.clear();\n      } else {\n        QR.cooldown.auto = !QR.cooldown.auto;\n        QR.status();\n        return;\n      }\n    }\n\n    const post = QR.posts[0];\n    delete post.quotedText;\n    post.forceSave();\n    let threadID = post.thread;\n    const thread = g.BOARD.threads.get(threadID);\n    if ((g.BOARD.ID === 'f') && (threadID === 'new')) {\n      filetag = QR.nodes.flashTag.value;\n    }\n\n    // prevent errors\n    if (threadID === 'new') {\n      threadID = null;\n      if (!!g.BOARD.config.require_subject && !post.sub) {\n        err = 'New threads require a subject.';\n      } else if (!!!g.BOARD.config.text_only && !post.file) {\n        err = 'No file selected.';\n      }\n    } else if (g.BOARD.threads.get(threadID).isClosed) {\n      err = 'You can\\'t reply to this thread anymore.';\n    } else if (!post.com && !post.file) {\n      err = 'No comment or file.';\n    } else if (post.file && thread.fileLimit) {\n      err = 'Max limit of image replies has been reached.';\n    }\n\n    if ((g.BOARD.ID === 'r9k') && !post.com?.match(/[a-z-]/i)) {\n      if (!err) { err = 'Original comment required.'; }\n    }\n\n    if (QR.captcha.isEnabled && !((QR.captcha === Captcha.v2) && /\\b_ct=/.test(d.cookie) && threadID) && !(err && !force)) {\n      captcha = QR.captcha.getOne(!!threadID);\n      if (QR.captcha === Captcha.v2) {\n        if (!captcha) { captcha = Captcha.cache.request(!!threadID); }\n      }\n      if (!captcha) {\n        err = 'No valid captcha.';\n        QR.captcha.setup(!QR.cooldown.auto || (d.activeElement === QR.nodes.status));\n      }\n    }\n\n    QR.cleanNotifications();\n    if (err && !force) {\n      // stop auto-posting\n      QR.cooldown.auto = false;\n      QR.status();\n      QR.error(err);\n      return;\n    }\n\n    // Enable auto-posting if we have stuff to post, disable it otherwise.\n    QR.cooldown.auto = QR.posts.length > 1;\n\n    post.lock();\n\n    const formData = {\n      MAX_FILE_SIZE: QR.max_size,\n      mode:     'regist',\n      pwd:      QR.persona.getPassword(),\n      resto:    threadID,\n      name:     (!QR.forcedAnon ? post.name : undefined),\n      email:    post.email,\n      sub:      (!QR.forcedAnon && !threadID ? post.sub : undefined),\n      com:      post.com,\n      upfile:   post.file,\n      filetag,\n      spoiler:  post.spoiler,\n      flag:     post.flag,\n    };\n\n    const options = {\n      responseType: 'document',\n      withCredentials: true,\n      onloadend: QR.response,\n      form: $.formData(formData)\n    };\n    if (Conf['Show Upload Progress']) {\n      options.onprogress = function(e) {\n        if (this !== QR.req?.upload) { return; } // aborted\n        if (e.loaded < e.total) {\n          // Uploading...\n          QR.req.progress = `${Math.round((e.loaded / e.total) * 100)}%`;\n        } else {\n          // Upload done, waiting for server response.\n          QR.req.isUploadFinished = true;\n          QR.req.progress = '...';\n        }\n        return QR.status();\n      };\n    }\n\n    let cb = function(response) {\n      if (response != null) {\n        QR.currentCaptcha = response;\n        if (QR.captcha === Captcha.v2) {\n          if (response.challenge != null) {\n            options.form.append('recaptcha_challenge_field', response.challenge);\n            options.form.append('recaptcha_response_field', response.response);\n          } else {\n            options.form.append('g-recaptcha-response', response.response);\n          }\n        } else {\n          for (var key in response) {\n            var val = response[key];\n            options.form.append(key, val);\n          }\n        }\n      }\n      QR.req = $.ajax(`https://sys.${location.hostname.split('.')[1]}.org/${g.BOARD}/post`, options);\n      return QR.req.progress = '...';\n    };\n\n    if (typeof captcha === 'function') {\n      // Wait for captcha to be verified before submitting post.\n      QR.req = {\n        progress: '...',\n        abort() {\n          if (QR.captcha === Captcha.v2) {\n            Captcha.cache.abort();\n          }\n          return cb = null;\n        }\n      };\n      captcha(function(response) {\n        if ((QR.captcha === Captcha.v2) && Captcha.cache.haveCookie()) {\n          cb?.();\n          if (response) { return Captcha.cache.save(response); }\n        } else if (response) {\n          return cb?.(response);\n        } else {\n          delete QR.req;\n          post.unlock();\n          QR.cooldown.auto = !!Captcha.cache.getCount();\n          return QR.status();\n        }\n      });\n    } else {\n      cb(captcha);\n    }\n\n    // Starting to upload might take some time.\n    // Provide some feedback that we're starting to submit.\n    return QR.status();\n  },\n\n  response() {\n    let connErr, err;\n    if (this !== QR.req) { return; } // aborted\n    delete QR.req;\n\n    const post = QR.posts[0];\n    post.unlock();\n\n    if (err = this.response?.getElementById('errmsg')) { // error!\n      const el = $('a', err);\n      if (el) el.target = '_blank'; // duplicate image link\n    } else if (connErr = (!this.response || (this.response.title !== 'Post successful!'))) {\n      err = QR.connectionError();\n      if ((QR.captcha === Captcha.v2) && QR.currentCaptcha) { Captcha.cache.save(QR.currentCaptcha); }\n    } else if (this.status !== 200) {\n      err = `Error ${this.statusText} (${this.status})`;\n    }\n\n    if (!connErr) { QR.captcha.setUsed?.(); }\n    delete QR.currentCaptcha;\n\n    if (err) {\n      let m;\n      QR.errorCount = (QR.errorCount || 0) + 1;\n      if (/captcha|verification/i.test(err.textContent) || connErr) {\n        // Remove the obnoxious 4chan Pass ad.\n        if (/mistyped/i.test(err.textContent)) {\n          err = 'You mistyped the CAPTCHA, or the CAPTCHA malfunctioned.';\n        } else if (/expired/i.test(err.textContent)) {\n          err = 'This CAPTCHA is no longer valid because it has expired.';\n        }\n        if (QR.errorCount >= 5) {\n          // Too many posting errors can ban you. Stop autoposting after 5 errors.\n          QR.cooldown.auto = false;\n        } else {\n          // Something must've gone terribly wrong if you get captcha errors without captchas.\n          // Don't auto-post indefinitely in that case.\n          QR.cooldown.auto = QR.captcha.isEnabled || connErr;\n          // Too many frequent mistyped captchas will auto-ban you!\n          // On connection error, the post most likely didn't go through.\n          // If the post did go through, it should be stopped by the duplicate reply cooldown.\n          QR.cooldown.addDelay(post, 2);\n        }\n      } else if (err.textContent && (m = err.textContent.match(/\\d+\\s+(?:minute|second)/gi)) && !/duplicate|hour/i.test(err.textContent)) {\n        QR.cooldown.auto = !/have\\s+been\\s+muted/i.test(err.textContent);\n        let seconds = 0;\n        for (var mi of m) {\n          seconds += (/minute/i.test(mi) ? 60 : 1) * (+mi.match(/\\d+/)[0]);\n        }\n        if (/muted/i.test(err.textContent)) {\n          QR.cooldown.addMute(seconds);\n        } else {\n          QR.cooldown.addDelay(post, seconds);\n        }\n      } else { // stop auto-posting\n        QR.cooldown.auto = false;\n      }\n      QR.captcha.setup(QR.cooldown.auto && [QR.nodes.status, d.body].includes(d.activeElement));\n      QR.status();\n      QR.error(err);\n      return;\n    }\n\n    delete QR.errorCount;\n\n    const h1 = $('h1', this.response);\n\n    let [_, threadID, postID] = h1.nextSibling.textContent.match(/thread:(\\d+),no:(\\d+)/);\n    postID   = +postID;\n    threadID = +threadID || postID;\n    const isReply  = threadID !== postID;\n\n    // Post/upload confirmed as successful.\n    $.event('QRPostSuccessful', {\n      boardID: g.BOARD.ID,\n      threadID,\n      postID\n    });\n    // XXX deprecated\n    $.event('QRPostSuccessful_', {boardID: g.BOARD.ID, threadID, postID});\n\n    // Enable auto-posting if we have stuff left to post, disable it otherwise.\n    const postsCount = QR.posts.length - 1;\n    QR.cooldown.auto = postsCount && isReply;\n\n    const lastPostToThread = !((function() { for (var p of QR.posts.slice(1)) { if (p.thread === post.thread) { return true; } } })());\n\n    if (postsCount) {\n      post.rm();\n      QR.captcha.setup(d.activeElement === QR.nodes.status);\n    } else if (Conf['Persistent QR']) {\n      post.rm();\n      if (Conf['Auto Hide QR']) {\n        QR.hide();\n      } else {\n        QR.blur();\n      }\n    } else {\n      QR.close();\n    }\n\n    QR.cleanNotifications();\n    if (Conf['Posting Success Notifications']) {\n      QR.notifications.push(new Notice('success', h1.textContent, 5));\n    }\n\n    QR.cooldown.add(threadID, postID);\n\n    const URL = threadID === postID ? ( // new thread\n      `${window.location.origin}/${g.BOARD}/thread/${threadID}`\n    ) : (threadID !== g.THREADID) && lastPostToThread && Conf['Open Post in New Tab'] ? ( // replying from the index or a different thread\n      `${window.location.origin}/${g.BOARD}/thread/${threadID}#p${postID}`\n    ) : undefined;\n\n    if (URL) {\n      const open = Conf['Open Post in New Tab'] || postsCount ?\n        () => $.open(URL)\n      :\n        () => location.href = URL;\n\n      if (threadID === postID) {\n        // XXX 4chan sometimes responds before the thread exists.\n        QR.waitForThread(URL, open);\n      } else {\n        open();\n      }\n    }\n\n    return QR.status();\n  },\n\n  waitForThread(url, cb) {\n    let attempts = 0;\n    var check = function() {\n      return $.ajax(url, {\n        onloadend() {\n          attempts++;\n          if ((attempts >= 6) || (this.status === 200)) {\n            return cb();\n          } else {\n            return setTimeout(check, attempts * SECOND);\n          }\n        },\n        responseType: 'text',\n        type: 'HEAD'\n      }\n      );\n    };\n    return check();\n  },\n\n  abort() {\n    let oldReq;\n    if ((oldReq = QR.req) && !QR.req.isUploadFinished) {\n      delete QR.req;\n      oldReq.abort();\n      if ((QR.captcha === Captcha.v2) && QR.currentCaptcha) { Captcha.cache.save(QR.currentCaptcha); }\n      delete QR.currentCaptcha;\n      QR.posts[0].unlock();\n      QR.cooldown.auto = false;\n      QR.notifications.push(new Notice('info', 'QR upload aborted.', 5));\n    }\n    return QR.status();\n  },\n\n  cooldown: {\n    seconds: 0,\n    delays: {\n      deletion: 60\n    }, // cooldown for deleting posts/files\n\n    // Called from Main\n    init() {\n      if (!Conf['Quick Reply']) { return; }\n      this.data = Conf['cooldowns'];\n      this.changes = dict();\n      return $.sync('cooldowns', this.sync);\n    },\n\n    // Called from QR\n    setup() {\n      // Read cooldown times\n      $.extend(QR.cooldown.delays, g.BOARD.cooldowns());\n\n      // The longest reply cooldown, for use in pruning old reply data\n      QR.cooldown.maxDelay = 0;\n      for (var type in QR.cooldown.delays) {\n        var delay = QR.cooldown.delays[type];\n        if (!['thread', 'thread_global'].includes(type)) {\n          QR.cooldown.maxDelay = Math.max(QR.cooldown.maxDelay, delay);\n        }\n      }\n\n      QR.cooldown.isSetup = true;\n      return QR.cooldown.start();\n    },\n\n    start() {\n      const { data } = QR.cooldown;\n      if (\n        !Conf['Cooldown'] ||\n        !QR.cooldown.isSetup ||\n        !!QR.cooldown.isCounting ||\n        ((Object.keys(data[g.BOARD.ID] || {}).length + Object.keys(data.global || {}).length) <= 0)\n      ) { return; }\n      QR.cooldown.isCounting = true;\n      return QR.cooldown.count();\n    },\n\n    sync(data) {\n      QR.cooldown.data = data || dict();\n      return QR.cooldown.start();\n    },\n\n    add(threadID, postID) {\n      if (!Conf['Cooldown']) { return; }\n      const start = Date.now();\n      const boardID = g.BOARD.ID;\n      QR.cooldown.set(boardID, start, { threadID, postID });\n      if (threadID === postID) { QR.cooldown.set('global', start, { boardID, threadID, postID }); }\n      QR.cooldown.save();\n      return QR.cooldown.start();\n    },\n\n    addDelay(post, delay) {\n      if (!Conf['Cooldown']) { return; }\n      const cooldown = QR.cooldown.categorize(post);\n      cooldown.delay = delay;\n      QR.cooldown.set(g.BOARD.ID, Date.now(), cooldown);\n      QR.cooldown.save();\n      return QR.cooldown.start();\n    },\n\n    addMute(delay) {\n      if (!Conf['Cooldown']) { return; }\n      QR.cooldown.set(g.BOARD.ID, Date.now(), { type: 'mute', delay });\n      QR.cooldown.save();\n      return QR.cooldown.start();\n    },\n\n    delete(post) {\n      let cooldown;\n      if (!QR.cooldown.data) { return; }\n      const cooldowns = (QR.cooldown.data[post.board.ID] || (QR.cooldown.data[post.board.ID] = dict()));\n      for (var id in cooldowns) {\n        cooldown = cooldowns[id];\n        if ((cooldown.delay == null) && (cooldown.threadID === post.thread.ID) && (cooldown.postID === post.ID)) {\n          QR.cooldown.set(post.board.ID, id, null);\n        }\n      }\n      return QR.cooldown.save();\n    },\n\n    secondsDeletion(post) {\n      if (!QR.cooldown.data || !Conf['Cooldown']) { return 0; }\n      const cooldowns = QR.cooldown.data[post.board.ID] || dict();\n      for (var start in cooldowns) {\n        var cooldown = cooldowns[start];\n        if ((cooldown.delay == null) && (cooldown.threadID === post.thread.ID) && (cooldown.postID === post.ID)) {\n          var seconds = QR.cooldown.delays.deletion - Math.floor((Date.now() - start) / SECOND);\n          return Math.max(seconds, 0);\n        }\n      }\n      return 0;\n    },\n\n    categorize(post) {\n      if (post.thread === 'new') {\n        return { type: 'thread' };\n      } else {\n        return {\n          type: !!post.file ? 'image' : 'reply',\n          threadID: +post.thread\n        };\n      }\n    },\n\n    mergeChange(data, scope, id, value) {\n      if (value) {\n        return (data[scope] || (data[scope] = dict()))[id] = value;\n      } else if (scope in data) {\n        delete data[scope][id];\n        if (Object.keys(data[scope]).length === 0) { return delete data[scope]; }\n      }\n    },\n\n    set(scope, id, value) {\n      QR.cooldown.mergeChange(QR.cooldown.data, scope, id, value);\n      return (QR.cooldown.changes[scope] || (QR.cooldown.changes[scope] = dict()))[id] = value;\n    },\n\n    save() {\n      const { changes } = QR.cooldown;\n      if (!Object.keys(changes).length) { return; }\n      return $.get('cooldowns', dict(), function ({ cooldowns }) {\n        for (var scope in QR.cooldown.changes) {\n          for (var id in QR.cooldown.changes[scope]) {\n            var value = QR.cooldown.changes[scope][id];\n            QR.cooldown.mergeChange(cooldowns, scope, id, value);\n          }\n          QR.cooldown.data = cooldowns;\n        }\n        return $.set('cooldowns', cooldowns, () => QR.cooldown.changes = dict());\n      });\n    },\n\n    clear() {\n      QR.cooldown.data = dict();\n      QR.cooldown.changes = dict();\n      QR.cooldown.auto = false;\n      QR.cooldown.update();\n      return $.queueTask($.delete, 'cooldowns');\n    },\n\n    update() {\n      let cooldown;\n      if (!QR.cooldown.isCounting) { return; }\n\n      let save = false;\n      let nCooldowns = 0;\n      const now = Date.now();\n      const { type, threadID } = QR.cooldown.categorize(QR.posts[0]);\n      let seconds = 0;\n\n      if (Conf['Cooldown']) {\n        for (var scope of [g.BOARD.ID, 'global']) {\n          var cooldowns = (QR.cooldown.data[scope] || (QR.cooldown.data[scope] = dict()));\n\n          for (var start in cooldowns) {\n            cooldown = cooldowns[start];\n            start = +start;\n            var elapsed = Math.floor((now - start) / SECOND);\n            if (elapsed < 0) { // clock changed since then?\n              QR.cooldown.set(scope, start, null);\n              save = true;\n              continue;\n            }\n\n            // Explicit delays from error messages\n            if (cooldown.delay != null) {\n              if (cooldown.delay <= elapsed) {\n                QR.cooldown.set(scope, start, null);\n                save = true;\n              } else if (((cooldown.type === type) && (cooldown.threadID === threadID)) || (cooldown.type === 'mute')) {\n                // Delays only apply to the given post type and thread.\n                seconds = Math.max(seconds, cooldown.delay - elapsed);\n              }\n              continue;\n            }\n\n            // Clean up expired cooldowns\n            var maxDelay = cooldown.threadID !== cooldown.postID ?\n              QR.cooldown.maxDelay\n              :\n              QR.cooldown.delays[scope === 'global' ? 'thread_global' : 'thread'];\n            if (QR.cooldown.customCooldown) {\n              maxDelay = Math.max(maxDelay, parseInt(Conf['customCooldown'], 10));\n            }\n            if (maxDelay <= elapsed) {\n              QR.cooldown.set(scope, start, null);\n              save = true;\n              continue;\n            }\n\n            if (((type === 'thread') === (cooldown.threadID === cooldown.postID)) && (cooldown.boardID !== g.BOARD.ID)) {\n              // Only cooldowns relevant to this post can set the seconds variable:\n              //   reply cooldown with a reply, thread cooldown with a thread.\n              // Inter-board thread cooldowns only apply on boards other than the one they were posted on.\n              var suffix = scope === 'global' ?\n                '_global'\n                :\n                '';\n              seconds = Math.max(seconds, QR.cooldown.delays[type + suffix] - elapsed);\n\n              // If additional cooldown is enabled, add the configured seconds to the count.\n              if (QR.cooldown.customCooldown) {\n                seconds = Math.max(seconds, parseInt(Conf['customCooldown'], 10) - elapsed);\n              }\n            }\n          }\n\n          nCooldowns += Object.keys(cooldowns).length;\n        }\n      }\n\n      if (save) { QR.cooldown.save; }\n\n      if (nCooldowns) {\n        clearTimeout(QR.cooldown.timeout);\n        QR.cooldown.timeout = setTimeout(QR.cooldown.count, SECOND);\n      } else {\n        delete QR.cooldown.isCounting;\n      }\n\n      // Update the status when we change posting type.\n      // Don't get stuck at some random number.\n      // Don't interfere with progress status updates.\n      const update = seconds !== QR.cooldown.seconds;\n      QR.cooldown.seconds = seconds;\n      if (update) { return QR.status(); }\n    },\n\n    count() {\n      QR.cooldown.update();\n      if ((QR.cooldown.seconds === 0) && QR.cooldown.auto && !QR.req) { return QR.submit(); }\n    }\n  },\n\n  oekaki: {\n    menu: {\n      init() {\n        if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Edit Link'] || !Conf['Quick Reply']) { return; }\n\n        const a = $.el('a', {\n          className: 'edit-link',\n          href: 'javascript:;',\n          textContent: 'Edit image'\n        }\n        );\n        $.on(a, 'click', this.editFile);\n\n        return Menu.menu.addEntry({\n          el: a,\n          order: 90,\n          open(post) {\n            QR.oekaki.menu.post = post;\n            const { file } = post;\n            return QR.postingIsEnabled && !!file && (file.isImage || file.isVideo);\n          }\n        });\n      },\n\n      editFile() {\n        const { post } = QR.oekaki.menu;\n        QR.quote.call(post.nodes.post);\n        const { isVideo } = post.file;\n        const currentTime = post.file.fullImage?.currentTime || 0;\n        return CrossOrigin.file(post.file.url, function (blob) {\n          if (!blob) {\n            return QR.error(\"Can't load file.\");\n          } else if (isVideo) {\n            const video = $.el('video');\n            $.on(video, 'loadedmetadata', function () {\n              $.on(video, 'seeked', function () {\n                const canvas = $.el('canvas', {\n                  width: video.videoWidth,\n                  height: video.videoHeight\n                }\n                );\n                canvas.getContext('2d').drawImage(video, 0, 0);\n                return canvas.toBlob(function (snapshot) {\n                  snapshot.name = post.file.name.replace(/\\.\\w+$/, '') + '.png';\n                  QR.handleFiles([snapshot]);\n                  return QR.oekaki.edit();\n                });\n              });\n              return video.currentTime = currentTime;\n            });\n            $.on(video, 'error', () => QR.openError());\n            return video.src = URL.createObjectURL(blob);\n          } else {\n            blob.name = post.file.name;\n            QR.handleFiles([blob]);\n            return QR.oekaki.edit();\n          }\n        });\n      }\n    },\n\n    setup() {\n      return $.global(function () {\n        const { FCX } = window;\n        FCX.oekakiCB = () => window.Tegaki.flatten().toBlob(function (file) {\n          const source = `oekaki-${Date.now()}`;\n          FCX.oekakiLatest = source;\n          return document.dispatchEvent(new CustomEvent('QRSetFile', {\n            bubbles: true,\n            detail: { file, name: FCX.oekakiName, source }\n          }));\n        });\n        if (window.Tegaki) {\n          return document.querySelector('#qr .oekaki').hidden = false;\n        }\n      });\n    },\n\n    load(cb) {\n      if ($('script[src^=\"//s.4cdn.org/js/tegaki\"]', d.head)) {\n        return cb();\n      } else {\n        const style = $.el('link', {\n          rel: 'stylesheet',\n          href: `//s.4cdn.org/css/tegaki.${Date.now()}.css`\n        }\n        );\n        const script = $.el('script',\n          { src: `//s.4cdn.org/js/tegaki.min.${Date.now()}.js` });\n        let n = 0;\n        const onload = function () {\n          if (++n === 2) { return cb(); }\n        };\n        $.on(style, 'load', onload);\n        $.on(script, 'load', onload);\n        return $.add(d.head, [style, script]);\n      }\n    },\n\n    draw() {\n      return $.global(function () {\n        const { Tegaki, FCX } = window;\n        if (Tegaki.bg) { Tegaki.destroy(); }\n        FCX.oekakiName = 'tegaki.png';\n        return Tegaki.open({\n          onDone: FCX.oekakiCB,\n          onCancel() { return Tegaki.bgColor = '#ffffff'; },\n          width: +document.querySelector('#qr [name=oekaki-width]').value,\n          height: +document.querySelector('#qr [name=oekaki-height]').value,\n          bgColor:\n            document.querySelector('#qr [name=oekaki-bg]').checked ?\n              document.querySelector('#qr [name=oekaki-bgcolor]').value\n              :\n              'transparent'\n        });\n      });\n    },\n\n    button() {\n      if (QR.selected.file) {\n        return QR.oekaki.edit();\n      } else {\n        return QR.oekaki.toggle();\n      }\n    },\n\n    edit() {\n      return QR.oekaki.load(() => $.global(function () {\n        const { Tegaki, FCX } = window;\n        const name = document.getElementById('qr-filename').value.replace(/\\.\\w+$/, '') + '.png';\n        const { source } = document.getElementById('file-n-submit').dataset;\n        const error = content => document.dispatchEvent(new CustomEvent('CreateNotification', {\n          bubbles: true,\n          detail: { type: 'warning', content, lifetime: 20 }\n        }));\n        var cb = function (e) {\n          if (e) { this.removeEventListener('QRMetadata', cb, false); }\n          const selected = document.getElementById('selected');\n          if (!selected?.dataset.type) { return error('No file to edit.'); }\n          if (!/^(image|video)\\//.test(selected.dataset.type)) { return error('Not an image.'); }\n          if (!selected.dataset.height) { return error('Metadata not available.'); }\n          if (selected.dataset.height === 'loading') {\n            selected.addEventListener('QRMetadata', cb, false);\n            return;\n          }\n          if (Tegaki.bg) { Tegaki.destroy(); }\n          FCX.oekakiName = name;\n          Tegaki.open({\n            onDone: FCX.oekakiCB,\n            onCancel() { return Tegaki.bgColor = '#ffffff'; },\n            width: +selected.dataset.width,\n            height: +selected.dataset.height,\n            bgColor: 'transparent'\n          });\n          const canvas = document.createElement('canvas');\n          canvas.width = (canvas.naturalWidth = +selected.dataset.width);\n          canvas.height = (canvas.naturalHeight = +selected.dataset.height);\n          canvas.hidden = true;\n          document.body.appendChild(canvas);\n          canvas.addEventListener('QRImageDrawn', function () {\n            this.remove();\n            return Tegaki.onOpenImageLoaded.call(this);\n          }\n            , false);\n          return canvas.dispatchEvent(new CustomEvent('QRDrawFile', { bubbles: true }));\n        };\n        if (Tegaki.bg && (Tegaki.onDoneCb === FCX.oekakiCB) && (source === FCX.oekakiLatest)) {\n          FCX.oekakiName = name;\n          return Tegaki.resume();\n        } else {\n          return cb();\n        }\n      }));\n    },\n\n    toggle() {\n      return QR.oekaki.load(() => QR.nodes.oekaki.hidden = !QR.nodes.oekaki.hidden);\n    }\n  },\n\n  persona: {\n    always: {},\n    types: {\n      name: [],\n      email: [],\n      sub: []\n    },\n\n    init() {\n      if (!Conf['Quick Reply'] && (!Conf['Menu'] || !Conf['Delete Link'])) { return; }\n      for (var item of Conf['QR.personas'].split('\\n')) {\n        QR.persona.parseItem(item.trim());\n      }\n    },\n\n    parseItem(item) {\n      let match, needle, type, val;\n      if (item[0] === '#') { return; }\n      if (!(match = item.match(/(name|options|email|subject|password):\"(.*)\"/i))) { return; }\n      [match, type, val] = match;\n\n      // Don't mix up item settings with val.\n      item = item.replace(match, '');\n\n      const boards = item.match(/boards:([^;]+)/i)?.[1].toLowerCase() || 'global';\n      if ((boards !== 'global') && (needle = g.BOARD.ID, !boards.split(',').includes(needle))) { return; }\n\n\n      if (type === 'password') {\n        QR.persona.pwd = val;\n        return;\n      }\n\n      if (type === 'options') { type = 'email'; }\n      if (type === 'subject') { type = 'sub'; }\n\n      if (/always/i.test(item)) {\n        QR.persona.always[type] = val;\n      }\n\n      if (!QR.persona.types[type].includes(val)) {\n        return QR.persona.types[type].push(val);\n      }\n    },\n\n    load() {\n      for (var type in QR.persona.types) {\n        var arr = QR.persona.types[type];\n        var list = $(`#list-${type}`, QR.nodes.el);\n        for (var val of arr) {\n          if (val) {\n            $.add(list, $.el('option',\n              { textContent: val })\n            );\n          }\n        }\n      }\n    },\n\n    getPassword() {\n      let m;\n      if (QR.persona.pwd != null) {\n        return QR.persona.pwd;\n      } else if (m = d.cookie.match(/4chan_pass=([^;]+)/)) {\n        return decodeURIComponent(m[1]);\n      } else {\n        return '';\n      }\n    },\n\n    get(cb) {\n      return $.get('QR.persona', {}, ({ 'QR.persona': persona }) => cb(persona));\n    },\n\n    set(post) {\n      return $.get('QR.persona', {}, function ({ 'QR.persona': persona }) {\n        persona = {\n          name: post.name,\n          flag: post.flag\n        };\n        return $.set('QR.persona', persona);\n      });\n    }\n  },\n\n  post: class {\n    constructor(select) {\n      this.select = this.select.bind(this);\n      const el = $.el('a', {\n        className: 'qr-preview',\n        draggable: true,\n        href: 'javascript:;'\n      }\n      );\n      $.extend(el, { innerHTML: '<a class=\"remove\" title=\"Remove\"></a><label class=\"qr-preview-spoiler\"><input type=\"checkbox\"> Spoiler</label><span></span>' });\n\n      this.nodes = {\n        el,\n        rm: el.firstChild,\n        spoiler: $('.qr-preview-spoiler input', el),\n        span: el.lastChild\n      };\n\n      $.on(el, 'click', this.select);\n      $.on(this.nodes.rm, 'click', e => { e.stopPropagation(); return this.rm(); });\n      $.on(this.nodes.spoiler, 'change', e => {\n        this.spoiler = e.target.checked;\n        if (this === QR.selected) { QR.nodes.spoiler.checked = this.spoiler; }\n        return this.preventAutoPost();\n      });\n      for (var label of $$('label', el)) {\n        $.on(label, 'click', e => e.stopPropagation());\n      }\n      $.add(QR.nodes.dumpList, el);\n\n      for (var event of ['dragStart', 'dragEnter', 'dragLeave', 'dragOver', 'dragEnd', 'drop']) {\n        $.on(el, event.toLowerCase(), this[event]);\n      }\n\n      this.thread = g.VIEW === 'thread' ?\n        g.THREADID\n        :\n        'new';\n\n      const prev = QR.posts[QR.posts.length - 1];\n      QR.posts.push(this);\n      this.nodes.spoiler.checked = (this.spoiler = prev && Conf['Remember Spoiler'] ?\n        prev.spoiler\n        :\n        false);\n      QR.persona.get(persona => {\n        this.name = 'name' in QR.persona.always ?\n          QR.persona.always.name\n          : prev ?\n            prev.name\n            :\n            persona.name;\n\n        this.email = 'email' in QR.persona.always ?\n          QR.persona.always.email\n          :\n          '';\n\n        this.sub = 'sub' in QR.persona.always ?\n          QR.persona.always.sub\n          :\n          '';\n\n        if (QR.nodes.flag) {\n          this.flag = (() => {\n            if (prev) {\n              return prev.flag;\n            } else if (persona.flag && persona.flag in g.BOARD.config.board_flags) {\n              return persona.flag;\n            }\n          })();\n        }\n        if (QR.selected === this) { return this.load(); }\n      }); // load persona\n      if (select) { this.select(); }\n      this.unlock();\n      QR.captcha.moreNeeded();\n    }\n\n    rm() {\n      this.delete();\n      const index = QR.posts.indexOf(this);\n      if (QR.posts.length === 1) {\n        new QR.post(true);\n        $.rmClass(QR.nodes.el, 'dump');\n      } else if (this === QR.selected) {\n        (QR.posts[index - 1] || QR.posts[index + 1]).select();\n      }\n      QR.posts.splice(index, 1);\n      QR.status();\n      return QR.captcha.updateThread?.();\n    }\n\n    delete() {\n      $.rm(this.nodes.el);\n      URL.revokeObjectURL(this.URL);\n      return this.dismissErrors();\n    }\n\n    lock(lock = true) {\n      this.isLocked = lock;\n      if (this !== QR.selected) { return; }\n      for (var name of ['thread', 'name', 'email', 'sub', 'com', 'fileButton', 'filename', 'spoiler', 'flag']) {\n        var node;\n        if ((node = QR.nodes[name])) {\n          node.disabled = lock;\n        }\n      }\n      this.nodes.rm.style.visibility = lock ? 'hidden' : '';\n      this.nodes.spoiler.disabled = lock;\n      return this.nodes.el.draggable = !lock;\n    }\n\n    unlock() {\n      return this.lock(false);\n    }\n\n    select() {\n      if (QR.selected) {\n        QR.selected.nodes.el.removeAttribute('id');\n        QR.selected.forceSave();\n      }\n      QR.selected = this;\n      this.lock(this.isLocked);\n      this.nodes.el.id = 'selected';\n      // Scroll the list to center the focused post.\n      const rectEl = this.nodes.el.getBoundingClientRect();\n      const rectList = this.nodes.el.parentNode.getBoundingClientRect();\n      this.nodes.el.parentNode.scrollLeft += (rectEl.left + (rectEl.width / 2)) - rectList.left - (rectList.width / 2);\n      return this.load();\n    }\n\n    load() {\n      // Load this post's values.\n\n      for (var name of ['thread', 'name', 'email', 'sub', 'com', 'filename', 'flag']) {\n        var node;\n        if (!(node = QR.nodes[name])) { continue; }\n        node.value = this[name] || node.dataset.default || '';\n      }\n\n      (this.thread !== 'new' ? $.addClass : $.rmClass)(QR.nodes.el, 'reply-to-thread');\n\n      this.showFileData();\n      return QR.characterCount();\n    }\n\n    save(input, forced) {\n      if (input.type === 'checkbox') {\n        this.spoiler = input.checked;\n        return;\n      }\n      const { name } = input.dataset;\n      if (!['thread', 'name', 'email', 'sub', 'com', 'filename', 'flag'].includes(name)) { return; }\n      const prev = this[name] || input.dataset.default || null;\n      this[name] = input.value || input.dataset.default || null;\n      switch (name) {\n        case 'thread':\n          (this.thread !== 'new' ? $.addClass : $.rmClass)(QR.nodes.el, 'reply-to-thread');\n          QR.status();\n          QR.captcha.updateThread?.();\n          break;\n        case 'com':\n          this.updateComment();\n          break;\n        case 'filename':\n          if (!this.file) { return; }\n          this.saveFilename();\n          this.updateFilename();\n          break;\n        case 'name': case 'flag':\n          if (this[name] !== prev) { // only save manual changes, not values filled in by persona settings\n            QR.persona.set(this);\n          }\n          break;\n      }\n      if (!forced) { return this.preventAutoPost(); }\n    }\n\n    forceSave() {\n      if (this !== QR.selected) { return; }\n      // Do this in case people use extensions\n      // that do not trigger the `input` event.\n      for (var name of ['thread', 'name', 'email', 'sub', 'com', 'filename', 'spoiler', 'flag']) {\n        var node;\n        if (!(node = QR.nodes[name])) { continue; }\n        this.save(node, true);\n      }\n    }\n\n    preventAutoPost() {\n      // Disable auto-posting if you're editing the first post\n      // during the last 5 seconds of the cooldown.\n      if (QR.cooldown.auto && (this === QR.posts[0])) {\n        QR.cooldown.update(); // adding/removing file can change cooldown\n        if (QR.cooldown.seconds <= 5) { return QR.cooldown.auto = false; }\n      }\n    }\n\n    setComment(com) {\n      this.com = com || null;\n      if (this === QR.selected) {\n        QR.nodes.com.value = this.com;\n      }\n      return this.updateComment();\n    }\n\n    updateComment() {\n      if (this === QR.selected) {\n        QR.characterCount();\n      }\n      this.nodes.span.textContent = this.com;\n      QR.captcha.moreNeeded();\n      if (QR.captcha === Captcha.v2) {\n        return Captcha.cache.prerequest();\n      }\n    }\n\n    isOnlyQuotes() {\n      return (this.com || '').trim() === (this.quotedText || '').trim();\n    }\n\n    static rmErrored(e) {\n      e.stopPropagation();\n      for (let i = QR.posts.length - 1; i >= 0; i--) {\n        var errors;\n        var post = QR.posts[i];\n        if ((errors = post.errors)) {\n          for (var error of errors) {\n            if (doc.contains(error)) {\n              post.rm();\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    error(className, message, link) {\n      const div = $.el('div', { className });\n      $.extend(div, {\n        innerHTML: message + (link ? ` [<a href=\"${E(link)}\" target=\"_blank\">More info</a>]` : '') +\n          `<br>[<a href=\"javascript:;\">delete post</a>] [<a href=\"javascript:;\">delete all</a>]`\n      });\n      (this.errors || (this.errors = [])).push(div);\n      const [rm, rmAll] = $$('a', div);\n      $.on(div, 'click', () => {\n        if (QR.posts.includes(this)) { return this.select(); }\n      });\n      $.on(rm, 'click', e => {\n        e.stopPropagation();\n        if (QR.posts.includes(this)) { return this.rm(); }\n      });\n      $.on(rmAll, 'click', QR.post.rmErrored);\n      return QR.error(div, true);\n    }\n\n    fileError(message, link) {\n      return this.error('file-error', `${this.filename}: ${message}`, link);\n    }\n\n    dismissErrors(test = () => true) {\n      if (this.errors) {\n        for (var error of this.errors) {\n          if (doc.contains(error) && test(error)) {\n            error.parentNode.previousElementSibling.click();\n          }\n        }\n      }\n    }\n\n    setFile(file) {\n      this.file = file;\n      if (Conf['Randomize Filename'] && (g.BOARD.ID !== 'f')) {\n        let ext;\n        this.filename = `${Date.now() * 1000 - Math.floor(Math.random() * 365 * DAY * 1000)}`;\n        if (ext = this.file.name.match(QR.validExtension)) { this.filename += ext[0]; }\n      } else {\n        this.filename = this.file.name;\n      }\n      this.filesize = $.bytesToString(this.file.size);\n      this.checkSize();\n      $.addClass(this.nodes.el, 'has-file');\n      QR.captcha.moreNeeded();\n      URL.revokeObjectURL(this.URL);\n      this.saveFilename();\n      if (this === QR.selected) {\n        this.showFileData();\n      } else {\n        this.updateFilename();\n      }\n      this.rmMetadata();\n      this.nodes.el.dataset.type = this.file.type;\n      this.nodes.el.style.backgroundImage = '';\n      if (!QR.mimeTypes.includes(this.file.type)) {\n        this.fileError('Unsupported file type.');\n      } else if (/^(image|video)\\//.test(this.file.type)) {\n        this.readFile();\n      }\n      return this.preventAutoPost();\n    }\n\n    checkSize() {\n      let max = QR.max_size;\n      if (/^video\\//.test(this.file.type)) { max = Math.min(max, QR.max_size_video); }\n      if (this.file.size > max) {\n        return this.fileError(`File too large (file: ${this.filesize}, max: ${$.bytesToString(max)}).`);\n      }\n    }\n\n    readFile() {\n      const isVideo = /^video\\//.test(this.file.type);\n      const el = $.el(isVideo ? 'video' : 'img');\n      if (isVideo && !el.canPlayType(this.file.type)) { return; }\n\n      const event = isVideo ? 'loadeddata' : 'load';\n      var onload = () => {\n        $.off(el, event, onload);\n        $.off(el, 'error', onerror);\n        this.checkDimensions(el);\n        this.setThumbnail(el);\n        return $.event('QRMetadata', null, this.nodes.el);\n      };\n      var onerror = () => {\n        $.off(el, event, onload);\n        $.off(el, 'error', onerror);\n        this.fileError(`Corrupt ${isVideo ? 'video' : 'image'} or error reading metadata.`, meta.faq + '#error-reading-metadata');\n        URL.revokeObjectURL(el.src);\n        // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=1021289\n        this.nodes.el.removeAttribute('data-height');\n        return $.event('QRMetadata', null, this.nodes.el);\n      };\n      this.nodes.el.dataset.height = 'loading';\n      $.on(el, event, onload);\n      $.on(el, 'error', onerror);\n      return el.src = URL.createObjectURL(this.file);\n    }\n\n    checkDimensions(el) {\n      let height, width;\n      if (el.tagName === 'IMG') {\n        ({ height, width } = el);\n        this.nodes.el.dataset.height = height;\n        this.nodes.el.dataset.width = width;\n        if ((height > QR.max_height) || (width > QR.max_width)) {\n          this.fileError(`Image too large (image: ${height}x${width}px, max: ${QR.max_height}x${QR.max_width}px)`);\n        }\n        if ((height < QR.min_height) || (width < QR.min_width)) {\n          return this.fileError(`Image too small (image: ${height}x${width}px, min: ${QR.min_height}x${QR.min_width}px)`);\n        }\n      } else {\n        const { videoHeight, videoWidth, duration } = el;\n        this.nodes.el.dataset.height = videoHeight;\n        this.nodes.el.dataset.width = videoWidth;\n        this.nodes.el.dataset.duration = duration;\n        const max_height = Math.min(QR.max_height, QR.max_height_video);\n        const max_width = Math.min(QR.max_width, QR.max_width_video);\n        if ((videoHeight > max_height) || (videoWidth > max_width)) {\n          this.fileError(`Video too large (video: ${videoHeight}x${videoWidth}px, max: ${max_height}x${max_width}px)`);\n        }\n        if ((videoHeight < QR.min_height) || (videoWidth < QR.min_width)) {\n          this.fileError(`Video too small (video: ${videoHeight}x${videoWidth}px, min: ${QR.min_height}x${QR.min_width}px)`);\n        }\n        if (!isFinite(duration)) {\n          this.fileError('Video lacks duration metadata (try remuxing)');\n        } else if (duration > QR.max_duration_video) {\n          this.fileError(`Video too long (video: ${duration}s, max: ${QR.max_duration_video}s)`);\n        }\n        if (BoardConfig.noAudio(g.BOARD.ID) && $.hasAudio(el)) {\n          return this.fileError('Audio not allowed');\n        }\n      }\n    }\n\n    setThumbnail(el) {\n      // Create a redimensioned thumbnail.\n      let height, width;\n      const isVideo = el.tagName === 'VIDEO';\n\n      // Generate thumbnails only if they're really big.\n      // Resized pictures through canvases look like ass,\n      // so we generate thumbnails `s` times bigger then expected\n      // to avoid crappy resized quality.\n      let s = 90 * 2 * window.devicePixelRatio;\n      if (this.file.type === 'image/gif') { s *= 3; } // let them animate\n      if (isVideo) {\n        height = el.videoHeight;\n        width = el.videoWidth;\n      } else {\n        ({ height, width } = el);\n        if ((height < s) || (width < s)) {\n          this.URL = el.src;\n          this.nodes.el.style.backgroundImage = `url(${this.URL})`;\n          return;\n        }\n      }\n\n      if (height <= width) {\n        width = (s / height) * width;\n        height = s;\n      } else {\n        height = (s / width) * height;\n        width = s;\n      }\n      const cv = $.el('canvas');\n      cv.height = height;\n      cv.width = width;\n      cv.getContext('2d').drawImage(el, 0, 0, width, height);\n      URL.revokeObjectURL(el.src);\n      return cv.toBlob(blob => {\n        this.URL = URL.createObjectURL(blob);\n        return this.nodes.el.style.backgroundImage = `url(${this.URL})`;\n      });\n    }\n\n    rmFile() {\n      if (this.isLocked) { return; }\n      delete this.file;\n      delete this.filename;\n      delete this.filesize;\n      this.nodes.el.removeAttribute('title');\n      QR.nodes.filename.removeAttribute('title');\n      this.rmMetadata();\n      this.nodes.el.style.backgroundImage = '';\n      $.rmClass(this.nodes.el, 'has-file');\n      this.showFileData();\n      URL.revokeObjectURL(this.URL);\n      this.dismissErrors(error => $.hasClass(error, 'file-error'));\n      return this.preventAutoPost();\n    }\n\n    rmMetadata() {\n      for (var attr of ['type', 'height', 'width', 'duration']) {\n        // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=1021289\n        this.nodes.el.removeAttribute(`data-${attr}`);\n      }\n    }\n\n    saveFilename() {\n      this.file.newName = (this.filename || '').replace(/[/\\\\]/g, '-');\n      if (!QR.validExtension.test(this.filename)) {\n        // 4chan will truncate the filename if it has no extension.\n        return this.file.newName += `.${$.getOwn(QR.extensionFromType, this.file.type) || 'jpg'}`;\n      }\n    }\n\n    updateFilename() {\n      const long = `${this.filename} (${this.filesize})`;\n      this.nodes.el.title = long;\n      if (this !== QR.selected) { return; }\n      return QR.nodes.filename.title = long;\n    }\n\n    showFileData() {\n      if (this.file) {\n        this.updateFilename();\n        QR.nodes.filename.value = this.filename;\n        $.addClass(QR.nodes.oekaki, 'has-file');\n        $.addClass(QR.nodes.fileSubmit, 'has-file');\n      } else {\n        $.rmClass(QR.nodes.oekaki, 'has-file');\n        $.rmClass(QR.nodes.fileSubmit, 'has-file');\n      }\n      if (this.file?.source != null) {\n        QR.nodes.fileSubmit.dataset.source = this.file.source;\n      } else {\n        QR.nodes.fileSubmit.removeAttribute('data-source');\n      }\n      return QR.nodes.spoiler.checked = this.spoiler;\n    }\n\n    pasteText(file) {\n      this.pasting = true;\n      this.preventAutoPost();\n      const reader = new FileReader();\n      reader.onload = e => {\n        const { result } = e.target;\n        this.setComment((this.com ? `${this.com}\\n${result}` : result));\n        return delete this.pasting;\n      };\n      return reader.readAsText(file);\n    }\n\n    dragStart(e) {\n      const { left, top } = this.getBoundingClientRect();\n      e.dataTransfer.setDragImage(this, e.clientX - left, e.clientY - top);\n      return $.addClass(this, 'drag');\n    }\n    dragEnd() { return $.rmClass(this, 'drag'); }\n    dragEnter() { return $.addClass(this, 'over'); }\n    dragLeave() { return $.rmClass(this, 'over'); }\n\n    dragOver(e) {\n      e.preventDefault();\n      return e.dataTransfer.dropEffect = 'move';\n    }\n\n    drop() {\n      $.rmClass(this, 'over');\n      if (!this.draggable) { return; }\n      const el = $('.drag', this.parentNode);\n      const index = el => {\n        for (let i = 0; i < el.parentNode.children.length; i++) {\n          if (el.parentNode.children[i] === el) return i;\n        }\n        return -1;\n      }\n      const oldIndex = index(el);\n      const newIndex = index(this);\n      if (QR.posts[oldIndex].isLocked || QR.posts[newIndex].isLocked) { return; }\n      (oldIndex < newIndex ? $.after : $.before)(this, el);\n      const post = QR.posts.splice(oldIndex, 1)[0];\n      QR.posts.splice(newIndex, 0, post);\n      QR.status();\n      return QR.captcha.updateThread?.();\n    }\n  }\n\n};\nexport default QR;\n","import QR from \"../Posting/QR\";\nimport $ from \"./$\";\nimport { dict, platform } from \"./helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nlet eventPageRequest;\nif (platform === 'crx') {\n  eventPageRequest = (function () {\n    const callbacks = [];\n    chrome.runtime.onMessage.addListener(function(response) {\n      callbacks[response.id](response.data);\n      return delete callbacks[response.id];});\n    return (params, cb) => chrome.runtime.sendMessage(params, id => callbacks[id] = cb);\n  })();\n}\nvar CrossOrigin = {\n  binary(url, cb, headers = dict()) {\n    // XXX https://forums.lanik.us/viewtopic.php?f=64&t=24173&p=78310\n    url = url.replace(/^((?:https?:)?\\/\\/(?:\\w+\\.)?(?:4chan|4channel|4cdn)\\.org)\\/adv\\//, '$1//adv/');\n    if (platform === 'crx') {\n    eventPageRequest({type: 'ajax', url, headers, responseType: 'arraybuffer'}, function({response, responseHeaderString}) {\n      if (response) { response = new Uint8Array(response); }\n      return cb(response, responseHeaderString);\n    });\n    } else {\n      const fallback = function() {\n        return $.ajax(url, {\n          headers,\n          responseType: 'arraybuffer',\n          onloadend() {\n            if (this.status && this.response) {\n              return cb(new Uint8Array(this.response), this.getAllResponseHeaders());\n            } else {\n              return cb(null);\n            }\n          }\n        });\n      };\n      if ((typeof window.GM_xmlhttpRequest === 'undefined' || window.GM_xmlhttpRequest === null)) {\n        fallback();\n        return;\n      }\n      const gmOptions = {\n        method: \"GET\",\n        url,\n        headers,\n        responseType: 'arraybuffer',\n        overrideMimeType: 'text/plain; charset=x-user-defined',\n        onload(xhr) {\n          let data;\n          if (xhr.response instanceof ArrayBuffer) {\n            data = new Uint8Array(xhr.response);\n          } else {\n            const r = xhr.responseText;\n            data = new Uint8Array(r.length);\n            let i = 0;\n            while (i < r.length) {\n              data[i] = r.charCodeAt(i);\n              i++;\n            }\n          }\n          return cb(data, xhr.responseHeaders);\n        },\n        onerror() {\n          return cb(null);\n        },\n        onabort() {\n          return cb(null);\n        }\n      };\n      try {\n        return (GM?.xmlHttpRequest || GM_xmlhttpRequest)(gmOptions);\n      } catch (error) {\n        return fallback();\n      }\n    }\n  },\n\n  file(url, cb) {\n    return CrossOrigin.binary(url, function(data, headers) {\n      if (data == null) { return cb(null); }\n      let name = url.match(/([^\\/?#]+)\\/*(?:$|[?#])/)?.[1];\n      const contentType        = headers.match(/Content-Type:\\s*(.*)/i)?.[1];\n      const contentDisposition = headers.match(/Content-Disposition:\\s*(.*)/i)?.[1];\n      let mime = contentType?.match(/[^;]*/)[0] || 'application/octet-stream';\n      const match =\n        contentDisposition?.match(/\\bfilename\\s*=\\s*\"((\\\\\"|[^\"])+)\"/i)?.[1] ||\n        contentType?.match(/\\bname\\s*=\\s*\"((\\\\\"|[^\"])+)\"/i)?.[1];\n      if (match) {\n        name = match.replace(/\\\\\"/g, '\"');\n      }\n      if (/^text\\/plain;\\s*charset=x-user-defined$/i.test(mime)) {\n        // In JS Blocker (Safari) content type comes back as 'text/plain; charset=x-user-defined'; guess from filename instead.\n        mime = $.getOwn(QR.typeFromExtension, name.match(/[^.]*$/)[0].toLowerCase()) || 'application/octet-stream';\n      }\n      const blob = new Blob([data], {type: mime});\n      blob.name = name;\n      return cb(blob);\n    });\n  },\n\n  Request: (function() {\n    const Request = class Request {\n      static initClass() {\n        this.prototype.status = 0;\n        this.prototype.statusText = '';\n        this.prototype.response = null;\n        this.prototype.responseHeaderString = null;\n      }\n      getResponseHeader(headerName) {\n        if ((this.responseHeaders == null) && (this.responseHeaderString != null)) {\n          this.responseHeaders = dict();\n          for (var header of this.responseHeaderString.split('\\r\\n')) {\n            var i;\n            if ((i = header.indexOf(':')) >= 0) {\n              var key = header.slice(0, i).trim().toLowerCase();\n              var val = header.slice(i+1).trim();\n              this.responseHeaders[key] = val;\n            }\n          }\n        }\n        return this.responseHeaders?.[headerName.toLowerCase()] ?? null;\n      }\n      abort() {}\n      onloadend() {}\n    };\n    Request.initClass();\n    return Request;\n  })(),\n\n  // Attempts to fetch `url` using cross-origin privileges, if available.\n  // Interface is a subset of that of $.ajax.\n  // Options:\n  //   `onloadend` - called with the returned object as `this` on success or error/abort/timeout.\n  //   `timeout` - time limit for request\n  //   `responseType` - expected response type, 'json' by default; 'json' and 'text' supported\n  //   `headers` - request headers\n  // Returned object properties:\n  //   `status` - HTTP status (0 if connection not successful)\n  //   `statusText` - HTTP status text\n  //   `response` - decoded response body\n  //   `abort` - function for aborting the request (silently fails on some platforms)\n  //   `getResponseHeader` - function for reading response headers\n  ajax(url, options={}) {\n    let gmReq;\n    let {onloadend, timeout, responseType, headers} = options;\n    if (responseType == null) { responseType = 'json'; }\n\n    if ((window.GM?.xmlHttpRequest == null) && (typeof window.GM_xmlhttpRequest === 'undefined' || window.GM_xmlhttpRequest === null)) {\n      return $.ajax(url, options);\n    }\n\n    const req = new CrossOrigin.Request();\n    req.onloadend = onloadend;\n\n    if (platform === 'userscript') {\n      const gmOptions = {\n        method: 'GET',\n        url,\n        headers,\n        timeout,\n        onload(xhr) {\n          try {\n            const response = (() => { switch (responseType) {\n              case 'json':\n                if (xhr.responseText) { return JSON.parse(xhr.responseText); } else { return null; }\n              default:\n                return xhr.responseText;\n            } })();\n            $.extend(req, {\n              response,\n              status: xhr.status,\n              statusText: xhr.statusText,\n              responseHeaderString: xhr.responseHeaders\n            });\n          } catch (error) {}\n          return req.onloadend();\n        },\n        onerror() { return req.onloadend(); },\n        onabort() { return req.onloadend(); },\n        ontimeout() { return req.onloadend(); }\n      };\n      try {\n        gmReq = (GM?.xmlHttpRequest || GM_xmlhttpRequest)(gmOptions);\n      } catch (error) {\n        return $.ajax(url, options);\n      }\n\n      if (gmReq && (typeof gmReq.abort === 'function')) {\n        req.abort = function() {\n          try {\n            return gmReq.abort();\n          } catch (error1) {}\n        };\n      }\n    } else {\n      eventPageRequest({type: 'ajax', url, responseType, headers, timeout}, function(result) {\n        if (result.status) {\n          $.extend(req, result);\n        }\n        return req.onloadend();\n      });\n    }\n\n    return req;\n  },\n\n  cache(url, cb) {\n    return $.cache(url, cb,\n      {ajax: CrossOrigin.ajax});\n  },\n\n  permission(cb, cbFail, origins) {\n    if (platform === 'crx') {\n      return eventPageRequest({type: 'permission', origins}, function(result) {\n        if (result) {\n          return cb();\n        } else {\n          return cbFail();\n        }\n      });\n    }\n    return cb();\n  },\n};\nexport default CrossOrigin;\n",null,"import { Conf, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Get = {\n  url(type, IDs, ...args) {\n    let f, site;\n    if ((site = g.sites[IDs.siteID]) && (f = $.getOwn(site.urls, type))) {\n      return f(IDs, ...args);\n    } else {\n      return undefined;\n    }\n  },\n  threadExcerpt(thread) {\n    const {OP} = thread;\n    const excerpt = (`/${decodeURIComponent(thread.board.ID)}/ - `) + (\n      OP.info.subject?.trim() ||\n      OP.commentDisplay().replace(/\\n+/g, ' // ') ||\n      OP.file?.name ||\n      `No.${OP}`);\n    if (excerpt.length > 73) { return `${excerpt.slice(0, 70)}...`; }\n    return excerpt;\n  },\n  threadFromRoot(root) {\n    if (root == null) { return null; }\n    const {board} = root.dataset;\n    return g.threads.get(`${board ? encodeURIComponent(board) : g.BOARD.ID}.${root.id.match(/\\d*$/)[0]}`);\n  },\n  threadFromNode(node) {\n    return Get.threadFromRoot($.x(`ancestor-or-self::${g.SITE.xpath.thread}`, node));\n  },\n  postFromRoot(root) {\n    if (root == null) { return null; }\n    const post  = g.posts.get(root.dataset.fullID);\n    const index = root.dataset.clone;\n    if (index) { return post.clones[+index]; } else { return post; }\n  },\n  postFromNode(root) {\n    return Get.postFromRoot($.x(`ancestor-or-self::${g.SITE.xpath.postContainer}[1]`, root));\n  },\n  postDataFromLink(link) {\n    let boardID, postID, threadID;\n    if (link.dataset.postID) { // resurrected quote\n      ({boardID, threadID, postID} = link.dataset);\n      if (!threadID) { threadID = 0; }\n    } else {\n      const match = link.href.match(g.SITE.regexp.quotelink);\n      [boardID, threadID, postID] = match.slice(1);\n      if (!postID) { postID = threadID; }\n    }\n    return {\n      boardID,\n      threadID: +threadID,\n      postID:   +postID\n    };\n  },\n  allQuotelinksLinkingTo(post) {\n    // Get quotelinks & backlinks linking to the given post.\n    const quotelinks = [];\n    const {posts} = g;\n    const {fullID} = post;\n    const handleQuotes = function(qPost, type) {\n      quotelinks.push(...(qPost.nodes[type] || []));\n      for (var clone of qPost.clones) { quotelinks.push(...(clone.nodes[type] || [])); }\n    };\n    // First:\n    //   In every posts,\n    //   if it did quote this post,\n    //   get all their backlinks.\n    posts.forEach(function(qPost) {\n      if (qPost.quotes.includes(fullID)) {\n        return handleQuotes(qPost, 'quotelinks');\n      }\n    });\n\n    // Second:\n    //   If we have quote backlinks:\n    //   in all posts this post quoted\n    //   and their clones,\n    //   get all of their backlinks.\n    if (Conf['Quote Backlinks']) {\n      for (var quote of post.quotes) { var qPost;\n      if ((qPost = posts.get(quote))) { handleQuotes(qPost, 'backlinks'); } }\n    }\n\n    // Third:\n    //   Filter out irrelevant quotelinks.\n    return quotelinks.filter(function(quotelink) {\n      const {boardID, postID} = Get.postDataFromLink(quotelink);\n      return (boardID === post.board.ID) && (postID === post.ID);\n    });\n  }\n};\nexport default Get;\n",null,"import { Conf, doc, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport SW from \"./SW\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Site = {\n  defaultProperties: {\n    '4chan.org':    {software: 'yotsuba'},\n    '4channel.org': {canonical: '4chan.org'},\n    '4cdn.org':     {canonical: '4chan.org'},\n    'notso.smuglo.li': {canonical: 'smuglo.li'},\n    'smugloli.net':    {canonical: 'smuglo.li'},\n    'smug.nepu.moe':   {canonical: 'smuglo.li'}\n  },\n\n  init(cb) {\n    $.extend(Conf['siteProperties'], Site.defaultProperties);\n    let hostname = Site.resolve();\n    if (hostname && $.hasOwn(SW, Conf['siteProperties'][hostname].software)) {\n      this.set(hostname);\n      cb();\n    }\n    return $.onExists(doc, 'body', () => {\n      for (var software in SW) {\n        var changes;\n        if (changes = SW[software].detect?.()) {\n          changes.software = software;\n          hostname = location.hostname.replace(/^www\\./, '');\n          var properties = (Conf['siteProperties'][hostname] || (Conf['siteProperties'][hostname] = dict()));\n          var changed = 0;\n          for (var key in changes) {\n            if (properties[key] !== changes[key]) {\n              properties[key] = changes[key];\n              changed++;\n            }\n          }\n          if (changed) {\n            $.set('siteProperties', Conf['siteProperties']);\n          }\n          if (!g.SITE) {\n            this.set(hostname);\n            cb();\n          }\n          return;\n        }\n      }\n    });\n  },\n\n  resolve(url=location) {\n    let {hostname} = url;\n    while (hostname && !$.hasOwn(Conf['siteProperties'], hostname)) {\n      hostname = hostname.replace(/^[^.]*\\.?/, '');\n    }\n    if (hostname) {\n      let canonical;\n      if (canonical = Conf['siteProperties'][hostname].canonical) { hostname = canonical; }\n    }\n    return hostname;\n  },\n\n  parseURL(url) {\n    const siteID = Site.resolve(url);\n    return Main.parseURL(g.sites[siteID], url);\n  },\n\n  set(hostname) {\n    for (var ID in Conf['siteProperties']) {\n      var site;\n      var properties = Conf['siteProperties'][ID];\n      if (properties.canonical) { continue; }\n      var {\n        software\n      } = properties;\n      if (!software || !$.hasOwn(SW, software)) { continue; }\n      g.sites[ID] = (site = Object.create(SW[software]));\n      $.extend(site, {ID, siteID: ID, properties, software});\n    }\n    return g.SITE = g.sites[hostname];\n  }\n};\nexport default Site;\n","import Callbacks from \"../classes/Callbacks\";\nimport Filter from \"../Filtering/Filter\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport meta from '../../package.json';\nimport Index from \"../General/Index\";\nimport Site from \"../site/Site\";\nimport Header from \"../General/Header\";\nimport { g, Conf } from \"../globals/globals\";\nimport UI from \"../General/UI\";\nimport Get from \"../General/Get\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS205: Consider reworking code to avoid use of IIFEs\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar CatalogLinks = {\n  init() {\n    if ((g.SITE.software === 'yotsuba') && (Conf['External Catalog'] || Conf['JSON Index']) && !(Conf['JSON Index'] && (g.VIEW === 'index'))) {\n      const selector = (() => { switch (g.VIEW) {\n        case 'thread': case 'archive': return '.navLinks.desktop > a';\n        case 'catalog':           return '.navLinks > :first-child > a';\n        case 'index':             return '#ctrl-top > a, .cataloglink > a';\n      } })();\n      $.ready(function() {\n        for (var link of $$(selector)) {\n          var catalogURL;\n          switch (link.pathname.replace(/\\/+/g, '/')) {\n            case `/${g.BOARD}/`:\n              if (Conf['JSON Index']) { link.textContent = 'Index'; }\n              link.href = CatalogLinks.index();\n              break;\n            case `/${g.BOARD}/catalog`:\n              link.href = CatalogLinks.catalog();\n              break;\n          }\n          if ((g.VIEW === 'catalog') && ((catalogURL = CatalogLinks.catalog()) !== g.SITE.urls.catalog?.(g.BOARD))) {\n            var catalogLink = link.parentNode.cloneNode(true);\n            var link2 = catalogLink.firstElementChild;\n            link2.href = catalogURL;\n            link2.textContent = link2.hostname === location.hostname ? `${meta.name} Catalog` : 'External Catalog';\n            $.after(link.parentNode, [$.tn(' '), catalogLink]);\n          }\n        }\n      });\n    }\n\n    if ((g.SITE.software === 'yotsuba') && Conf['JSON Index'] && Conf[`Use ${meta.name} Catalog`]) {\n      Callbacks.Post.push({\n        name: 'Catalog Link Rewrite',\n        cb:   this.node\n      });\n    }\n\n    if (this.enabled = Conf['Catalog Links']) {\n      let el;\n      CatalogLinks.el = (el = UI.checkbox('Header catalog links', 'Catalog Links'));\n      el.id = 'toggleCatalog';\n      const input = $('input', el);\n      $.on(input, 'change', this.toggle);\n      $.sync('Header catalog links', CatalogLinks.set);\n      return Header.menu.addEntry({\n        el,\n        order: 95\n      });\n    }\n  },\n\n  node() {\n    for (var a of $$('a', this.nodes.comment)) {\n      var m;\n      if (m = a.href.match(/^https?:\\/\\/(boards\\.4chan(?:nel)?\\.org\\/[^\\/]+)\\/catalog(#s=.*)?/)) {\n        a.href = `//${m[1]}/${m[2] || '#catalog'}`;\n      }\n    }\n  },\n\n  toggle() {\n    $.event('CloseMenu');\n    $.set('Header catalog links', this.checked);\n    return CatalogLinks.set(this.checked);\n  },\n\n  set(useCatalog) {\n    Conf['Header catalog links'] = useCatalog;\n    CatalogLinks.setLinks(Header.boardList);\n    CatalogLinks.setLinks(Header.bottomBoardList);\n    CatalogLinks.el.title = `Turn catalog links ${useCatalog ? 'off' : 'on'}.`;\n    return $('input', CatalogLinks.el).checked = useCatalog;\n  },\n\n  // Also called by Header when board lists are loaded / generated.\n  setLinks(list) {\n    if ((!(CatalogLinks.enabled ?? Conf['Catalog Links'])) || !list) { return; }\n\n    // do not transform links unless they differ from the expected value at most by this tail\n    const tail = /(?:index)?(?:\\.\\w+)?$/;\n\n    for (var a of $$('a:not([data-only])', list)) {\n      var {siteID, boardID} = a.dataset;\n      if (!siteID || !boardID) {\n        var VIEW;\n        ({siteID, boardID, VIEW} = Site.parseURL(a));\n        if (\n          !siteID || !boardID ||\n          !['index', 'catalog'].includes(VIEW) ||\n          (!a.dataset.indexOptions && (a.href.replace(tail, '') !== (Get.url(VIEW, {siteID, boardID}) || '').replace(tail, '')))\n        ) { continue; }\n        $.extend(a.dataset, {siteID, boardID});\n      }\n\n      var board = {siteID, boardID};\n      var url = Conf['Header catalog links'] ? CatalogLinks.catalog(board) : Get.url('index', board);\n      if (url) {\n        a.href = url;\n        if (a.dataset.indexOptions && (url.split('#')[0] === Get.url('index', board))) {\n          a.href += (a.hash ? '/' : '#') + a.dataset.indexOptions;\n        }\n      }\n    }\n  },\n\n  externalParse() {\n    CatalogLinks.externalList = dict();\n    for (var line of Conf['externalCatalogURLs'].split('\\n')) {\n      if (line[0] === '#') { continue; }\n      var url = line.split(';')[0];\n      var boards   = Filter.parseBoards(line.match(/;boards:([^;]+)/)?.[1] || '*');\n      var excludes = Filter.parseBoards(line.match(/;exclude:([^;]+)/)?.[1]) || dict();\n      for (var board in boards) {\n        if (!excludes[board] && !excludes[board.split('/')[0] + '/*']) {\n          CatalogLinks.externalList[board] = url;\n        }\n      }\n    }\n  },\n\n  external({siteID, boardID}) {\n    if (!CatalogLinks.externalList) { CatalogLinks.externalParse(); }\n    const external = (CatalogLinks.externalList[`${siteID}/${boardID}`] || CatalogLinks.externalList[`${siteID}/*`]);\n    if (external) { return external.replace(/%board/g, boardID); } else { return undefined; }\n  },\n\n  jsonIndex(board, hash) {\n    if ((g.SITE.ID === board.siteID) && (g.BOARD.ID === board.boardID) && (g.VIEW === 'index')) {\n      return hash;\n    } else {\n      return Get.url('index', board) + hash;\n    }\n  },\n\n  catalog(board=g.BOARD) {\n    let external, nativeCatalog;\n    if (Conf['External Catalog'] && (external = CatalogLinks.external(board))) {\n      return external;\n    } else if (Index.enabledOn(board) && Conf[`Use ${meta.name} Catalog`]) {\n      return CatalogLinks.jsonIndex(board, '#catalog');\n    } else if (nativeCatalog = Get.url('catalog', board)) {\n      return nativeCatalog;\n    } else {\n      return CatalogLinks.external(board);\n    }\n  },\n\n  index(board=g.BOARD) {\n    if (Index.enabledOn(board)) {\n      return CatalogLinks.jsonIndex(board, '#index');\n    } else {\n      return Get.url('index', board);\n    }\n  }\n};\nexport default CatalogLinks;\n","import Redirect from \"../Archive/Redirect\";\nimport Notice from \"../classes/Notice\";\nimport { Conf, d, doc, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport CatalogLinks from \"../Miscellaneous/CatalogLinks\";\nimport ReplyPruning from \"../Monitoring/ReplyPruning\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport BoardConfig from \"./BoardConfig\";\nimport Get from \"./Get\";\nimport Settings from \"./Settings\";\nimport UI from \"./UI\";\nimport meta from '../../package.json';\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Header = {\n  init() {\n    $.onExists(doc, 'body', () => {\n      if (!Main.isThisPageLegit()) { return; }\n      $.add(this.bar, [this.noticesRoot, this.toggle]);\n      $.prepend(d.body, this.bar);\n      $.add(d.body, Header.hover);\n      return this.setBarPosition(Conf['Bottom Header']);\n  });\n\n    this.menu = new UI.Menu('header');\n\n    const menuButton = $.el('span',\n      {className: 'menu-button'});\n    $.extend(menuButton, {innerHTML: \"<i></i>\"});\n\n    const box = UI.checkbox;\n\n    const barFixedToggler     = box('Fixed Header',               'Fixed Header');\n    const headerToggler       = box('Header auto-hide',           'Auto-hide header');\n    const scrollHeaderToggler = box('Header auto-hide on scroll', 'Auto-hide header on scroll');\n    const barPositionToggler  = box('Bottom Header',              'Bottom header');\n    const linkJustifyToggler  = box('Centered links',             'Centered links');\n    const customNavToggler    = box('Custom Board Navigation',    'Custom board navigation');\n    const footerToggler       = box('Bottom Board List',          'Hide bottom board list');\n    const shortcutToggler     = box('Shortcut Icons',             'Shortcut Icons');\n    const editCustomNav = $.el('a', {\n      textContent: 'Edit custom board navigation',\n      href: 'javascript:;'\n    }\n    );\n\n    this.barFixedToggler     = barFixedToggler.firstElementChild;\n    this.scrollHeaderToggler = scrollHeaderToggler.firstElementChild;\n    this.barPositionToggler  = barPositionToggler.firstElementChild;\n    this.linkJustifyToggler  = linkJustifyToggler.firstElementChild;\n    this.headerToggler       = headerToggler.firstElementChild;\n    this.footerToggler       = footerToggler.firstElementChild;\n    this.shortcutToggler     = shortcutToggler.firstElementChild;\n    this.customNavToggler    = customNavToggler.firstElementChild;\n\n    $.on(menuButton,           'click',  this.menuToggle);\n    $.on(this.headerToggler,       'change', this.toggleBarVisibility);\n    $.on(this.barFixedToggler,     'change', this.toggleBarFixed);\n    $.on(this.barPositionToggler,  'change', this.toggleBarPosition);\n    $.on(this.scrollHeaderToggler, 'change', this.toggleHideBarOnScroll);\n    $.on(this.linkJustifyToggler,  'change', this.toggleLinkJustify);\n    $.on(this.footerToggler,       'change', this.toggleFooterVisibility);\n    $.on(this.shortcutToggler,     'change', this.toggleShortcutIcons);\n    $.on(this.customNavToggler,    'change', this.toggleCustomNav);\n    $.on(editCustomNav,        'click',  this.editCustomNav);\n\n    this.setBarFixed(Conf['Fixed Header']);\n    this.setHideBarOnScroll(Conf['Header auto-hide on scroll']);\n    this.setBarVisibility(Conf['Header auto-hide']);\n    this.setLinkJustify(Conf['Centered links']);\n    this.setShortcutIcons(Conf['Shortcut Icons']);\n    this.setFooterVisibility(Conf['Bottom Board List']);\n\n    $.sync('Fixed Header',               this.setBarFixed);\n    $.sync('Header auto-hide on scroll', this.setHideBarOnScroll);\n    $.sync('Bottom Header',              this.setBarPosition);\n    $.sync('Shortcut Icons',             this.setShortcutIcons);\n    $.sync('Header auto-hide',           this.setBarVisibility);\n    $.sync('Centered links',             this.setLinkJustify);\n    $.sync('Bottom Board List',          this.setFooterVisibility);\n\n    this.addShortcut('menu', menuButton, 900);\n\n    this.menu.addEntry({\n      el: $.el('span',\n        {textContent: 'Header'}),\n      order: 107,\n      subEntries: [\n          {el: barFixedToggler}\n        ,\n          {el: headerToggler}\n        ,\n          {el: scrollHeaderToggler}\n        ,\n          {el: barPositionToggler}\n        ,\n          {el: linkJustifyToggler}\n        ,\n          {el: footerToggler}\n        ,\n          {el: shortcutToggler}\n        ,\n          {el: customNavToggler}\n        ,\n          {el: editCustomNav}\n      ]});\n\n    $.on(window, 'load popstate', Header.hashScroll);\n    $.on(d, 'CreateNotification', this.createNotification);\n\n    this.setBoardList();\n\n    $.onExists(doc, `${g.SITE.selectors.boardList} + *`, Header.generateFullBoardList);\n\n    Main.ready(function() {\n      let footer;\n      if ((g.SITE.software === 'yotsuba') && !(footer = $.id('boardNavDesktopFoot'))) {\n        let absbot;\n        if (!(absbot = $.id('absbot'))) { return; }\n        footer = $.id('boardNavDesktop').cloneNode(true);\n        footer.id = 'boardNavDesktopFoot';\n        $('#navtopright',        footer).id = 'navbotright';\n        $('#settingsWindowLink', footer).id = 'settingsWindowLinkBot';\n        $.before(absbot, footer);\n        $.global(() => window.cloneTopNav = function() {});\n      }\n      if (Header.bottomBoardList = $(g.SITE.selectors.boardListBottom)) {\n        for (var a of $$('a', Header.bottomBoardList)) {\n          if ((a.hostname === location.hostname) && (a.pathname.split('/')[1] === g.BOARD.ID)) { a.className = 'current'; }\n        }\n        return CatalogLinks.setLinks(Header.bottomBoardList);\n      }\n    });\n\n    if ((g.SITE.software === 'yotsuba') && ((g.VIEW === 'catalog') || !Conf['Disable Native Extension'])) {\n      const cs = $.el('a', {href: 'javascript:;'});\n      if (g.VIEW === 'catalog') {\n        cs.title = (cs.textContent = 'Catalog Settings');\n        cs.textContent = '';\n      } else {\n        cs.title = (cs.textContent = '4chan Settings');\n        cs.className = 'native-settings';\n      }\n      $.on(cs, 'click', () => $.id('settingsWindowLink').click());\n      this.addShortcut('native', cs, 810);\n    }\n\n    return this.enableDesktopNotifications();\n  },\n\n  bar: $.el('div',\n    {id: 'header-bar'}),\n\n  noticesRoot: $.el('div',\n    {id: 'notifications'}),\n\n  shortcuts: $.el('span',\n    {id: 'shortcuts'}),\n\n  hover: $.el('div',\n    {id: 'hoverUI'}),\n\n  toggle: $.el('div',\n    {id: 'scroll-marker'}),\n\n  setBoardList() {\n    let boardList;\n    Header.boardList = (boardList = $.el('span',\n      {id: 'board-list'}));\n    $.extend(boardList, {innerHTML: \"<span id=\\\"custom-board-list\\\"></span><span id=\\\"full-board-list\\\" hidden><span class=\\\"hide-board-list-container brackets-wrap\\\"><a href=\\\"javascript:;\\\" class=\\\"hide-board-list-button\\\">&nbsp;-&nbsp;</a></span> <span class=\\\"boardList\\\"></span></span>\"});\n\n    const btn = $('.hide-board-list-button', boardList);\n    $.on(btn, 'click', Header.toggleBoardList);\n\n    $.prepend(Header.bar, [Header.boardList, Header.shortcuts]);\n\n    Header.setCustomNav(Conf['Custom Board Navigation']);\n    Header.generateBoardList(Conf['boardnav']);\n\n    $.sync('Custom Board Navigation', Header.setCustomNav);\n    return $.sync('boardnav', Header.generateBoardList);\n  },\n\n  generateFullBoardList() {\n    let nodes;\n    if (g.SITE.transformBoardList) {\n      nodes = g.SITE.transformBoardList();\n    } else {\n      nodes = [...$(g.SITE.selectors.boardList).cloneNode(true).childNodes];\n    }\n    const fullBoardList = $('.boardList', Header.boardList);\n    $.add(fullBoardList, nodes);\n    for (var a of $$('a', fullBoardList)) {\n      if ((a.hostname === location.hostname) && (a.pathname.split('/')[1] === g.BOARD.ID)) { a.className = 'current'; }\n    }\n    return CatalogLinks.setLinks(fullBoardList);\n  },\n\n  generateBoardList(boardnav) {\n    const list = $('#custom-board-list', Header.boardList);\n    $.rmAll(list);\n    if (!boardnav) { return; }\n    boardnav = boardnav.replace(/(\\r\\n|\\n|\\r)/g, ' ');\n    const re = /[\\w@]+(-(all|title|replace|full|index|catalog|archive|expired|nt|(mode|sort|text):\"[^\"]+\"(,\"[^\"]+\")?))*|[^\\w@]+/g;\n    const nodes = (boardnav.match(re).map((t) => Header.mapCustomNavigation(t)));\n    $.add(list, nodes);\n    return CatalogLinks.setLinks(list);\n  },\n\n  mapCustomNavigation(t) {\n    let a, href, m, url;\n    if (/^[^\\w@]/.test(t)) {\n      return $.tn(t);\n    }\n\n    let text = (url = null);\n    t = t.replace(/-text:\"([^\"]+)\"(?:,\"([^\"]+)\")?/g, function(m0, m1, m2) {\n      text = m1;\n      url  = m2;\n      return '';\n    });\n\n    let indexOptions = [];\n    t = t.replace(/-(?:mode|sort):\"([^\"]+)\"/g, function(m0, m1) {\n      indexOptions.push(m1.toLowerCase().replace(/\\ /g, '-'));\n      return '';\n    });\n    indexOptions = indexOptions.join('/');\n\n    if (/^toggle-all/.test(t)) {\n      a = $.el('a', {\n        className: 'show-board-list-button',\n        textContent: text || '+',\n        href: 'javascript:;'\n      }\n      );\n      $.on(a, 'click', Header.toggleBoardList);\n      return a;\n    }\n\n    if (/^external/.test(t)) {\n      a = $.el('a', {\n        href: url || 'javascript:;',\n        textContent: text || '+',\n        className: 'external'\n      }\n      );\n      if (/-nt/.test(t)) {\n        a.target = '_blank';\n        a.rel = 'noopener';\n      }\n      return a;\n    }\n\n    let boardID = t.split('-')[0];\n    if (boardID === 'current') {\n      if (['boards.4chan.org', 'boards.4channel.org'].includes(location.hostname)) {\n        boardID = g.BOARD.ID;\n      } else {\n        a = $.el('a', {\n          href: `/${g.BOARD.ID}/`,\n          textContent: text || decodeURIComponent(g.BOARD.ID),\n          className: 'current'\n        }\n        );\n        if (/-nt/.test(t)) {\n          a.target = '_blank';\n          a.rel = 'noopener';\n        }\n        if (/-index/.test(t)) {\n          a.dataset.only = 'index';\n        } else if (/-catalog/.test(t)) {\n          a.dataset.only = 'catalog';\n          a.href += 'catalog.html';\n        } else if (/-(archive|expired)/.test(t)) {\n          a = a.firstChild; // Its text node.\n        }\n        return a;\n      }\n    }\n\n    a = (function() {\n      let urlV;\n      if (boardID === '@') {\n        return $.el('a', {\n          href: 'https://twitter.com/4chan',\n          title: '4chan Twitter',\n          textContent: '@'\n        }\n        );\n      }\n\n      a = $.el('a', {\n        href: `//${BoardConfig.domain(boardID)}/${boardID}/`,\n        textContent: boardID,\n        title: BoardConfig.title(boardID)\n      }\n      );\n      if (['catalog', 'archive'].includes(g.VIEW) && (urlV = Get.url(g.VIEW, {siteID: '4chan.org', boardID}))) {\n        a.href = urlV;\n      }\n      if ((a.hostname === location.hostname) && (boardID === g.BOARD.ID)) { a.className = 'current'; }\n      return a;\n    })();\n\n    a.textContent = /-title/.test(t) || (/-replace/.test(t) && (a.hostname === location.hostname) && (boardID === g.BOARD.ID)) ?\n      a.title || a.textContent\n    : /-full/.test(t) ?\n      (`/${boardID}/`) + (a.title ? ` - ${a.title}` : '')\n    :\n      text || boardID;\n\n    if (m = t.match(/-(index|catalog)/)) {\n      const urlIC = CatalogLinks[m[1]]({siteID: '4chan.org', boardID});\n      if (urlIC) {\n        a.dataset.only = m[1];\n        a.href = urlIC;\n        if (m[1] === 'catalog') { $.addClass(a, 'catalog'); }\n      } else {\n        return a.firstChild; // Its text node.\n      }\n    }\n\n    if (Conf['JSON Index'] && indexOptions) {\n      a.dataset.indexOptions = indexOptions;\n      if (['boards.4chan.org', 'boards.4channel.org'].includes(a.hostname) && (a.pathname.split('/')[2] === '')) {\n        a.href += (a.hash ? '/' : '#') + indexOptions;\n      }\n    }\n\n    if (/-archive/.test(t)) {\n      if (href = Redirect.to('board', {boardID})) {\n        a.href = href;\n      } else {\n        return a.firstChild; // Its text node.\n      }\n    }\n\n    if (/-expired/.test(t)) {\n      if (BoardConfig.isArchived(boardID)) {\n        a.href = `//${BoardConfig.domain(boardID)}/${boardID}/archive`;\n      } else {\n        return a.firstChild; // Its text node.\n      }\n    }\n\n    if (/-nt/.test(t)) {\n      a.target = '_blank';\n      a.rel = 'noopener';\n    }\n\n    if (boardID === '@') { $.addClass(a, 'navSmall'); }\n    return a;\n  },\n\n  toggleBoardList() {\n    const {bar}  = Header;\n    const custom = $('#custom-board-list', bar);\n    const full   = $('#full-board-list',   bar);\n    const showBoardList = !full.hidden;\n    custom.hidden = !showBoardList;\n    return full.hidden   =  showBoardList;\n  },\n\n  setLinkJustify(centered) {\n    Header.linkJustifyToggler.checked = centered;\n    if (centered) {\n      return $.addClass(doc, 'centered-links');\n    } else {\n      return $.rmClass(doc, 'centered-links');\n    }\n  },\n\n  toggleLinkJustify() {\n    $.event('CloseMenu');\n    const centered = this.nodeName === 'INPUT' ?\n      this.checked : undefined;\n    Header.setLinkJustify(centered);\n    return $.set('Centered links', centered);\n  },\n\n  setBarFixed(fixed) {\n    Header.barFixedToggler.checked = fixed;\n    if (fixed) {\n      $.addClass(doc, 'fixed');\n      return $.addClass(Header.bar, 'dialog');\n    } else {\n      $.rmClass(doc, 'fixed');\n      return $.rmClass(Header.bar, 'dialog');\n    }\n  },\n\n  toggleBarFixed() {\n    $.event('CloseMenu');\n\n    Header.setBarFixed(this.checked);\n\n    Conf['Fixed Header'] = this.checked;\n    return $.set('Fixed Header',  this.checked);\n  },\n\n  setShortcutIcons(show) {\n    Header.shortcutToggler.checked = show;\n    if (show) {\n      return $.addClass(doc, 'shortcut-icons');\n    } else {\n      return $.rmClass(doc, 'shortcut-icons');\n    }\n  },\n\n  toggleShortcutIcons() {\n    $.event('CloseMenu');\n\n    Header.setShortcutIcons(this.checked);\n\n    Conf['Shortcut Icons'] = this.checked;\n    return $.set('Shortcut Icons',  this.checked);\n  },\n\n  setBarVisibility(hide) {\n    Header.headerToggler.checked = hide;\n    $.event('CloseMenu');\n    (hide ? $.addClass : $.rmClass)(Header.bar, 'autohide');\n    return (hide ? $.addClass : $.rmClass)(doc, 'autohide');\n  },\n\n  toggleBarVisibility() {\n    const hide = this.nodeName === 'INPUT' ?\n      this.checked\n    :\n      !$.hasClass(Header.bar, 'autohide');\n\n    Conf['Header auto-hide'] = hide;\n    $.set('Header auto-hide', hide);\n    Header.setBarVisibility(hide);\n    const message = `The header bar will ${hide ?\n      'automatically hide itself.'\n    :\n      'remain visible.'}`;\n    return new Notice('info', message, 2);\n  },\n\n  setHideBarOnScroll(hide) {\n    Header.scrollHeaderToggler.checked = hide;\n    if (hide) {\n      $.on(window, 'scroll', Header.hideBarOnScroll);\n      return;\n    }\n    $.off(window, 'scroll', Header.hideBarOnScroll);\n    $.rmClass(Header.bar, 'scroll');\n    return Header.bar.classList.toggle('autohide', Conf['Header auto-hide']);\n  },\n\n  toggleHideBarOnScroll() {\n    const hide = this.checked;\n    $.cb.checked.call(this);\n    return Header.setHideBarOnScroll(hide);\n  },\n\n  hideBarOnScroll() {\n    const offsetY = window.pageYOffset;\n    if (offsetY > (Header.previousOffset || 0)) {\n      $.addClass(Header.bar, 'autohide', 'scroll');\n    } else {\n      $.rmClass(Header.bar,  'autohide', 'scroll');\n    }\n    return Header.previousOffset = offsetY;\n  },\n\n  setBarPosition(bottom) {\n    if (Header.barPositionToggler) Header.barPositionToggler.checked = bottom;\n    $.event('CloseMenu');\n    const args = bottom ? [\n      'bottom-header',\n      'top-header',\n      'after'\n    ] : [\n      'top-header',\n      'bottom-header',\n      'add'\n    ];\n\n    $.addClass(doc, args[0]);\n    $.rmClass(doc, args[1]);\n    return $[args[2]](Header.bar, Header.noticesRoot);\n  },\n\n  toggleBarPosition() {\n    $.cb.checked.call(this);\n    return Header.setBarPosition(this.checked);\n  },\n\n  setFooterVisibility(hide) {\n    Header.footerToggler.checked = hide;\n    return doc.classList.toggle('hide-bottom-board-list', hide);\n  },\n\n  toggleFooterVisibility() {\n    $.event('CloseMenu');\n    const hide = this.nodeName === 'INPUT' ?\n      this.checked\n    :\n      $.hasClass(doc, 'hide-bottom-board-list');\n    Header.setFooterVisibility(hide);\n    $.set('Bottom Board List', hide);\n    const message = hide ?\n      'The bottom navigation will now be hidden.'\n    :\n      'The bottom navigation will remain visible.';\n    return new Notice('info', message, 2);\n  },\n\n  setCustomNav(show) {\n    Header.customNavToggler.checked = show;\n    const cust = $('#custom-board-list', Header.bar);\n    const full = $('#full-board-list',   Header.bar);\n    const btn = $('.hide-board-list-container', full);\n    return [cust.hidden, full.hidden, btn.hidden] = show ? [false, true, false] : [true, false, true];\n  },\n\n  toggleCustomNav() {\n    $.cb.checked.call(this);\n    return Header.setCustomNav(this.checked);\n  },\n\n  editCustomNav() {\n    Settings.open('Advanced');\n    const settings = $.id('fourchanx-settings');\n    return $('[name=boardnav]', settings).focus();\n  },\n\n  hashScroll(e) {\n    let hash;\n    if (e) {\n      // Don't scroll when navigating to an already visited state.\n      if (e.state) { return; }\n      if (!history.state) { history.replaceState({}, ''); }\n    }\n\n    if (hash = location.hash.slice(1)) {\n      let el;\n      ReplyPruning.showIfHidden(hash);\n      if (el = $.id(hash)) {\n        return $.queueTask(() => Header.scrollTo(el));\n      }\n    }\n  },\n\n  scrollTo(root, down, needed) {\n    let height, x;\n    if (!root.offsetParent) { return; } // hidden or fixed\n    if (down) {\n      x = Header.getBottomOf(root);\n      if (Conf['Fixed Header'] && Conf['Header auto-hide on scroll'] && Conf['Bottom header']) {\n        ({height} = Header.bar.getBoundingClientRect());\n        if (x <= 0) {\n          if (!Header.isHidden()) { x += height; }\n        } else {\n          if  (Header.isHidden()) { x -= height; }\n        }\n      }\n      if (!needed || (x < 0)) { return window.scrollBy(0, -x); }\n    } else {\n      x = Header.getTopOf(root);\n      if (Conf['Fixed Header'] && Conf['Header auto-hide on scroll'] && !Conf['Bottom header']) {\n        ({height} = Header.bar.getBoundingClientRect());\n        if (x >= 0) {\n          if (!Header.isHidden()) { x += height; }\n        } else {\n          if  (Header.isHidden()) { x -= height; }\n        }\n      }\n      if (!needed || (x < 0)) { return window.scrollBy(0,  x); }\n    }\n  },\n\n  scrollToIfNeeded(root, down) {\n    return Header.scrollTo(root, down, true);\n  },\n\n  getTopOf(root) {\n    let {top} = root.getBoundingClientRect();\n    if (Conf['Fixed Header'] && !Conf['Bottom Header']) {\n      const headRect = Header.toggle.getBoundingClientRect();\n      top     -= headRect.top + headRect.height;\n    }\n    return top;\n  },\n\n  getBottomOf(root) {\n    const {clientHeight} = doc;\n    let bottom = clientHeight - root.getBoundingClientRect().bottom;\n    if (Conf['Fixed Header'] && Conf['Bottom Header']) {\n      const headRect = Header.toggle.getBoundingClientRect();\n      bottom  -= (clientHeight - headRect.bottom) + headRect.height;\n    }\n    return bottom;\n  },\n\n  isNodeVisible(node) {\n    if (d.hidden || !doc.contains(node)) { return false; }\n    const {height} = node.getBoundingClientRect();\n    return ((Header.getTopOf(node) + height) >= 0) && ((Header.getBottomOf(node) + height) >= 0);\n  },\n\n  isHidden() {\n    const {top} = Header.bar.getBoundingClientRect();\n    if (Conf['Bottom header']) {\n      return top === doc.clientHeight;\n    } else {\n      return top < 0;\n    }\n  },\n\n  addShortcut(id, el, index) {\n    const shortcut = $.el('span', {\n      id: `shortcut-${id}`,\n      className: 'shortcut brackets-wrap'\n    }\n    );\n    $.add(shortcut, el);\n    shortcut.dataset.index = index;\n    for (var item of $$('[data-index]', Header.shortcuts)) {\n      if (+item.dataset.index > +index) {\n        $.before(item, shortcut);\n        return;\n      }\n    }\n    return $.add(Header.shortcuts, shortcut);\n  },\n\n  rmShortcut(el) {\n    return $.rm(el.parentElement);\n  },\n\n  menuToggle(e) {\n    return Header.menu.toggle(e, this, g);\n  },\n\n  createNotification(e) {\n    let notice;\n    const {type, content, lifetime} = e.detail;\n    return notice = new Notice(type, content, lifetime);\n  },\n\n  areNotificationsEnabled: false,\n  enableDesktopNotifications() {\n    let notice;\n    if (!window.Notification || !Conf['Desktop Notifications']) { return; }\n    switch (Notification.permission) {\n      case 'granted':\n        Header.areNotificationsEnabled = true;\n        return;\n        break;\n      case 'denied':\n        // requestPermission doesn't work if status is 'denied',\n        // but it'll still work if status is 'default'.\n        return;\n        break;\n    }\n\n    const el = $.el('span',\n      {innerHTML:\n        `${meta.name} needs your permission to show desktop notifications. ` +\n        `[<a href=\\\"${meta.faq}#why-is-4chan-x-asking-for-permission-to-show-desktop-notifications\\\" target=\\\"_blank\\\">FAQ</a>]` +\n        `<br><button>Authorize</button> or <button>Disable</button>`\n    });\n    const [authorize, disable] = $$('button', el);\n    $.on(authorize, 'click', () => Notification.requestPermission(function(status) {\n      Header.areNotificationsEnabled = status === 'granted';\n      if (status === 'default') { return; }\n      return notice.close();\n    }));\n    $.on(disable, 'click', function() {\n      $.set('Desktop Notifications', false);\n      return notice.close();\n    });\n    return notice = new Notice('info', el);\n  }\n};\nexport default Header;\n","import Header from \"../General/Header\";\nimport { d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { SECOND } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nexport default class Notice {\n  constructor(type, content, timeout, onclose) {\n    this.add = this.add.bind(this);\n    this.close = this.close.bind(this);\n    this.timeout = timeout;\n    this.onclose = onclose;\n    this.el = $.el('div',\n      {innerHTML: \"<a href=\\\"javascript:;\\\" class=\\\"close\\\" title=\\\"Close\\\"></a><div class=\\\"message\\\"></div>\"});\n    this.el.style.opacity = 0;\n    this.setType(type);\n    $.on(this.el.firstElementChild, 'click', this.close);\n    if (typeof content === 'string') {\n      content = $.tn(content);\n    }\n    $.add(this.el.lastElementChild, content);\n\n    $.ready(this.add);\n  }\n\n  setType(type) {\n    return this.el.className = `notification ${type}`;\n  }\n\n  add() {\n    if (this.closed) { return; }\n    if (d.hidden) {\n      $.on(d, 'visibilitychange', this.add);\n      return;\n    }\n    $.off(d, 'visibilitychange', this.add);\n    $.add(Header.noticesRoot, this.el);\n    this.el.clientHeight; // force reflow\n    this.el.style.opacity = 1;\n    if (this.timeout) { return setTimeout(this.close, this.timeout * SECOND); }\n  }\n\n  close() {\n    this.closed = true;\n    $.off(d, 'visibilitychange', this.add);\n    $.rm(this.el);\n    return this.onclose?.();\n  }\n}\n",null,"import { g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport Board from \"./Board\";\nimport Thread from \"./Thread\";\n\nexport default class CatalogThreadNative {\n  toString() { return this.ID; }\n\n  constructor(root) {\n    this.nodes = {\n      root,\n      thumb: $(g.SITE.selectors.catalog.thumb, root)\n    };\n    this.siteID  = g.SITE.ID;\n    this.boardID = this.nodes.thumb.parentNode.pathname.split(/\\/+/)[1];\n    this.board = g.boards[this.boardID] || new Board(this.boardID);\n    this.ID = (this.threadID = +(root.dataset.id || root.id).match(/\\d*$/)[0]);\n    this.thread = this.board.threads.get(this.ID) || new Thread(this.ID, this.board);\n  }\n}\n","import { Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst Anonymize = {\n  init() {\n    if (!Conf['Anonymize']) { return; }\n    return $.addClass(doc, 'anonymize');\n  }\n};\nexport default Anonymize;\n","import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { SECOND } from \"../platform/helpers\";\nimport ImageCommon from \"./ImageCommon\";\nimport Volume from \"./Volume\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageHover = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n    if (Conf['Image Hover']) {\n      Callbacks.Post.push({\n        name: 'Image Hover',\n        cb:   this.node\n      });\n    }\n    if (Conf['Image Hover in Catalog']) {\n      return Callbacks.CatalogThread.push({\n        name: 'Image Hover',\n        cb:   this.catalogNode\n      });\n    }\n  },\n\n  node() {\n    return this.files.filter((file) => (file.isImage || file.isVideo) && file.thumb).map((file) =>\n      $.on(file.thumb, 'mouseover', ImageHover.mouseover(this, file)));\n  },\n\n  catalogNode() {\n    const file = this.thread.OP.files[0];\n    if (!file || (!file.isImage && !file.isVideo)) { return; }\n    return $.on(this.nodes.thumb, 'mouseover', ImageHover.mouseover(this.thread.OP, file));\n  },\n\n  mouseover(post, file) { return function(e) {\n    let el, height, width;\n    if (!doc.contains(this)) { return; }\n    const {isVideo} = file;\n    if (file.isExpanding || file.isExpanded || g.SITE.isThumbExpanded?.(file)) { return; }\n    const error = ImageHover.error(post, file);\n    if (ImageCommon.cache?.dataset.fileID === `${post.fullID}.${file.index}`) {\n      el = ImageCommon.popCache();\n      $.on(el, 'error', error);\n    } else {\n      el = $.el((isVideo ? 'video' : 'img'));\n      el.dataset.fileID = `${post.fullID}.${file.index}`;\n      $.on(el, 'error', error);\n      el.src = file.url;\n    }\n\n    if (Conf['Restart when Opened']) {\n      ImageCommon.rewind(el);\n      ImageCommon.rewind(this);\n    }\n    el.id = 'ihover';\n    $.add(Header.hover, el);\n    if (isVideo) {\n      el.loop     = true;\n      el.controls = false;\n      Volume.setup(el);\n      if (Conf['Autoplay']) {\n        el.play();\n        if (this.nodeName === 'VIDEO') { this.currentTime = el.currentTime; }\n      }\n    }\n    if (file.dimensions) {\n      [width, height] = file.dimensions.split('x').map((x) => +x);\n      const maxWidth = doc.clientWidth;\n      const maxHeight = doc.clientHeight - UI.hover.padding;\n      const scale = Math.min(1, maxWidth / width, maxHeight / height);\n      width *= scale;\n      height *= scale;\n      el.style.maxWidth  = `${width}px`;\n      el.style.maxHeight = `${height}px`;\n    }\n    return UI.hover({\n      root: this,\n      el,\n      latestEvent: e,\n      endEvents: 'mouseout click',\n      height,\n      width,\n      noRemove: true,\n      cb() {\n        $.off(el, 'error', error);\n        ImageCommon.pushCache(el);\n        ImageCommon.pause(el);\n        $.rm(el);\n        return el.removeAttribute('style');\n      }\n    });\n  }; },\n\n  error(post, file) { return function() {\n    if (ImageCommon.decodeError(this, file)) { return; }\n    return ImageCommon.error(this, post, file, 3 * SECOND, URL => {\n      if (URL) {\n        return this.src = URL + (this.src === URL ? '?' + Date.now() : '');\n      } else {\n        return $.rm(this);\n      }\n    });\n  }; }\n};\nexport default ImageHover;\n","import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport { g, Conf, d, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ImageLoader = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n    const replace = Conf['Replace JPG'] || Conf['Replace PNG'] || Conf['Replace GIF'] || Conf['Replace WEBM'];\n    if (!Conf['Image Prefetching'] && !replace) { return; }\n\n    Callbacks.Post.push({\n      name: 'Image Replace',\n      cb:   this.node\n    });\n\n    $.on(d, 'PostsInserted', function() {\n      if (ImageLoader.prefetchEnabled || replace) {\n        return g.posts.forEach(ImageLoader.prefetchAll);\n      }\n    });\n\n    if (Conf['Replace WEBM']) {\n      $.on(d, 'scroll visibilitychange 4chanXInitFinished PostsInserted', this.playVideos);\n    }\n\n    if (!Conf['Image Prefetching'] || !['index', 'thread'].includes(g.VIEW)) { return; }\n\n    const el = $.el('a', {\n      href: 'javascript:;',\n      title: 'Prefetch Images',\n      innerHTML: ''\n    }\n    );\n\n    $.on(el, 'click', this.toggle);\n\n    return Header.addShortcut('prefetch', el, 525);\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var file of this.files) {\n      if (Conf['Replace WEBM'] && file.isVideo) { ImageLoader.replaceVideo(this, file); }\n      ImageLoader.prefetch(this, file);\n    }\n  },\n\n  replaceVideo(post, file) {\n    const {thumb} = file;\n    const video = $.el('video', {\n      preload:     'none',\n      loop:        true,\n      muted:       true,\n      poster:      thumb.src || thumb.dataset.src,\n      textContent: thumb.alt,\n      className:   thumb.className\n    }\n    );\n    video.setAttribute('muted', 'muted');\n    video.dataset.md5 = thumb.dataset.md5;\n    for (var attr of ['height', 'width', 'maxHeight', 'maxWidth']) { video.style[attr] = thumb.style[attr]; }\n    video.src         = file.url;\n    $.replace(thumb, video);\n    file.thumb      = video;\n    return file.videoThumb = true;\n  },\n\n  prefetch(post, file) {\n    let clone, type;\n    const {isImage, isVideo, thumb, url} = file;\n    if (file.isPrefetched || !(isImage || isVideo) || post.isHidden || post.thread.isHidden) { return; }\n    if (isVideo) {\n      type = 'WEBM';\n    } else {\n      type = url.match(/\\.([^.]+)$/)?.[1].toUpperCase();\n      if (type === 'JPEG') { type = 'JPG'; }\n    }\n    const replace = Conf[`Replace ${type}`] && !/spoiler/.test(thumb.src || thumb.dataset.src);\n    if (!replace && !ImageLoader.prefetchEnabled) { return; }\n    if ($.hasClass(doc, 'catalog-mode')) { return; }\n    if (![post, ...post.clones].some(clone => doc.contains(clone.nodes.root))) { return; }\n    file.isPrefetched = true;\n    if (file.videoThumb) {\n      for (clone of post.clones) { clone.file.thumb.preload = 'auto'; }\n      thumb.preload = 'auto';\n      // XXX Cloned video elements with poster in Firefox cause momentary display of image loading icon.\n      if ($.engine === 'gecko') {\n        $.on(thumb, 'loadeddata', function() { return this.removeAttribute('poster'); });\n      }\n      return;\n    }\n\n    const el = $.el(isImage ? 'img' : 'video');\n    if (isVideo) { el.preload = 'auto'; }\n    if (replace && isImage) {\n      $.on(el, 'load', function() {\n        for (clone of post.clones) { clone.file.thumb.src = url; }\n        return thumb.src = url;\n      });\n    }\n    return el.src = url;\n  },\n\n  prefetchAll(post) {\n    for (var file of post.files) {\n      ImageLoader.prefetch(post, file);\n    }\n  },\n\n  toggle() {\n    ImageLoader.prefetchEnabled = !ImageLoader.prefetchEnabled;\n    this.classList.toggle('disabled', !ImageLoader.prefetchEnabled);\n    if (ImageLoader.prefetchEnabled) {\n      g.posts.forEach(ImageLoader.prefetchAll);\n    }\n  },\n\n  playVideos() {\n    // Special case: Quote previews are off screen when inserted into document, but quickly moved on screen.\n    const qpClone = $.id('qp')?.firstElementChild;\n    return g.posts.forEach(function(post) {\n      for (post of [post, ...post.clones]) {\n        for (var file of post.files) {\n          if (file.videoThumb) {\n            var {thumb} = file;\n            if (Header.isNodeVisible(thumb) || (post.nodes.root === qpClone)) { thumb.play(); } else { thumb.pause(); }\n          }\n        }\n      }\n    });\n  }\n};\nexport default ImageLoader;\n","import $ from \"../platform/$\";\nimport Callbacks from \"../classes/Callbacks\";\nimport CrossOrigin from \"../platform/CrossOrigin\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport Get from \"../General/Get\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Metadata = {\n  init() {\n    if (!Conf['WEBM Metadata'] || !['index', 'thread'].includes(g.VIEW)) { return; }\n\n    return Callbacks.Post.push({\n      name: 'WEBM Metadata',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    for (let i = 0; i < this.files.length; i++) {\n      var file = this.files[i];\n      if (/webm$/i.test(file.url)) {var el;\n      \n        if (this.isClone) {\n          el = $('.webm-title', file.text);\n        } else {\n          el = $.el('span',\n            {className: 'webm-title'});\n          el.dataset.index = i;\n          $.extend(el,\n            {innerHTML: \"<a href=\\\"javascript:;\\\"></a>\"});\n          $.add(file.text, [$.tn(' '), el]);\n        }\n        if (el.children.length === 1) { $.one(el.lastElementChild, 'mouseover focus', Metadata.load); }\n      }\n    }\n  },\n\n  load() {\n    $.rmClass(this.parentNode, 'error');\n    $.addClass(this.parentNode, 'loading');\n    const {index} = this.parentNode.dataset;\n    return CrossOrigin.binary(Get.postFromNode(this).files[+index].url, data => {\n      $.rmClass(this.parentNode, 'loading');\n      if (data != null) {\n        const title = Metadata.parse(data);\n        const output = $.el('span',\n          {textContent: title || ''});\n        if (title == null) { $.addClass(this.parentNode, 'not-found'); }\n        $.before(this, output);\n        this.parentNode.tabIndex = 0;\n        if (d.activeElement === this) { this.parentNode.focus(); }\n        return this.tabIndex = -1;\n      } else {\n        $.addClass(this.parentNode, 'error');\n        return $.one(this, 'click', Metadata.load);\n      }\n    }\n    ,\n      {Range: 'bytes=0-9999'});\n  },\n\n  parse(data) {\n    const readInt = function() {\n      let n = data[i++];\n      let len = 0;\n      while (n < (0x80 >> len)) { len++; }\n      n ^= (0x80 >> len);\n      while (len-- && (i < data.length)) {\n        n = (n << 8) ^ data[i++];\n      }\n      return n;\n    };\n\n    var i = 0;\n    while (i < data.length) {\n      var element = readInt();\n      var size    = readInt();\n      if (element === 0x3BA9) { // Title\n        var title = '';\n        while (size-- && (i < data.length)) {\n          title += String.fromCharCode(data[i++]);\n        }\n        return decodeURIComponent(escape(title)); // UTF-8 decoding\n      } else if (![0x8538067, 0x549A966].includes(element)) { // Segment, Info\n        i += size;\n      }\n    }\n    return null;\n  }\n};\nexport default Metadata;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst RevealSpoilers = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW) || !Conf['Reveal Spoiler Thumbnails']) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Reveal Spoiler Thumbnails',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var file of this.files) {\n      if (file.thumb && file.isSpoiler) {\n        var {thumb} = file;\n        // Remove old width and height.\n        thumb.removeAttribute('style');\n        // Enforce thumbnail size if thumbnail is replaced.\n        thumb.style.maxHeight = (thumb.style.maxWidth = this.isReply ? '125px' : '250px');\n        if (thumb.src) {\n          thumb.src = file.thumbURL;\n        } else {\n          thumb.dataset.src = file.thumbURL;\n        }\n      }\n    }\n  }\n};\nexport default RevealSpoilers;\n","import Callbacks from \"../classes/Callbacks\";\n// import Test from \"../General/Test\";\nimport { g, Conf } from \"../globals/globals\";\nimport ImageHost from \"../Images/ImageHost\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport Embedding from \"./Embedding\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Linkify = {\n  init() {\n    if (!['index', 'thread', 'archive'].includes(g.VIEW) || !Conf['Linkify']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    Callbacks.Post.push({\n      name: 'Linkify',\n      cb:   this.node\n    });\n\n    return Embedding.init();\n  },\n\n  node() {\n    let link;\n    if (this.isClone) { return Embedding.events(this); }\n    if (!Linkify.regString.test(this.info.comment)) { return; }\n    for (link of $$('a', this.nodes.comment)) {\n      if (g.SITE.isLinkified?.(link)) {\n        $.addClass(link, 'linkify');\n        if (ImageHost.useFaster) { ImageHost.fixLinks([link]); }\n        Embedding.process(link, this);\n      }\n    }\n    const links = Linkify.process(this.nodes.comment);\n    if (ImageHost.useFaster) { ImageHost.fixLinks(links); }\n    for (link of links) { Embedding.process(link, this); }\n  },\n\n  process(node) {\n    let length;\n    const test     = /[^\\s\"]+/g;\n    const space    = /[\\s\"]/;\n    const snapshot = $.X('.//br|.//text()', node);\n    let i = 0;\n    const links = [];\n    while ((node = snapshot.snapshotItem(i++))) {\n      var result;\n      var {data} = node;\n      if (!data || (node.parentElement.nodeName === \"A\")) { continue; }\n\n      while ((result = test.exec(data))) {\n        var {index} = result;\n        var endNode = node;\n        var word    = result[0];\n        // End of node, not necessarily end of space-delimited string\n        if ((length = index + word.length) === data.length) {\n          var saved;\n          test.lastIndex = 0;\n\n          while (saved = snapshot.snapshotItem(i++)) {\n            var end;\n            if ((saved.nodeName === 'BR') || ((saved.parentElement.nodeName === 'P') && !saved.previousSibling)) {\n              var part1, part2;\n              if (\n                // link deliberately split\n                (part1 = word.match(/(https?:\\/\\/)?([a-z\\d-]+\\.)*[a-z\\d-]+$/i)) &&\n                (part2 = snapshot.snapshotItem(i)?.data?.match(/^(\\.[a-z\\d-]+)*\\//i)) &&\n                ((part1[0] + part2[0]).search(Linkify.regString) === 0)\n              ) {\n                continue;\n              } else {\n                break;\n              }\n            }\n\n            if ((saved.parentElement.nodeName === \"A\") && !Linkify.regString.test(word)) {\n              break;\n            }\n\n            endNode  = saved;\n            ({data}   = saved);\n\n            if (end = space.exec(data)) {\n              // Set our snapshot and regex to start on this node at this position when the loop resumes\n              word += data.slice(0, end.index);\n              test.lastIndex = (length = end.index);\n              i--;\n              break;\n            } else {\n              ({length} = data);\n              word    += data;\n            }\n          }\n        }\n\n        if (Linkify.regString.test(word)) {\n          links.push(Linkify.makeRange(node, endNode, index, length));\n\n          // <% if (readJSON('/.tests_enabled')) { %>\n          // if (links.length) {\n          // Test.assert(() => word === links[links.length - 1]?.toString());\n          // }\n          // <% } %>\n        }\n\n        if (!test.lastIndex || (node !== endNode)) { break; }\n      }\n    }\n\n    i = links.length;\n    while (i--) {\n      links[i] = Linkify.makeLink(links[i]);\n    }\n    return links;\n  },\n\n  regString: new RegExp(`(\\\n\\\n(https?|mailto|git|magnet|ftp|irc):(\\\n[a-z\\\\d%/?]\\\n)\\\n|\\\n([-a-z\\\\d]+[.])+(\\\naero|asia|biz|cat|com|coop|dance|info|int|jobs|mobi|moe|museum|name|net|org|post|pro|tel|travel|xxx|xyz|edu|gov|mil|[a-z]{2}\\\n)([:/]|(?![^\\\\s\"]))\\\n|\\\n[\\\\d]{1,3}\\\\.[\\\\d]{1,3}\\\\.[\\\\d]{1,3}\\\\.[\\\\d]{1,3}\\\n|\\\n[-\\\\w\\\\d.@]+@[a-z\\\\d.-]+\\\\.[a-z\\\\d]\\\n)`, 'i'),\n\n  makeRange(startNode, endNode, startOffset, endOffset) {\n    const range = document.createRange();\n    range.setStart(startNode, startOffset);\n    range.setEnd(endNode,   endOffset);\n    return range;\n  },\n\n  makeLink(range) {\n    let t;\n    let encodedDomain;\n    let text = range.toString();\n\n    // Clean start of range\n    let i = text.search(Linkify.regString);\n\n    if (i > 0) {\n      text = text.slice(i);\n      while ((range.startOffset + i) >= range.startContainer.data.length) { i--; }\n\n      if (i) { range.setStart(range.startContainer, range.startOffset + i); }\n    }\n\n    // Clean end of range\n    i = 0;\n    while (/[)\\]}>.,]/.test(t = text.charAt(text.length - (1 + i)))) {\n      if (!/[.,]/.test(t) && !((text.match(/[()\\[\\]{}<>]/g)).length % 2)) { break; }\n      i++;\n    }\n\n    if (i) {\n      text = text.slice(0, -i);\n      while ((range.endOffset - i) < 0) { i--; }\n\n      if (i) {\n        range.setEnd(range.endContainer, range.endOffset - i);\n      }\n    }\n\n    // Make our link 'valid' if it is formatted incorrectly.\n    if (!/((mailto|magnet):|.+:\\/\\/)/.test(text)) {\n      text = (\n        /@/.test(text) ?\n          'mailto:'\n        :\n          'http://'\n      ) + text;\n    }\n\n    // Decode percent-encoded characters in domain so that they behave consistently across browsers.\n    if (encodedDomain = text.match(/^(https?:\\/\\/[^/]*%[0-9a-f]{2})(.*)$/i)) {\n      text = encodedDomain[1].replace(/%([0-9a-f]{2})/ig, function(x, y) {\n        if (y === '25') { return x; } else { return String.fromCharCode(parseInt(y, 16)); }\n      }) + encodedDomain[2];\n    }\n\n    const a = $.el('a', {\n      className: 'linkify',\n      rel:       'noreferrer noopener',\n      target:    '_blank',\n      href:      text\n    }\n    );\n\n    // Insert the range into the anchor, the anchor into the range's DOM location, and destroy the range.\n    $.add(a, range.extractContents());\n    range.insertNode(a);\n\n    return a;\n  }\n};\nexport default Linkify;\n","import $ from \"../platform/$\";\nimport Redirect from \"../Archive/Redirect\";\nimport Filter from \"../Filtering/Filter\";\nimport { g, Conf } from \"../globals/globals\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst ArchiveLink = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Archive Link']) { return; }\n\n    const div = $.el('div',\n      {textContent: 'Archive'});\n\n    const entry = {\n      el: div,\n      order: 60,\n      open({ID, thread, board}) {\n        return !!Redirect.to('thread', {postID: ID, threadID: thread.ID, boardID: board.ID});\n      },\n      subEntries: []\n    };\n\n    for (var type of [\n      ['Post',      'post'],\n      ['Name',      'name'],\n      ['Tripcode',  'tripcode'],\n      ['Capcode',   'capcode'],\n      ['Subject',   'subject'],\n      ['Flag',      'country'],\n      ['Filename',  'filename'],\n      ['Image MD5', 'MD5']\n    ]) {\n      // Add a sub entry for each type.\n      entry.subEntries.push(this.createSubEntry(type[0], type[1]));\n    }\n\n    return Menu.menu.addEntry(entry);\n  },\n\n  createSubEntry(text, type) {\n    const el = $.el('a', {\n      textContent: text,\n      target: '_blank'\n    }\n    );\n\n    const open = type === 'post' ?\n      function({ID, thread, board}) {\n        el.href = Redirect.to('thread', {postID: ID, threadID: thread.ID, boardID: board.ID});\n        return true;\n      }\n    :\n      function(post) {\n        const typeParam = (type === 'country') && post.info.flagCodeTroll ?\n          'troll_country'\n        :\n          type;\n        const value = type === 'country' ?\n          post.info.flagCode || post.info.flagCodeTroll?.toLowerCase()\n        :\n          Filter.values(type, post)[0];\n        // We want to parse the exact same stuff as the filter does already.\n        if (!value) { return false; }\n        el.href = Redirect.to('search', {\n          boardID:  post.board.ID,\n          type:     typeParam,\n          value,\n          isSearch: true\n        }\n        );\n        return true;\n      };\n\n    return {\n      el,\n      open\n    };\n  }\n};\nexport default ArchiveLink;\n","import { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar CopyTextLink = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Copy Text Link']) { return; }\n\n    const a = $.el('a', {\n      className: 'copy-text-link',\n      href: 'javascript:;',\n      textContent: 'Copy Text'\n    }\n    );\n    $.on(a, 'click', CopyTextLink.copy);\n\n    return Menu.menu.addEntry({\n      el: a,\n      order: 12,\n      open(post) {\n        CopyTextLink.text = (post.origin || post).commentOrig();\n        return true;\n      }\n    });\n  },\n\n  copy() {\n    const el = $.el('textarea', {\n      className: 'copy-text-element',\n      value: CopyTextLink.text\n    }\n    );\n    $.add(d.body, el);\n    el.select();\n    try {\n      d.execCommand('copy');\n    } catch (error) {}\n    return $.rm(el);\n  }\n};\nexport default CopyTextLink;\n","import Notice from \"../classes/Notice\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport QR from \"../Posting/QR\";\nimport Menu from \"./Menu\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar DeleteLink = {\n  auto: [dict(), dict()],\n\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Delete Link']) { return; }\n\n    const div = $.el('div', {\n      className: 'delete-link',\n      textContent: 'Delete'\n    }\n    );\n    const postEl = $.el('a', {\n      className: 'delete-post',\n      href: 'javascript:;'\n    }\n    );\n    const fileEl = $.el('a', {\n      className: 'delete-file',\n      href: 'javascript:;'\n    }\n    );\n    this.nodes = {\n      menu:  div.firstChild,\n      links: [postEl, fileEl]\n    };\n\n    const postEntry = {\n      el: postEl,\n      open() {\n        postEl.textContent = DeleteLink.linkText(false);\n        $.on(postEl, 'click', DeleteLink.toggle);\n        return true;\n      }\n    };\n    const fileEntry = {\n      el: fileEl,\n      open({file}) {\n        if (!file || file.isDead) { return false; }\n        fileEl.textContent = DeleteLink.linkText(true);\n        $.on(fileEl, 'click', DeleteLink.toggle);\n        return true;\n      }\n    };\n\n    return Menu.menu.addEntry({\n      el: div,\n      order: 40,\n      open(post) {\n        if (post.isDead) { return false; }\n        DeleteLink.post = post;\n        DeleteLink.nodes.menu.textContent = DeleteLink.menuText();\n        DeleteLink.cooldown.start(post);\n        return true;\n      },\n      subEntries: [postEntry, fileEntry]});\n  },\n\n  menuText() {\n    let seconds;\n    if ((seconds = DeleteLink.cooldown.seconds[DeleteLink.post.fullID])) {\n      return `Delete (${seconds})`;\n    } else {\n      return 'Delete';\n    }\n  },\n\n  linkText(fileOnly) {\n    let text = fileOnly ? 'File' : 'Post';\n    if (DeleteLink.auto[+fileOnly][DeleteLink.post.fullID]) {\n      text = `Deleting ${text.toLowerCase()}...`;\n    }\n    return text;\n  },\n\n  toggle() {\n    const {post} = DeleteLink;\n    const fileOnly = $.hasClass(this, 'delete-file');\n    const auto = DeleteLink.auto[+fileOnly];\n\n    if (auto[post.fullID]) {\n      delete auto[post.fullID];\n    } else {\n      auto[post.fullID] = true;\n    }\n    this.textContent = DeleteLink.linkText(fileOnly);\n\n    if (!DeleteLink.cooldown.seconds[post.fullID]) {\n      return DeleteLink.delete(post, fileOnly);\n    }\n  },\n\n  delete(post, fileOnly) {\n    const link = DeleteLink.nodes.links[+fileOnly];\n    delete DeleteLink.auto[+fileOnly][post.fullID];\n    if (post.fullID === DeleteLink.post.fullID) { $.off(link, 'click', DeleteLink.toggle); }\n\n    const form = {\n      mode: 'usrdel',\n      onlyimgdel: fileOnly,\n      pwd: QR.persona.getPassword()\n    };\n    form[+post.ID] = 'delete';\n\n    return $.ajax($.id('delform').action.replace(`/${g.BOARD}/`, `/${post.board}/`), {\n      responseType: 'document',\n      withCredentials: true,\n      onloadend() { return DeleteLink.load(link, post, fileOnly, this.response); },\n      form: $.formData(form)\n    }\n    );\n  },\n\n  load(link, post, fileOnly, resDoc) {\n    let msg;\n    if (!resDoc) {\n      new Notice('warning', 'Connection error, please retry.', 20);\n      if (post.fullID === DeleteLink.post.fullID) { $.on(link, 'click', DeleteLink.toggle); }\n      return;\n    }\n\n    link.textContent = DeleteLink.linkText(fileOnly);\n    if (resDoc.title === '4chan - Banned') { // Ban/warn check\n      const el = $.el('span', {innerHTML: \"You can&#039;t delete posts because you are <a href=\\\"//www.4chan.org/banned\\\" target=\\\"_blank\\\">banned</a>.\"});\n      return new Notice('warning', el, 20);\n    } else if (msg = resDoc.getElementById('errmsg')) { // error!\n      new Notice('warning', msg.textContent, 20);\n      if (post.fullID === DeleteLink.post.fullID) { $.on(link, 'click', DeleteLink.toggle); }\n      if (QR.cooldown.data && Conf['Cooldown'] && /\\bwait\\b/i.test(msg.textContent)) {\n        DeleteLink.cooldown.start(post, 5);\n        DeleteLink.auto[+fileOnly][post.fullID] = true;\n        return DeleteLink.nodes.links[+fileOnly].textContent = DeleteLink.linkText(fileOnly);\n      }\n    } else {\n      if (!fileOnly) { QR.cooldown.delete(post); }\n      if (resDoc.title === 'Updating index...') {\n        // We're 100% sure.\n        (post.origin || post).kill(fileOnly);\n      }\n      if (post.fullID === DeleteLink.post.fullID) { return link.textContent = 'Deleted'; }\n    }\n  },\n\n  cooldown: {\n    seconds: dict(),\n\n    start(post, seconds) {\n      // Already counting.\n      if (DeleteLink.cooldown.seconds[post.fullID] != null) { return; }\n\n      if (seconds == null) { seconds = QR.cooldown.secondsDeletion(post); }\n      if (seconds > 0) {\n        DeleteLink.cooldown.seconds[post.fullID] = seconds;\n        return DeleteLink.cooldown.count(post);\n      }\n    },\n\n    count(post) {\n      if (post.fullID === DeleteLink.post.fullID) { DeleteLink.nodes.menu.textContent = DeleteLink.menuText(); }\n      if ((DeleteLink.cooldown.seconds[post.fullID] > 0) && Conf['Cooldown']) {\n        DeleteLink.cooldown.seconds[post.fullID]--;\n        setTimeout(DeleteLink.cooldown.count, 1000, post);\n      } else {\n        delete DeleteLink.cooldown.seconds[post.fullID];\n        for (var fileOnly of [false, true]) {\n          if (DeleteLink.auto[+fileOnly][post.fullID]) {\n            DeleteLink.delete(post, fileOnly);\n          }\n        }\n      }\n    }\n  }\n};\nexport default DeleteLink;\n","import { g, Conf } from \"../globals/globals\";\nimport ImageCommon from \"../Images/ImageCommon\";\nimport $ from \"../platform/$\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst DownloadLink = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Download Link']) { return; }\n\n    const a = $.el('a', {\n      className: 'download-link',\n      textContent: 'Download file'\n    }\n    );\n\n    // Specifying the filename with the download attribute only works for same-origin links.\n    $.on(a, 'click', ImageCommon.download);\n\n    return Menu.menu.addEntry({\n      el: a,\n      order: 100,\n      open({file}) {\n        if (!file) { return false; }\n        a.href     = file.url;\n        a.download = file.name;\n        return true;\n      }\n    });\n  }\n};\nexport default DownloadLink;\n","import { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport Menu from \"./Menu\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ReportLink = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Menu'] || !Conf['Report Link']) { return; }\n\n    const a = $.el('a', {\n      className: 'report-link',\n      href: 'javascript:;',\n      textContent: 'Report'\n    }\n    );\n    $.on(a, 'click', ReportLink.report);\n\n    return Menu.menu.addEntry({\n      el: a,\n      order: 10,\n      open(post) {\n        ReportLink.url = `//sys.${location.hostname.split('.')[1]}.org/${post.board}/imgboard.php?mode=report&no=${post}`;\n        if (d.cookie.indexOf('pass_enabled=1') >= 0) {\n          ReportLink.dims = 'width=350,height=275';\n        } else {\n          ReportLink.dims = 'width=400,height=550';\n        }\n        return true;\n      }\n    });\n  },\n\n  report() {\n    const {url, dims} = ReportLink;\n    const id  = Date.now();\n    const set = `toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,${dims}`;\n    return window.open(url, id, set);\n  }\n};\nexport default ReportLink;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar AntiAutoplay = {\n  init() {\n    if (!Conf['Disable Autoplaying Sounds']) { return; }\n    $.addClass(doc, 'anti-autoplay');\n    for (var audio of $$('audio[autoplay]', doc)) { this.stop(audio); }\n    window.addEventListener('loadstart', (e => this.stop(e.target)), true);\n    Callbacks.Post.push({\n      name: 'Disable Autoplaying Sounds',\n      cb:   this.node\n    });\n    return $.ready(() => this.process(d.body));\n  },\n\n  stop(audio) {\n    if (!audio.autoplay) { return; }\n    audio.pause();\n    audio.autoplay = false;\n    if (audio.controls) { return; }\n    audio.controls = true;\n    return $.addClass(audio, 'controls-added');\n  },\n\n  node() {\n    return AntiAutoplay.process(this.nodes.comment);\n  },\n\n  process(root) {\n    for (var iframe of $$('iframe[src*=\"youtube\"][src*=\"autoplay=1\"]', root)) {\n      AntiAutoplay.processVideo(iframe, 'src');\n    }\n    for (var object of $$('object[data*=\"youtube\"][data*=\"autoplay=1\"]', root)) {\n      AntiAutoplay.processVideo(object, 'data');\n    }\n  },\n\n  processVideo(el, attr) {\n    el[attr] = el[attr].replace(/\\?autoplay=1&?/, '?').replace('&autoplay=1', '');\n    if (window.getComputedStyle(el).display === 'none') { el.style.display = 'block'; }\n    return $.addClass(el, 'autoplay-removed');\n  }\n};\nexport default AntiAutoplay;\n","import DataBoard from \"../classes/DataBoard\";\nimport { Conf, d, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport Unread from \"../Monitoring/Unread\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Banner = {\n  init() {\n    if (Conf['Custom Board Titles']) {\n      this.db = new DataBoard('customTitles', null, true);\n    }\n\n    $.asap((() => d.body), () => $.asap((() => $('hr')), Banner.ready));\n\n    // Let 4chan's JS load the banner if enabled; otherwise, load it ourselves.\n    if (g.BOARD.ID !== 'f') {\n      return Main.ready(() => $.queueTask(Banner.load));\n    }\n  },\n\n  ready() {\n    const banner = $(\".boardBanner\");\n    const {children} = banner;\n\n    if ((g.VIEW === 'thread') && Conf['Remove Thread Excerpt']) {\n      Banner.setTitle(children[1].textContent);\n    }\n\n    children[0].title = \"Click to change\";\n    $.on(children[0], 'click', Banner.cb.toggle);\n\n    if (Conf['Custom Board Titles']) {\n      Banner.custom(children[1]);\n      if (children[2]) { return Banner.custom(children[2]); }\n    }\n  },\n\n  load() {\n    const bannerCnt = $.id('bannerCnt');\n    if (!bannerCnt.firstChild) {\n      const img = $.el('img', {\n        alt: '4chan',\n        src: '//s.4cdn.org/image/title/' + bannerCnt.dataset.src\n      }\n      );\n      return $.add(bannerCnt, img);\n    }\n  },\n\n  setTitle(title) {\n    if (Unread.title != null) {\n      Unread.title = title;\n      return Unread.update();\n    } else {\n      return d.title = title;\n    }\n  },\n\n  cb: {\n    toggle() {\n      if (!Banner.choices?.length) {\n        Banner.choices = Conf['knownBanners'].split(',').slice();\n      }\n      const i = Math.floor(Banner.choices.length * Math.random());\n      const banner = Banner.choices.splice(i, 1);\n      return $('img', this.parentNode).src = `//s.4cdn.org/image/title/${banner}`;\n    },\n\n    click(e) {\n      if (!e.ctrlKey && !e.metaKey) { return; }\n      if (Banner.original[this.className] == null) { Banner.original[this.className] = this.cloneNode(true); }\n      this.contentEditable = true;\n      for (var br of $$('br', this)) { $.replace(br, $.tn('\\n')); }\n      return this.focus();\n    },\n\n    keydown(e) {\n      e.stopPropagation();\n      if (!e.shiftKey && (e.keyCode === 13)) { return this.blur(); }\n    },\n\n    blur() {\n      for (var br of $$('br', this)) { $.replace(br, $.tn('\\n')); }\n      if (this.textContent = this.textContent.replace(/\\n*$/, '')) {\n        this.contentEditable = false;\n        return Banner.db.set({\n          boardID:  g.BOARD.ID,\n          threadID: this.className,\n          val: {\n            title: this.textContent,\n            orig:  Banner.original[this.className].textContent\n          }\n        });\n      } else {\n        $.rmAll(this);\n        $.add(this, [...Banner.original[this.className].cloneNode(true).childNodes]);\n        return Banner.db.delete({\n          boardID:  g.BOARD.ID,\n          threadID: this.className\n        });\n      }\n    }\n  },\n\n  original: dict(),\n\n  custom(child) {\n    let data;\n    const {className} = child;\n    child.title = `Ctrl/\\u2318+click to edit board ${className.slice(5).toLowerCase()}`;\n    child.spellcheck = false;\n\n    for (var event of ['click', 'keydown', 'blur']) {\n      $.on(child, event, Banner.cb[event]);\n    }\n\n    if (data = Banner.db.get({boardID: g.BOARD.ID, threadID: className})) {\n      if (Conf['Persistent Custom Board Titles'] || (data.orig === child.textContent)) {\n        Banner.original[className] = child.cloneNode(true);\n        return child.textContent = data.title;\n      } else {\n        return Banner.db.delete({boardID: g.BOARD.ID, threadID: className});\n      }\n    }\n  }\n};\nexport default Banner;\n","import { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Flash = {\n  init() {\n    if ((g.BOARD.ID === 'f') && Conf['Enable Native Flash Embedding']) {\n      return $.ready(Flash.initReady);\n    }\n  },\n\n  initReady() {\n    if ($.hasStorage) {\n      return $.global(function() { if (JSON.parse(localStorage['4chan-settings'] || '{}').disableAll) { return window.SWFEmbed.init(); } });\n    } else {\n      if (g.VIEW === 'thread') {\n        $.global(() => window.Main.tid = location.pathname.split(/\\/+/)[3]);\n      }\n      return $.global(() => window.SWFEmbed.init());\n    }\n  }\n};\nexport default Flash;\n","import Callbacks from \"../classes/Callbacks\";\nimport BoardConfig from \"../General/BoardConfig\";\nimport { d, doc, g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport ExpandComment from \"./ExpandComment\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Fourchan = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !['index', 'thread', 'archive'].includes(g.VIEW)) { return; }\n    BoardConfig.ready(this.initBoard);\n    return Main.ready(this.initReady);\n  },\n\n  initBoard() {\n    if (g.BOARD.config.code_tags) {\n      $.on(window, 'prettyprint:cb', function(e) {\n        let post, pre;\n        if (!(post = g.posts.get(e.detail.ID))) { return; }\n        if (!(pre  = $$('.prettyprint', post.nodes.comment)[+e.detail.i])) { return; }\n        if (!$.hasClass(pre, 'prettyprinted')) {\n          pre.innerHTML = e.detail.html;\n          return $.addClass(pre, 'prettyprinted');\n        }\n      });\n      $.global(() => window.addEventListener('prettyprint', e => window.dispatchEvent(new CustomEvent('prettyprint:cb', {\n        detail: {\n          ID:   e.detail.ID,\n          i:    e.detail.i,\n          html: window.prettyPrintOne(e.detail.html)\n        }\n      }))\n      , false));\n      Callbacks.Post.push({\n        name: 'Parse [code] tags',\n        cb:   Fourchan.code\n      });\n      g.posts.forEach(function(post) {\n        if (post.callbacksExecuted) {\n          return Callbacks.Post.execute(post, ['Parse [code] tags'], true);\n        }\n      });\n      ExpandComment.callbacks.push(Fourchan.code);\n    }\n\n    if (g.BOARD.config.math_tags) {\n      $.global(() => window.addEventListener('mathjax', function(e) {\n        if (window.MathJax) {\n          return window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, e.target]);\n        } else {\n          if (!document.querySelector('script[src^=\"//cdn.mathjax.org/\"]')) { // don't load MathJax if already loading\n            window.loadMathJax();\n            window.loadMathJax = function() {};\n          }\n          // 4chan only handles post comments on MathJax load; anything else (e.g. the QR preview) must be queued explicitly.\n          if (!e.target.classList.contains('postMessage')) {\n            return document.querySelector('script[src^=\"//cdn.mathjax.org/\"]').addEventListener('load', () => window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, e.target])\n            , false);\n          }\n        }\n      }\n      , false));\n      Callbacks.Post.push({\n        name: 'Parse [math] tags',\n        cb:   Fourchan.math\n      });\n      g.posts.forEach(function(post) {\n        if (post.callbacksExecuted) {\n          return Callbacks.Post.execute(post, ['Parse [math] tags'], true);\n        }\n      });\n      return ExpandComment.callbacks.push(Fourchan.math);\n    }\n  },\n\n  // Disable 4chan's ID highlighting (replaced by IDHighlight) and reported post hiding.\n  initReady() {\n    return $.global(function() {\n      window.clickable_ids = false;\n      for (var node of document.querySelectorAll('.posteruid, .capcode')) {\n        node.removeEventListener('click', window.idClick, false);\n      }\n    });\n  },\n\n  code() {\n    if (this.isClone) { return; }\n    return $.ready(() => {\n      const iterable = $$('.prettyprint', this.nodes.comment);\n      for (let i = 0; i < iterable.length; i++) {\n        var pre = iterable[i];\n        if (!$.hasClass(pre, 'prettyprinted')) {\n          $.event('prettyprint', {ID: this.fullID, i, html: pre.innerHTML}, window);\n        }\n      }\n    });\n  },\n\n  math() {\n    let wbrs;\n    if (!/\\[(math|eqn)\\]/.test(this.nodes.comment.textContent)) { return; }\n    // XXX <wbr> tags frequently break MathJax; remove them.\n    if ((wbrs = $$('wbr', this.nodes.comment)).length) {\n      for (var wbr of wbrs) { $.rm(wbr); }\n      this.nodes.comment.normalize();\n    }\n    var cb = () => {\n      if (!doc.contains(this.nodes.comment)) { return; }\n      $.off(d, 'PostsInserted', cb);\n      return $.event('mathjax', null, this.nodes.comment);\n    };\n    $.on(d, 'PostsInserted', cb);\n    return cb();\n  }\n};\nexport default Fourchan;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar IDColor = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Color User IDs']) { return; }\n    this.ids = dict();\n    this.ids['Heaven'] = [0, 0, 0, '#fff'];\n\n    return Callbacks.Post.push({\n      name: 'Color User IDs',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    let span, uid;\n    if (this.isClone || !((uid = this.info.uniqueID) && (span = this.nodes.uniqueID))) { return; }\n\n    const rgb = IDColor.ids[uid] || IDColor.compute(uid);\n\n    // Style the damn node.\n    const {style} = span;\n    style.color = rgb[3];\n    style.backgroundColor = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;\n    return $.addClass(span, 'painted');\n  },\n\n  compute(uid) {\n    // Convert chars to integers, bitshift and math to create a larger integer\n    // Create a nice string of binary\n    const hash = g.SITE.uidColor ? g.SITE.uidColor(uid) : parseInt(uid, 16);\n\n    // Convert binary string to numerical values with bitshift and '&' truncation.\n    const rgb = [\n      (hash >> 16) & 0xFF,\n      (hash >> 8)  & 0xFF,\n      hash & 0xFF\n    ];\n\n    // Weight color luminance values, assign a font color that should be readable. \n    rgb.push($.luma(rgb) > 125 ?\n      '#000'\n    :\n      '#fff'\n    );\n\n    // Cache.\n    return this.ids[uid] = rgb;\n  }\n};\nexport default IDColor;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar IDHighlight = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW)) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Highlight by User ID',\n      cb:   this.node\n    });\n  },\n\n  uniqueID: null,\n\n  node() {\n    if (this.nodes.uniqueIDRoot) { $.on(this.nodes.uniqueIDRoot, 'click', IDHighlight.click(this)); }\n    if (this.nodes.capcode) { $.on(this.nodes.capcode,      'click', IDHighlight.click(this)); }\n    if (!this.isClone) { return IDHighlight.set(this); }\n  },\n\n  set(post) {\n    const match = (post.info.uniqueID || post.info.capcode) === IDHighlight.uniqueID;\n    return $[match ? 'addClass' : 'rmClass'](post.nodes.post, 'highlight');\n  },\n\n  click(post) { return function() {\n    const uniqueID = post.info.uniqueID || post.info.capcode;\n    IDHighlight.uniqueID = IDHighlight.uniqueID === uniqueID ? null : uniqueID;\n    return g.posts.forEach(IDHighlight.set);\n  }; }\n};\nexport default IDHighlight;\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar IDPostCount = {\n  init() {\n    if ((g.VIEW !== 'thread') || !Conf['Count Posts by ID']) { return; }\n    Callbacks.Thread.push({\n      name: 'Count Posts by ID',\n      cb() { return IDPostCount.thread = this; }\n    });\n    return Callbacks.Post.push({\n      name: 'Count Posts by ID',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.nodes.uniqueID && (this.thread === IDPostCount.thread)) {\n      return $.on(this.nodes.uniqueID, 'mouseover', IDPostCount.count);\n    }\n  },\n\n  count() {\n    const {uniqueID} = Get.postFromNode(this).info;\n    let n = 0;\n    IDPostCount.thread.posts.forEach(function(post) {\n      if (post.info.uniqueID === uniqueID) { return n++; }\n    });\n    return this.title = `${n} post${n === 1 ? '' : 's'} by this ID`;\n  }\n};\nexport default IDPostCount;\n","import $ from \"../platform/$\";\nimport Callbacks from \"../classes/Callbacks\";\nimport { g } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ModContact = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !['index', 'thread'].includes(g.VIEW)) { return; }\n    return Callbacks.Post.push({\n      name: 'Mod Contact Links',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    let moved;\n    if (this.isClone || !$.hasOwn(ModContact.specific, this.info.capcode)) { return; }\n    const links = $.el('span', {className: 'contact-links brackets-wrap'});\n    $.extend(links, ModContact.template(this.info.capcode));\n    $.after(this.nodes.capcode, links);\n    if ((moved = this.info.comment.match(/This thread was moved to >>>\\/(\\w+)\\//)) && $.hasOwn(ModContact.moveNote, moved[1])) {\n      const moveNote = $.el('div', {className: 'move-note'});\n      $.extend(moveNote, ModContact.moveNote[moved[1]]);\n      return $.add(this.nodes.post, moveNote);\n    }\n  },\n\n  template(capcode) {\n    return {innerHTML: \"<a href=\\\"https://www.4chan.org/feedback\\\" target=\\\"_blank\\\">feedback</a>\" + (ModContact.specific[capcode]()).innerHTML};\n  },\n\n  specific: {\n    Mod() { return {innerHTML: \" <a href=\\\"https://www.4chan-x.net/4chan-irc.html\\\" target=\\\"_blank\\\">IRC</a>\"}; },\n    Manager() { return ModContact.specific.Mod(); },\n    Developer() { return {innerHTML: \" <a href=\\\"https://github.com/4chan\\\" target=\\\"_blank\\\">github</a>\"}; },\n    Admin() { return {innerHTML: \" <a href=\\\"https://twitter.com/hiroyuki_ni\\\" target=\\\"_blank\\\">twitter</a>\"}; }\n  },\n\n  moveNote: {\n    qa: {innerHTML: \"Moving a thread to /qa/ does not imply mods will read it. If you wish to contact mods, use <a href=\\\"https://www.4chan.org/feedback\\\" target=\\\"_blank\\\">feedback</a><span class=\\\"invisible\\\"> (https://www.4chan.org/feedback)</span> or <a href=\\\"https://www.4chan-x.net/4chan-irc.html\\\" target=\\\"_blank\\\">IRC</a><span class=\\\"invisible\\\"> (https://www.4chan-x.net/4chan-irc.html)</span>.\"}\n  }\n};\nexport default ModContact;\n","import { Conf, g } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst NormalizeURL = {\n  init() {\n    if (!Conf['Normalize URL']) { return; }\n\n    let pathname = location.pathname.split(/\\/+/);\n    if (g.SITE.software === 'yotsuba') {\n      switch (g.VIEW) {\n        case 'thread':\n          pathname[2] = 'thread';\n          pathname = pathname.slice(0, 4);\n          break;\n        case 'index':\n          pathname = pathname.slice(0, 3);\n          break;\n      }\n    }\n    pathname = pathname.join('/');\n    if (location.pathname !== pathname) {\n      return history.replaceState(history.state, '', `${location.protocol}//${location.host}${pathname}${location.hash}`);\n    }\n  }\n};\nexport default NormalizeURL;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, g, E } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar PostJumper = { \n  init() {\n    if (!Conf['Unique ID and Capcode Navigation'] || !['index', 'thread'].includes(g.VIEW)) { return; }\n\n    this.buttons = this.makeButtons();\n\n    return Callbacks.Post.push({\n      name: 'Post Jumper',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) {\n      for (var buttons of $$('.postJumper', this.nodes.info)) {\n        PostJumper.addListeners(buttons);\n      }\n      return;\n    }\n\n    if (this.nodes.uniqueIDRoot) {\n      PostJumper.addButtons(this,'uniqueID');\n    }\n\n    if (this.nodes.capcode) {\n      return PostJumper.addButtons(this,'capcode');\n    }\n  },\n\n  addButtons(post,type) {\n    const value = post.info[type];\n    const buttons = PostJumper.buttons.cloneNode(true);\n    $.extend(buttons.dataset, {type, value});\n    $.after(post.nodes[type+(type === 'capcode' ? '' : 'Root')], buttons);\n    return PostJumper.addListeners(buttons);\n  },\n\n  addListeners(buttons) {\n    $.on(buttons.firstChild, 'click', PostJumper.buttonClick);\n    return $.on(buttons.lastChild, 'click', PostJumper.buttonClick);\n  },\n\n  buttonClick() {\n    let toJumper;\n    const dir = $.hasClass(this, 'prev') ? -1 : 1;\n    if (toJumper = PostJumper.find(this.parentNode, dir)) {\n      return PostJumper.scroll(this.parentNode, toJumper);\n    }\n  },\n\n  find(jumper, dir) {\n    const {type, value} = jumper.dataset;\n    const xpath = `span[contains(@class,\\\"postJumper\\\") and @data-value=\\\"${value}\\\" and @data-type=\\\"${type}\\\"]`;\n    const axis = dir < 0 ? 'preceding' : 'following';\n    let jumper2 = jumper;\n    while (jumper2 = $.x(`${axis}::${xpath}`, jumper2)) {\n      if (jumper2.getBoundingClientRect().height) { return jumper2; }\n    }\n    if (jumper2 = $.x(`(//${xpath})[${dir < 0 ? 'last()' : '1'}]`)) {\n      if (jumper2.getBoundingClientRect().height) { return jumper2; }\n    }\n    while ((jumper2 = $.x(`${axis}::${xpath}`, jumper2)) && (jumper2 !== jumper)) {\n      if (jumper2.getBoundingClientRect().height) { return jumper2; }\n    }\n    return null;\n  },\n\n  makeButtons() {\n    const charPrev = '\\u23EB';\n    const charNext = '\\u23EC';\n    const classPrev = 'prev';\n    const classNext = 'next';\n    const span = $.el('span',\n      {className: 'postJumper'});\n    $.extend(span, {innerHTML: \"<a href=\\\"javascript:;\\\" class=\\\"\" + E(classPrev) + \"\\\">\" + E(charPrev) + \"</a><a href=\\\"javascript:;\\\" class=\\\"\" + E(classNext) + \"\\\">\" + E(charNext) + \"</a>\"});\n    return span;\n  },\n\n  scroll(fromJumper, toJumper) {\n    const prevPos = fromJumper.getBoundingClientRect().top;\n    const destPos = toJumper.getBoundingClientRect().top;\n    return window.scrollBy(0, destPos-prevPos);\n  }\n};\nexport default PostJumper;\n","import Notice from \"../classes/Notice\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PSA = {\n  init() {\n    let el;\n    if ((g.SITE.software === 'yotsuba') && (g.BOARD.ID === 'qa')) {\n      const announcement = {innerHTML: \"Stay in touch with your <a href=\\\"https://www.4chan-x.net/qa_friends.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">/qa/ friends</a>!\"};\n      el = $.el('div', {className: 'fcx-announcement'}, announcement);\n      $.onExists(doc, '.boardBanner', banner => $.after(banner, el));\n    }\n    if ('samachan.org' in Conf['siteProperties'] && !Conf['PSAseen'].includes('samachan')) {\n      el = $.el('span',\n        {innerHTML: \"<a href=\\\"https://sushigirl.us/yakuza/res/776.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Looking for a new home?<br>Some former Samachan users are regrouping on SushiChan.</a><br>(a message from 4chan X)\"});\n      return Main.ready(function() {\n        new Notice('info', el);\n        Conf['PSAseen'].push('samachan');\n        return $.set('PSAseen', Conf['PSAseen']);});\n    }\n  }\n};\nexport default PSA;\n","import Header from \"../General/Header\";\nimport { Conf, doc, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar PSAHiding = {\n  init() {\n    if (!Conf['Announcement Hiding'] || !g.SITE.selectors.psa) { return; }\n    $.addClass(doc, 'hide-announcement');\n    $.onExists(doc, g.SITE.selectors.psa, this.setup);\n    return $.ready(function() {\n      if (!$(g.SITE.selectors.psa)) { return $.rmClass(doc, 'hide-announcement'); }\n    });\n  },\n\n  setup(psa) {\n    let btn, hr;\n    PSAHiding.psa = psa;\n    PSAHiding.text = psa.dataset.utc ?? psa.innerHTML;\n    if (g.SITE.selectors.psaTop && (hr = $(g.SITE.selectors.psaTop)?.previousElementSibling) && (hr.nodeName === 'HR')) {\n      PSAHiding.hr = hr;\n    }\n    PSAHiding.content = $.el('div');\n\n    const entry = {\n      el: $.el('a', {\n        textContent: 'Show announcement',\n        className: 'show-announcement',\n        href: 'javascript:;'\n      }\n      ),\n      order: 50,\n      open() { return psa.hidden; }\n    };\n    Header.menu.addEntry(entry);\n    $.on(entry.el, 'click', PSAHiding.toggle);\n\n    PSAHiding.btn = (btn = $.el('a', {\n      title:       'Mark announcement as read and hide.',\n      className:   'hide-announcement-button',\n      href:        'javascript:;',\n      textContent: '',\n    }\n    ));\n    $.on(btn, 'click', PSAHiding.toggle);\n    if (psa.firstChild?.tagName === 'HR') {\n      $.after(psa.firstChild, btn);\n    } else {\n      $.prepend(psa, btn);\n    }\n\n    PSAHiding.sync(Conf['hiddenPSAList']);\n    $.rmClass(doc, 'hide-announcement');\n\n    return $.sync('hiddenPSAList', PSAHiding.sync);\n  },\n\n  toggle() {\n    const hide = $.hasClass(this, 'hide-announcement-button');\n    const set = function(hiddenPSAList) {\n      if (hide) {\n        return hiddenPSAList[g.SITE.ID] = PSAHiding.text;\n      } else {\n        return delete hiddenPSAList[g.SITE.ID];\n      }\n    };\n    set(Conf['hiddenPSAList']);\n    PSAHiding.sync(Conf['hiddenPSAList']);\n    return $.get('hiddenPSAList', Conf['hiddenPSAList'], function({hiddenPSAList}) {\n      set(hiddenPSAList);\n      return $.set('hiddenPSAList', hiddenPSAList);\n    });\n  },\n\n  sync(hiddenPSAList) {\n    const {psa, content} = PSAHiding;\n    psa.hidden = (hiddenPSAList[g.SITE.ID] === PSAHiding.text);\n    // Remove content to prevent autoplaying sounds from hidden announcements\n    if (psa.hidden) {\n      $.add(content, [...psa.childNodes]);\n    } else {\n      $.add(psa, [...content.childNodes]);\n    }\n    if (PSAHiding.hr) PSAHiding.hr.hidden = psa.hidden;\n  }\n};\nexport default PSAHiding;\n","import Callbacks from \"../classes/Callbacks\";\nimport { Conf, doc, g } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar RemoveSpoilers = {\n  init() {\n    if (Conf['Reveal Spoilers']) {\n      $.addClass(doc, 'reveal-spoilers');\n    }\n\n    if (!Conf['Remove Spoilers']) { return; }\n\n    Callbacks.Post.push({\n      name: 'Reveal Spoilers',\n      cb:   this.node\n    });\n\n    if (g.VIEW === 'archive') {\n      return $.ready(() => RemoveSpoilers.unspoiler($.id('arc-list')));\n    }\n  },\n\n  node() {\n    return RemoveSpoilers.unspoiler(this.nodes.comment);\n  },\n\n  unspoiler(el) {\n    const spoilers = $$(g.SITE.selectors.spoiler, el);\n    for (var spoiler of spoilers) {\n      var span = $.el('span', {className: 'removed-spoiler'});\n      $.replace(spoiler, span);\n      $.add(span, [...spoiler.childNodes]);\n    }\n  }\n};\nexport default RemoveSpoilers;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf } from \"../globals/globals\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ThreadLinks = {\n  init() {\n    if ((g.VIEW !== 'index') || !Conf['Open Threads in New Tab']) { return; }\n\n    Callbacks.Post.push({\n      name: 'Thread Links',\n      cb:   this.node\n    });\n    return Callbacks.CatalogThread.push({\n      name: 'Thread Links',\n      cb:   this.catalogNode\n    });\n  },\n\n  node() {\n    if (this.isReply || this.isClone) { return; }\n    return ThreadLinks.process(this.nodes.reply);\n  },\n\n  catalogNode() {\n    return ThreadLinks.process(this.nodes.thumb.parentNode);\n  },\n\n  process(link) {\n    return link.target = '_blank';\n  }\n};\nexport default ThreadLinks;\n","import { g } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst Tinyboard = {\n  init() {\n    if (g.SITE.software !== 'tinyboard') { return; }\n    if (g.VIEW === 'thread') {\n      return Main.ready(() => $.global(function() {\n        let base;\n        let {boardID, threadID} = document.currentScript.dataset;\n        threadID = +threadID;\n        const form = document.querySelector('form[name=\"post\"]');\n        window.$(document).ajaxComplete(function(event, request, settings) {\n          let postID;\n          if (settings.url !== form.action) { return; }\n          if (!(postID = +request.responseJSON?.id)) { return; }\n          const detail = {boardID, threadID, postID};\n          try {\n            const {redirect, noko} = request.responseJSON;\n            if (redirect && (originalNoko != null) && !originalNoko && !noko) {\n              detail.redirect = redirect;\n            }\n          } catch (error) {}\n          event = new CustomEvent('QRPostSuccessful', {bubbles: true, detail});\n          return document.dispatchEvent(event);\n        });\n        var originalNoko = window.tb_settings?.ajax?.always_noko_replies;\n        return (((base = window.tb_settings || (window.tb_settings = {}))).ajax || (base.ajax = {})).always_noko_replies = true;\n      }\n      , {boardID: g.BOARD.ID, threadID: g.THREADID}));\n    }\n  }\n};\nexport default Tinyboard;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar MarkNewIPs = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || (g.VIEW !== 'thread') || !Conf['Mark New IPs']) { return; }\n    return Callbacks.Thread.push({\n      name: 'Mark New IPs',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    MarkNewIPs.ipCount = this.ipCount;\n    MarkNewIPs.postCount = this.posts.keys.length;\n    return $.on(d, 'ThreadUpdate', MarkNewIPs.onUpdate);\n  },\n\n  onUpdate(e) {\n    let fullID;\n    const {ipCount, postCount, newPosts, deletedPosts} = e.detail;\n    if (ipCount == null) { return; }\n\n    switch (ipCount - MarkNewIPs.ipCount) {\n      case (postCount - MarkNewIPs.postCount) + deletedPosts.length:\n        var i = MarkNewIPs.ipCount;\n        for (fullID of newPosts) {\n          MarkNewIPs.markNew(g.posts.get(fullID), ++i);\n        }\n        break;\n      case -deletedPosts.length:\n        for (fullID of newPosts) {\n          MarkNewIPs.markOld(g.posts.get(fullID));\n        }\n        break;\n    }\n    MarkNewIPs.ipCount = ipCount;\n    return MarkNewIPs.postCount = postCount;\n  },\n\n  markNew(post, ipCount) {\n    const suffix = ((Math.floor(ipCount / 10)) % 10) === 1 ?\n      'th'\n    :\n      ['st', 'nd', 'rd'][(ipCount % 10) - 1] || 'th'; // fuck switches\n    const counter = $.el('span', {\n      className: 'ip-counter',\n      textContent: `(${ipCount})`\n    }\n    );\n    post.nodes.nameBlock.title = `This is the ${ipCount}${suffix} IP in the thread.`;\n    $.add(post.nodes.nameBlock, [$.tn(' '), counter]);\n    return $.addClass(post.nodes.root, 'new-ip');\n  },\n\n  markOld(post) {\n    post.nodes.nameBlock.title = 'Not the first post from this IP.';\n    return $.addClass(post.nodes.root, 'old-ip');\n  }\n};\nexport default MarkNewIPs;\n","import Callbacks from \"../classes/Callbacks\";\nimport Header from \"../General/Header\";\nimport UI from \"../General/UI\";\nimport { g, Conf, E, doc, d } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { MINUTE, SECOND } from \"../platform/helpers\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar ThreadStats = {\n  postCount: 0,\n  fileCount: 0,\n  postIndex: 0,\n\n  init() {\n    let sc;\n    if ((g.VIEW !== 'thread') || !Conf['Thread Stats']) { return; }\n\n    if (Conf['Page Count in Stats']) {\n      this[g.SITE.isPrunedByAge?.(g.BOARD) ? 'showPurgePos' : 'showPage'] = true;\n    }\n\n    const statsHTML = {innerHTML: \"<span id=\\\"post-count\\\">?</span> / <span id=\\\"file-count\\\">?</span>\" + ((Conf[\"IP Count in Stats\"] && g.SITE.hasIPCount) ? \" / <span id=\\\"ip-count\\\">?</span>\" : \"\") + ((Conf[\"Page Count in Stats\"]) ? \" / <span id=\\\"page-count\\\">?</span>\" : \"\")};\n    let statsTitle = 'Posts / Files';\n    if (Conf['IP Count in Stats'] && g.SITE.hasIPCount) { statsTitle += ' / IPs'; }\n    if (Conf['Page Count in Stats']) { statsTitle += (this.showPurgePos ? ' / Purge Position' : ' / Page'); }\n\n    if (Conf['Updater and Stats in Header']) {\n      this.dialog = (sc = $.el('span', {\n        id:    'thread-stats',\n        title: statsTitle\n      }\n      ));\n      $.extend(sc, statsHTML);\n      Header.addShortcut('stats', sc, 200);\n\n    } else {\n      this.dialog = (sc = UI.dialog('thread-stats',\n        {innerHTML: \"<div class=\\\"move\\\" title=\\\"\" + E(statsTitle) + \"\\\">\" + (statsHTML).innerHTML + \"</div>\"}));\n      $.addClass(doc, 'float');\n      $.ready(() => $.add(d.body, sc));\n    }\n\n    this.postCountEl = $('#post-count', sc);\n    this.fileCountEl = $('#file-count', sc);\n    this.ipCountEl   = $('#ip-count',   sc);\n    this.pageCountEl = $('#page-count', sc);\n\n    if (this.pageCountEl) { $.on(this.pageCountEl, 'click', ThreadStats.fetchPage); }\n\n    return Callbacks.Thread.push({\n      name: 'Thread Stats',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    ThreadStats.thread = this;\n    ThreadStats.count();\n    ThreadStats.update();\n    ThreadStats.fetchPage();\n    $.on(d, 'PostsInserted', () => $.queueTask(ThreadStats.onPostsInserted));\n    return $.on(d, 'ThreadUpdate', ThreadStats.onUpdate);\n  },\n\n  count() {\n    const {posts} = ThreadStats.thread;\n    const n = posts.keys.length;\n    for (let i = ThreadStats.postIndex, end = n; i < end; i++) {\n      var post = posts.get(posts.keys[i]);\n      if (!post.isFetchedQuote) {\n        ThreadStats.postCount++;\n        ThreadStats.fileCount += post.files.length;\n      }\n    }\n    return ThreadStats.postIndex = n;\n  },\n\n  onUpdate(e) {\n    if (e.detail[404]) { return; }\n    const {postCount, fileCount} = e.detail;\n    $.extend(ThreadStats, {postCount, fileCount});\n    ThreadStats.postIndex = ThreadStats.thread.posts.keys.length;\n    ThreadStats.update();\n    if (ThreadStats.showPage && (ThreadStats.pageCountEl.textContent !== '1')) {\n      return ThreadStats.fetchPage();\n    }\n  },\n\n  onPostsInserted() {\n    if (ThreadStats.thread.posts.keys.length <= ThreadStats.postIndex) { return; }\n    ThreadStats.count();\n    ThreadStats.update();\n    if (ThreadStats.showPage && (ThreadStats.pageCountEl.textContent !== '1')) {\n      return ThreadStats.fetchPage();\n    }\n  },\n\n  update() {\n    const {thread, postCountEl, fileCountEl, ipCountEl} = ThreadStats;\n    postCountEl.textContent = ThreadStats.postCount;\n    fileCountEl.textContent = ThreadStats.fileCount;\n    // TOTO check if ipCountEl exists\n    ipCountEl.textContent  = thread.ipCount ?? '?';\n    postCountEl.classList.toggle('warning', (thread.postLimit && !thread.isSticky));\n    return fileCountEl.classList.toggle('warning', (thread.fileLimit && !thread.isSticky));\n  },\n\n  fetchPage() {\n    if (!ThreadStats.pageCountEl) { return; }\n    clearTimeout(ThreadStats.timeout);\n    if (ThreadStats.thread.isDead) {\n      ThreadStats.pageCountEl.textContent = 'Dead';\n      $.addClass(ThreadStats.pageCountEl, 'warning');\n      return;\n    }\n    ThreadStats.timeout = setTimeout(ThreadStats.fetchPage, 2 * MINUTE);\n    return $.whenModified(\n      g.SITE.urls.threadsListJSON(ThreadStats.thread),\n      'ThreadStats',\n      ThreadStats.onThreadsLoad\n    );\n  },\n\n  onThreadsLoad() {\n    if (this.status === 200) {\n      let page, thread;\n      if (ThreadStats.showPurgePos) {\n        let purgePos = 1;\n        for (page of this.response) {\n          for (thread of page.threads) {\n            if (thread.no < ThreadStats.thread.ID) {\n              purgePos++;\n            }\n          }\n        }\n        ThreadStats.pageCountEl.textContent = purgePos;\n        return ThreadStats.pageCountEl.classList.toggle('warning', (purgePos === 1));\n      } else {\n        let nThreads;\n        let i = (nThreads = 0);\n        for (page of this.response) {\n          nThreads += page.threads.length;\n        }\n        for (let pageNum = 0; pageNum < this.response.length; pageNum++) {\n          page = this.response[pageNum];\n          for (thread of page.threads) {\n            if (thread.no === ThreadStats.thread.ID) {\n              ThreadStats.pageCountEl.textContent = pageNum + 1;\n              ThreadStats.pageCountEl.classList.toggle('warning', (i >= (nThreads - this.response[0].threads.length)));\n              ThreadStats.lastPageUpdate = new Date(thread.last_modified * SECOND);\n              ThreadStats.retry();\n              return;\n            }\n            i++;\n          }\n        }\n      }\n    } else if (this.status === 304) {\n      return ThreadStats.retry();\n    }\n  },\n\n  retry() {\n    // If thread data is stale (modification date given < time of last post), try again.\n    // Skip this on vichan sites due to sage posts not updating modification time in threads.json.\n    if (\n      !ThreadStats.showPage ||\n      (ThreadStats.pageCountEl.textContent === '1') ||\n      !!g.SITE.threadModTimeIgnoresSage ||\n      (ThreadStats.thread.posts.get(ThreadStats.thread.lastPost).info.date <= ThreadStats.lastPageUpdate)\n    ) { return; }\n    clearTimeout(ThreadStats.timeout);\n    return ThreadStats.timeout = setTimeout(ThreadStats.fetchPage, 5 * SECOND);\n  }\n};\nexport default ThreadStats;\n","import { g, Conf } from \"../globals/globals\";\nimport Main from \"../main/Main\";\nimport $ from \"../platform/$\";\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst PassLink = {\n  init() {\n    if ((g.SITE.software !== 'yotsuba') || !Conf['Pass Link']) { return; }\n    return Main.ready(this.ready);\n  },\n\n  ready() {\n    let styleSelector;\n    if (!(styleSelector = $.id('styleSelector'))) { return; }\n\n    const passLink = $.el('span',\n      {className: 'brackets-wrap pass-link-container'});\n    $.extend(passLink, {innerHTML: \"<a href=\\\"javascript:;\\\">4chan Pass</a>\"});\n    $.on(passLink.firstElementChild, 'click', () => window.open(`//sys.${location.hostname.split('.')[1]}.org/auth`,\n      Date.now(),\n      'width=500,height=280,toolbar=0'));\n    return $.before(styleSelector.previousSibling, [passLink, $.tn('\\u00A0\\u00A0')]);\n  }\n};\nexport default PassLink;\n","import Callbacks from \"../classes/Callbacks\";\nimport Fetcher from \"../classes/Fetcher\";\nimport Get from \"../General/Get\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport Unread from \"../Monitoring/Unread\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteInline = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Quote Inlining']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    return Callbacks.Post.push({\n      name: 'Quote Inlining',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    const {process} = QuoteInline;\n    const {isClone} = this;\n    for (var link of this.nodes.quotelinks.concat([...this.nodes.backlinks], this.nodes.archivelinks)) {\n      process(link, isClone);\n    }\n  },\n\n  process(link, clone) {\n    if (Conf['Quote Hash Navigation']) {\n      if (!clone) { $.after(link, QuoteInline.qiQuote(link, $.hasClass(link, 'filtered'))); }\n    }\n    return $.on(link, 'click', QuoteInline.toggle);\n  },\n\n  qiQuote(link, hidden) {\n    let name = \"hashlink\";\n    if (hidden) { name += \" filtered\"; }\n    return $.el('a', {\n      className: name,\n      textContent: '#',\n      href: link.href\n    }\n    );\n  },\n\n  toggle(e) {\n    if ($.modifiedClick(e)) { return; }\n\n    const {boardID, threadID, postID} = Get.postDataFromLink(this);\n    if (Conf['Inline Cross-thread Quotes Only'] && (g.VIEW === 'thread') && g.posts.get(`${boardID}.${postID}`)?.nodes.root.offsetParent) { return; } // exists and not hidden\n    if ($.hasClass(doc, 'catalog-mode')) { return; }\n\n    e.preventDefault();\n    const quoter = Get.postFromNode(this);\n    const {context} = quoter;\n    if ($.hasClass(this, 'inlined')) {\n      QuoteInline.rm(this, boardID, threadID, postID, context);\n    } else {\n      if ($.x(`ancestor::div[@data-full-i-d='${boardID}.${postID}']`, this)) { return; }\n      QuoteInline.add(this, boardID, threadID, postID, context, quoter);\n    }\n    return this.classList.toggle('inlined');\n  },\n\n  findRoot(quotelink, isBacklink) {\n    if (isBacklink) {\n      return $.x('ancestor::*[parent::*[contains(@class,\"post\")]][1]', quotelink);\n    } else {\n      return $.x('ancestor-or-self::*[parent::blockquote][1]', quotelink);\n    }\n  },\n\n  add(quotelink, boardID, threadID, postID, context, quoter) {\n    let post;\n    const isBacklink = $.hasClass(quotelink, 'backlink');\n    const inline = $.el('div',\n      {className: 'inline'});\n    inline.dataset.fullID = `${boardID}.${postID}`;\n    const root = QuoteInline.findRoot(quotelink, isBacklink);\n    $.after(root, inline);\n\n    const qroot = $.x('ancestor::*[contains(@class,\"postContainer\")][1]', root);\n\n    $.addClass(qroot, 'hasInline');\n    new Fetcher(boardID, threadID, postID, inline, quoter);\n\n    if (!(\n      (post = g.posts.get(`${boardID}.${postID}`)) &&\n      (context.thread === post.thread)\n    )) { return; }\n\n    // Hide forward post if it's a backlink of a post in this thread.\n    // Will only unhide if there's no inlined backlinks of it anymore.\n    if (isBacklink && Conf['Forward Hiding']) {\n      $.addClass(post.nodes.root, 'forwarded');\n      post.forwarded++ || (post.forwarded = 1);\n    }\n\n    // Decrease the unread count if this post\n    // is in the array of unread posts.\n    if (!Unread.posts) { return; }\n    return Unread.readSinglePost(post);\n  },\n\n  rm(quotelink, boardID, threadID, postID, context) {\n    let el;\n    let inlined;\n    const isBacklink = $.hasClass(quotelink, 'backlink');\n    // Select the corresponding inlined quote, and remove it.\n    let root = QuoteInline.findRoot(quotelink, isBacklink);\n    root = $.x(`following-sibling::div[@data-full-i-d='${boardID}.${postID}'][1]`, root);\n    const qroot = $.x('ancestor::*[contains(@class,\"postContainer\")][1]', root);\n    const {parentNode} = root;\n    $.rm(root);\n    $.event('PostsRemoved', null, parentNode);\n\n    if (!$('.inline', qroot)) {\n      $.rmClass(qroot, 'hasInline');\n    }\n\n    // Stop if it only contains text.\n    if (!(el = root.firstElementChild)) { return; }\n\n    // Dereference clone.\n    const post = g.posts.get(`${boardID}.${postID}`);\n    post.rmClone(el.dataset.clone);\n\n    // Decrease forward count and unhide.\n    if (Conf['Forward Hiding'] &&\n      isBacklink &&\n      (context.thread === g.threads.get(`${boardID}.${threadID}`)) &&\n      !--post.forwarded) {\n        delete post.forwarded;\n        $.rmClass(post.nodes.root, 'forwarded');\n      }\n\n    // Repeat.\n    while ((inlined = $('.inlined', el))) {\n      ({boardID, threadID, postID} = Get.postDataFromLink(inlined));\n      QuoteInline.rm(inlined, boardID, threadID, postID, context);\n      $.rmClass(inlined, 'inlined');\n    }\n  }\n};\nexport default QuoteInline;\n","import Callbacks from \"../classes/Callbacks\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport $ from \"../platform/$\";\nimport { dict } from \"../platform/helpers\";\nimport QuoteInline from \"./QuoteInline\";\nimport QuotePreview from \"./QuotePreview\";\nimport QuoteYou from \"./QuoteYou\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteBacklink = {\n  // Backlinks appending need to work for:\n  //  - previous, same, and following posts.\n  //  - existing and yet-to-exist posts.\n  //  - newly fetched posts.\n  //  - in copies.\n  // XXX what about order for fetched posts?\n  //\n  // First callback creates backlinks and add them to relevant containers.\n  // Second callback adds relevant containers into posts.\n  // This is is so that fetched posts can get their backlinks,\n  // and that as much backlinks are appended in the background as possible.\n  containers: dict(),\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Quote Backlinks']) { return; }\n\n    // Add a class to differentiate when backlinks are at\n    // the top (default) or bottom of a post\n    if (this.bottomBacklinks = Conf['Bottom Backlinks']) {\n      $.addClass(doc, 'bottom-backlinks');\n    }\n\n    Callbacks.Post.push({\n      name: 'Quote Backlinking Part 1',\n      cb:   this.firstNode\n    });\n    return Callbacks.Post.push({\n      name: 'Quote Backlinking Part 2',\n      cb:   this.secondNode\n    });\n  },\n  firstNode() {\n    if (this.isClone || !this.quotes.length || this.isRebuilt) { return; }\n    const markYours = Conf['Mark Quotes of You'] && QuoteYou.isYou(this);\n    const a = $.el('a', {\n      href: g.SITE.Build.postURL(this.board.ID, this.thread.ID, this.ID),\n      className: this.isHidden ? 'filtered backlink' : 'backlink',\n      textContent: Conf['backlink'].replace(/%(?:id|%)/g, x => ({'%id': this.ID, '%%': '%'})[x])\n    }\n    );\n    if (markYours) { $.add(a, QuoteYou.mark.cloneNode(true)); }\n    for (var quote of this.quotes) {\n      var post;\n      var containers = [QuoteBacklink.getContainer(quote)];\n      if ((post = g.posts.get(quote)) && post.nodes.backlinkContainer) {\n        // Don't add OP clones when OP Backlinks is disabled,\n        // as the clones won't have the backlink containers.\n        for (var clone of post.clones) {\n          containers.push(clone.nodes.backlinkContainer);\n        }\n      }\n      for (var container of containers) {\n        var link = a.cloneNode(true);\n        var nodes = container.firstChild ? [$.tn(' '), link] : [link];\n        if (Conf['Quote Previewing']) {\n          $.on(link, 'mouseover', QuotePreview.mouseover);\n        }\n        if (Conf['Quote Inlining']) {\n          $.on(link, 'click', QuoteInline.toggle);\n          if (Conf['Quote Hash Navigation']) {\n            var hash = QuoteInline.qiQuote(link, $.hasClass(link, 'filtered'));\n            nodes.push(hash);\n          }\n        }\n        $.add(container, nodes);\n      }\n    }\n  },\n  secondNode() {\n    if (this.isClone && (this.origin.isReply || Conf['OP Backlinks'])) {\n      this.nodes.backlinkContainer = $('.container', this.nodes.post);\n      return;\n    }\n    // Don't backlink the OP.\n    if (!this.isReply && !Conf['OP Backlinks']) { return; }\n    const container = QuoteBacklink.getContainer(this.fullID);\n    this.nodes.backlinkContainer = container;\n    if (QuoteBacklink.bottomBacklinks) {\n      return $.add(this.nodes.post, container);\n    } else {\n      return $.add(this.nodes.info, container);\n    }\n  },\n  getContainer(id) {\n    return this.containers[id] ||\n      (this.containers[id] = $.el('span', {className: 'container'}));\n  }\n};\nexport default QuoteBacklink;\n","import $ from \"../platform/$\";\nimport Callbacks from \"../classes/Callbacks\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport { g, Conf } from \"../globals/globals\";\nimport Get from \"../General/Get\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteCT = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Mark Cross-thread Quotes']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    // \\u00A0 is nbsp\n    this.mark = $.el('span', {\n      textContent: '\\u00A0(Cross-thread)',\n      className:   'qmark-ct'\n    }\n    );\n    return Callbacks.Post.push({\n      name: 'Mark Cross-thread Quotes',\n      cb:   this.node\n    });\n  },\n  node() {\n    // Stop there if it's a clone of a post in the same thread.\n    if (this.isClone && (this.thread === this.context.thread)) { return; }\n\n    const {board, thread} = this.context;\n    for (var quotelink of this.nodes.quotelinks) {\n      var {boardID, threadID} = Get.postDataFromLink(quotelink);\n      if (!threadID) { continue; } // deadlink\n      if (this.isClone) {\n        $.rm($('.qmark-ct', quotelink));\n      }\n      if ((boardID === board.ID) && (threadID !== thread.ID)) {\n        $.add(quotelink, QuoteCT.mark.cloneNode(true));\n      }\n    }\n  }\n};\nexport default QuoteCT;\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar QuoteOP = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Mark OP Quotes']) { return; }\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    // \\u00A0 is nbsp\n    this.mark = $.el('span', {\n      textContent: '\\u00A0(OP)',\n      className:   'qmark-op'\n    }\n    );\n    return Callbacks.Post.push({\n      name: 'Mark OP Quotes',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    // Stop there if it's a clone of a post in the same thread.\n    let i, quotelink, quotes;\n    if (this.isClone && (this.thread === this.context.thread)) { return; }\n    // Stop there if there's no quotes in that post.\n    if (!(quotes = this.quotes).length) { return; }\n    const {quotelinks} = this.nodes;\n\n    // rm (OP) from cross-thread quotes.\n    if (this.isClone && quotes.includes(this.thread.fullID)) {\n      i = 0;\n      while ((quotelink = quotelinks[i++])) {\n        $.rm($('.qmark-op', quotelink));\n      }\n    }\n\n    const {fullID} = this.context.thread;\n    // add (OP) to quotes quoting this context's OP.\n\n    if (!quotes.includes(fullID)) { return; }\n    i = 0;\n    while ((quotelink = quotelinks[i++])) {\n      var {boardID, postID} = Get.postDataFromLink(quotelink);\n      if (`${boardID}.${postID}` === fullID) {\n        $.add(quotelink, QuoteOP.mark.cloneNode(true));\n      }\n    }\n  }\n};\nexport default QuoteOP;\n","import Redirect from \"../Archive/Redirect\";\nimport Callbacks from \"../classes/Callbacks\";\nimport Post from \"../classes/Post\";\nimport { g, Conf, doc } from \"../globals/globals\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Quotify = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) || !Conf['Resurrect Quotes']) { return; }\n\n    $.addClass(doc, 'resurrect-quotes');\n\n    if (Conf['Comment Expansion']) {\n      ExpandComment.callbacks.push(this.node);\n    }\n\n    return Callbacks.Post.push({\n      name: 'Resurrect Quotes',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) {\n      this.nodes.archivelinks = $$('a.linkify.quotelink', this.nodes.comment);\n      return;\n    }\n    for (var link of $$('a.linkify', this.nodes.comment)) {\n      Quotify.parseArchivelink.call(this, link);\n    }\n    for (var deadlink of $$('.deadlink', this.nodes.comment)) {\n      Quotify.parseDeadlink.call(this, deadlink);\n    }\n  },\n\n  parseArchivelink(link) {\n    let m;\n    if (!(m = link.pathname.match(/^\\/([^/]+)\\/thread\\/S?(\\d+)\\/?$/))) { return; }\n    if (['boards.4chan.org', 'boards.4channel.org'].includes(link.hostname)) { return; }\n    const boardID  = m[1];\n    const threadID = m[2];\n    const postID   = link.hash.match(/^#[pq]?(\\d+)$|$/)[1] || threadID;\n    if (Redirect.to('post', {boardID, postID})) {\n      $.addClass(link, 'quotelink');\n      $.extend(link.dataset, {boardID, threadID, postID});\n      return this.nodes.archivelinks.push(link);\n    }\n  },\n\n  parseDeadlink(deadlink) {\n    let a, m, post, postID;\n    if ($.hasClass(deadlink.parentNode, 'prettyprint')) {\n      // Don't quotify deadlinks inside code tags,\n      // un-`span` them.\n      // This won't be necessary once 4chan\n      // stops quotifying inside code tags:\n      // https://github.com/4chan/4chan-JS/issues/77\n      Quotify.fixDeadlink(deadlink);\n      return;\n    }\n\n    const quote = deadlink.textContent;\n    if (!(postID = quote.match(/\\d+$/)?.[0])) { return; }\n    if (postID[0] === '0') {\n      // Fix quotelinks that start with a `0`.\n      Quotify.fixDeadlink(deadlink);\n      return;\n    }\n    const boardID = (m = quote.match(/^>>>\\/([a-z\\d]+)/)) ?\n      m[1]\n    :\n      this.board.ID;\n    const quoteID = `${boardID}.${postID}`;\n\n    if (post = g.posts.get(quoteID)) {\n      if (!post.isDead) {\n        // Don't (Dead) when quotifying in an archived post,\n        // and we know the post still exists.\n        a = $.el('a', {\n          href:        g.SITE.Build.postURL(boardID, post.thread.ID, postID),\n          className:   'quotelink',\n          textContent: quote\n        }\n        );\n      } else {\n        // Replace the .deadlink span if we can redirect.\n        a = $.el('a', {\n          href:        g.SITE.Build.postURL(boardID, post.thread.ID, postID),\n          className:   'quotelink deadlink',\n          textContent: quote\n        }\n        );\n        $.add(a, Post.deadMark.cloneNode(true));\n        $.extend(a.dataset, {boardID, threadID: post.thread.ID, postID});\n      }\n\n    } else {\n      const redirect = Redirect.to('thread', {boardID, threadID: 0, postID});\n      const fetchable = Redirect.to('post', {boardID, postID});\n      if (redirect || fetchable) {\n        // Replace the .deadlink span if we can redirect or fetch the post.\n        a = $.el('a', {\n          href:        redirect || 'javascript:;',\n          className:   'deadlink',\n          textContent: quote\n        }\n        );\n        $.add(a, Post.deadMark.cloneNode(true));\n        if (fetchable) {\n          // Make it function as a normal quote if we can fetch the post.\n          $.addClass(a, 'quotelink');\n          $.extend(a.dataset, {boardID, postID});\n        }\n      }\n    }\n\n    if (!this.quotes.includes(quoteID)) { this.quotes.push(quoteID); }\n\n    if (!a) {\n      $.add(deadlink, Post.deadMark.cloneNode(true));\n      return;\n    }\n\n    $.replace(deadlink, a);\n    if ($.hasClass(a, 'quotelink')) {\n      return this.nodes.quotelinks.push(a);\n    }\n  },\n\n  fixDeadlink(deadlink) {\n    let el;\n    if (!(el = deadlink.previousSibling) || (el.nodeName === 'BR')) {\n      const green = $.el('span',\n        {className: 'quote'});\n      $.before(deadlink, green);\n      $.add(green, deadlink);\n    }\n    return $.replace(deadlink, [...deadlink.childNodes]);\n  }\n};\nexport default Quotify;\n","import $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst Polyfill = {\n  init() {\n    this.toBlob();\n    $.global(this.toBlob);\n    if (!Element.prototype.matches) { Element.prototype.matches = Element.prototype.mozMatchesSelector || Element.prototype.webkitMatchesSelector; }\n  },\n  // This function is converted to a string and then put in a script tag.\n  // Do NOT shorten to `toBlob() {`.\n  toBlob: function() {\n    if (HTMLCanvasElement.prototype.toBlob) { return; }\n    HTMLCanvasElement.prototype.toBlob = function(cb, type, encoderOptions) {\n      const url = this.toDataURL(type, encoderOptions);\n      const data = atob(url.slice(url.indexOf(',')+1));\n      // DataUrl to Binary code from Aeosynth's 4chan X repo\n      const l = data.length;\n      const ui8a = new Uint8Array(l);\n      for (let i = 0, end = l; i < end; i++) {\n        ui8a[i] = data.charCodeAt(i);\n      }\n      return cb(new Blob([ui8a], {type: type || 'image/png'}));\n    };\n  }\n};\nexport default Polyfill;\n",null,"import Redirect from \"../Archive/Redirect\";\nimport Board from \"../classes/Board\";\nimport Callbacks from \"../classes/Callbacks\";\nimport CatalogThreadNative from \"../classes/CatalogThreadNative\";\nimport DataBoard from \"../classes/DataBoard\";\nimport Notice from \"../classes/Notice\";\nimport Post from \"../classes/Post\";\nimport SimpleDict from \"../classes/SimpleDict\";\nimport Thread from \"../classes/Thread\";\nimport Config from \"../config/Config\";\nimport Anonymize from \"../Filtering/Anonymize\";\nimport Filter from \"../Filtering/Filter\";\nimport PostHiding from \"../Filtering/PostHiding\";\nimport Recursive from \"../Filtering/Recursive\";\nimport ThreadHiding from \"../Filtering/ThreadHiding\";\nimport Index from \"../General/Index\";\nimport Settings from \"../General/Settings\";\nimport FappeTyme from \"../Images/FappeTyme\";\nimport Gallery from \"../Images/Gallery\";\nimport ImageCommon from \"../Images/ImageCommon\";\nimport ImageExpand from \"../Images/ImageExpand\";\nimport ImageHost from \"../Images/ImageHost\";\nimport ImageHover from \"../Images/ImageHover\";\nimport ImageLoader from \"../Images/ImageLoader\";\nimport Metadata from \"../Images/Metadata\";\nimport RevealSpoilers from \"../Images/RevealSpoilers\";\nimport Sauce from \"../Images/Sauce\";\nimport Volume from \"../Images/Volume\";\nimport Linkify from \"../Linkification/Linkify\";\nimport ArchiveLink from \"../Menu/ArchiveLink\";\nimport CopyTextLink from \"../Menu/CopyTextLink\";\nimport DeleteLink from \"../Menu/DeleteLink\";\nimport DownloadLink from \"../Menu/DownloadLink\";\nimport ReportLink from \"../Menu/ReportLink\";\nimport AntiAutoplay from \"../Miscellaneous/AntiAutoplay\";\nimport Banner from \"../Miscellaneous/Banner\";\nimport CatalogLinks from \"../Miscellaneous/CatalogLinks\";\nimport CustomCSS from \"../Miscellaneous/CustomCSS\";\nimport ExpandComment from \"../Miscellaneous/ExpandComment\";\nimport ExpandThread from \"../Miscellaneous/ExpandThread\";\nimport FileInfo from \"../Miscellaneous/FileInfo\";\nimport Flash from \"../Miscellaneous/Flash\";\nimport Fourchan from \"../Miscellaneous/Fourchan\";\nimport IDColor from \"../Miscellaneous/IDColor\";\nimport IDHighlight from \"../Miscellaneous/IDHighlight\";\nimport IDPostCount from \"../Miscellaneous/IDPostCount\";\nimport Keybinds from \"../Miscellaneous/Keybinds\";\nimport ModContact from \"../Miscellaneous/ModContact\";\nimport Nav from \"../Miscellaneous/Nav\";\nimport NormalizeURL from \"../Miscellaneous/NormalizeURL\";\nimport PostJumper from \"../Miscellaneous/PostJumper\";\nimport PSA from \"../Miscellaneous/PSA\";\nimport PSAHiding from \"../Miscellaneous/PSAHiding\";\nimport RelativeDates from \"../Miscellaneous/RelativeDates\";\nimport RemoveSpoilers from \"../Miscellaneous/RemoveSpoilers\";\nimport ThreadLinks from \"../Miscellaneous/ThreadLinks\";\nimport Time from \"../Miscellaneous/Time\";\nimport Tinyboard from \"../Miscellaneous/Tinyboard\";\nimport Favicon from \"../Monitoring/Favicon\";\nimport MarkNewIPs from \"../Monitoring/MarkNewIPs\";\nimport ReplyPruning from \"../Monitoring/ReplyPruning\";\nimport ThreadStats from \"../Monitoring/ThreadStats\";\nimport ThreadUpdater from \"../Monitoring/ThreadUpdater\";\nimport ThreadWatcher from \"../Monitoring/ThreadWatcher\";\nimport Unread from \"../Monitoring/Unread\";\nimport UnreadIndex from \"../Monitoring/UnreadIndex\";\nimport $ from \"../platform/$\";\nimport $$ from \"../platform/$$\";\nimport PassLink from \"../Posting/PassLink\";\nimport PostRedirect from \"../Posting/PostRedirect\";\nimport QR from \"../Posting/QR\";\nimport QuoteBacklink from \"../Quotelinks/QuoteBacklink\";\nimport QuoteCT from \"../Quotelinks/QuoteCT\";\nimport QuoteInline from \"../Quotelinks/QuoteInline\";\nimport QuoteOP from \"../Quotelinks/QuoteOP\";\nimport QuotePreview from \"../Quotelinks/QuotePreview\";\nimport QuoteStrikeThrough from \"../Quotelinks/QuoteStrikeThrough\";\nimport QuoteThreading from \"../Quotelinks/QuoteThreading\";\nimport QuoteYou from \"../Quotelinks/QuoteYou\";\nimport Quotify from \"../Quotelinks/Quotify\";\nimport Site from \"../site/Site\";\nimport SW from \"../site/SW\";\nimport CSS from \"../css/CSS\";\nimport meta from '../../package.json';\nimport Header from \"../General/Header\";\nimport { c, Conf, d, doc, docSet, E, g } from \"../globals/globals\";\nimport Menu from \"../Menu/Menu\";\nimport BoardConfig from \"../General/BoardConfig\";\nimport CaptchaReplace from \"../Posting/Captcha.replace\";\nimport Get from \"../General/Get\";\nimport { dict, platform } from \"../platform/helpers\";\nimport Polyfill from \"../General/Polyfill\";\nimport RestoreDeletedFromArchive from \"../Archive/RestoreDeletedFromArchive\";\n// import Test from \"../General/Test\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nvar Main = {\n  init() {\n    // XXX dwb userscripts extension reloads scripts run at document-start when replaceState/pushState is called.\n    // XXX Firefox reinjects WebExtension content scripts when extension is updated / reloaded.\n    let key;\n    try {\n      let w = window;\n      if (platform === 'crx') { w = (w.wrappedJSObject || w); }\n      if (`${meta.name} antidup` in w) { return; }\n      w[`${meta.name} antidup`] = true;\n    } catch (error) {}\n\n    // Don't run inside ad iframes.\n    try {\n      if (window.frameElement && ['', 'about:blank'].includes(window.frameElement.src)) { return; }\n    } catch (error1) {}\n\n    // Detect multiple copies of 4chan X\n    if (doc && $.hasClass(doc, 'fourchan-x')) { return; }\n    $.asap(docSet, function() {\n      $.addClass(doc, 'fourchan-x', 'seaweedchan');\n      if ($.engine) { return $.addClass(doc, `ua-${$.engine}`); }\n    });\n    $.on(d, '4chanXInitFinished', function() {\n      if (Main.expectInitFinished) {\n        return delete Main.expectInitFinished;\n      } else {\n        new Notice('error', 'Error: Multiple copies of 4chan X are enabled.');\n        return $.addClass(doc, 'tainted');\n      }\n    });\n\n    // Detect \"mounted\" event from Kissu\n    var mountedCB = function() {\n      d.removeEventListener('mounted', mountedCB, true);\n      Main.isMounted = true;\n      return Main.mountedCBs.map((cb) =>\n        (() => { try {\n          return cb();\n        } catch (error2) {} })());\n    };\n    d.addEventListener('mounted', mountedCB, true);\n\n    // Flatten default values from Config into Conf\n    var flatten = function(parent, obj) {\n      if (obj instanceof Array) {\n        Conf[parent] = dict.clone(obj[0]);\n      } else if (typeof obj === 'object') {\n        for (var key in obj) {\n          var val = obj[key];\n          flatten(key, val);\n        }\n      } else { // string or number\n        Conf[parent] = obj;\n      }\n    };\n\n    // XXX Remove document-breaking ad\n    if (['boards.4chan.org', 'boards.4channel.org'].includes(location.hostname)) {\n      $.global(function() {\n        const fromCharCode0 = String.fromCharCode;\n        return String.fromCharCode = function() {\n          if (document.body) {\n            String.fromCharCode = fromCharCode0;\n          } else if (document.currentScript && !document.currentScript.src) {\n            throw Error();\n          }\n          return fromCharCode0.apply(this, arguments);\n        };\n      });\n      $.asap(docSet, () => $.onExists(doc, 'iframe[srcdoc]', $.rm));\n    }\n\n    flatten(null, Config);\n\n    for (var db of DataBoard.keys) {\n      Conf[db] = dict();\n    }\n    Conf['customTitles'] = dict.clone({'4chan.org': {boards: {'qa': {'boardTitle': {orig: '/qa/ - Question & Answer', title: '/qa/ - 2D/Random'}}}}});\n    Conf['boardConfig'] = {boards: dict()};\n    Conf['archives'] = Redirect.archives;\n    Conf['selectedArchives'] = dict();\n    Conf['cooldowns'] = dict();\n    Conf['Index Sort'] = dict();\n    for (let i = 0; i < 2; i++) { Conf[`Last Long Reply Thresholds ${i}`] = dict(); }\n    Conf['siteProperties'] = dict();\n\n    // XXX old key names\n    Conf['Except Archives from Encryption'] = false;\n    Conf['JSON Navigation'] = true;\n    Conf['Oekaki Links'] = true;\n    Conf['Show Name and Subject'] = false;\n    Conf['QR Shortcut'] = true;\n    Conf['Bottom QR Link'] = true;\n    Conf['Toggleable Thread Watcher'] = true;\n    Conf['siteSoftware'] = '';\n    Conf['Use Faster Image Host'] = 'true';\n    Conf['Captcha Fixes'] = true;\n    Conf['captchaServiceDomain'] = '';\n    Conf['captchaServiceKey'] = dict();\n\n    // Enforce JS whitelist\n    if (\n      /\\.4chan(?:nel)?\\.org$/.test(location.hostname) &&\n      !SW.yotsuba.regexp.pass.test(location.href) &&\n      !SW.yotsuba.regexp.captcha.test(location.href) &&\n      !$$('script:not([src])', d).filter(s => /this\\[/.test(s.textContent)).length\n    ) {\n      ($.getSync || $.get)({'jsWhitelist': Conf['jsWhitelist']}, ({jsWhitelist}) => $.addCSP(`script-src ${jsWhitelist.replace(/^#.*$/mg, '').replace(/[\\s;]+/g, ' ').trim()}`));\n    }\n\n    // Get saved values as items\n    const items = dict();\n    for (key in Conf) { items[key] = undefined; }\n    items['previousversion'] = undefined;\n    return ($.getSync || $.get)(items, function(items) {\n      if (!$.perProtocolSettings && /\\.4chan(?:nel)?\\.org$/.test(location.hostname) && (items['Redirect to HTTPS'] ?? Conf['Redirect to HTTPS']) && (location.protocol !== 'https:')) {\n        location.replace('https://' + location.host + location.pathname + location.search + location.hash);\n        return;\n      }\n      return $.asap(docSet, function() {\n\n        // Don't hide the local storage warning behind a settings panel.\n        if ($.cantSet) {\n          // pass\n\n        // Fresh install\n        } else if ((items.previousversion == null)) {\n          Main.isFirstRun = true;\n          Main.ready(function() {\n            $.set('previousversion', g.VERSION);\n            return Settings.open();\n          });\n\n        // Migrate old settings\n        } else if (items.previousversion !== g.VERSION) {\n          Main.upgrade(items);\n        }\n\n        // Combine default values with saved values\n        for (key in Conf) {\n          var val = Conf[key];\n          Conf[key] = items[key] ?? val;\n        }\n\n        return Site.init(Main.initFeatures);\n      });\n    });\n  },\n\n  upgrade(items) {\n    const {previousversion} = items;\n    const changes = Settings.upgrade(items, previousversion);\n    items.previousversion = (changes.previousversion = g.VERSION);\n    return $.set(changes, function() {\n      if (items['Show Updated Notifications'] ?? true) {\n        const el = $.el('span',\n          { innerHTML: `${meta.name} has been updated to <a href=\"${meta.changelog}\" target=\"_blank\">version ${g.VERSION}</a>.` });\n        return new Notice('info', el, 15);\n      }\n    });\n  },\n\n  parseURL(site=g.SITE, url=location) {\n    const r = {};\n\n    if (!site) { return r; }\n    r.siteID = site.ID;\n\n    if (site.isBoardlessPage?.(url)) { return r; }\n    const pathname = url.pathname.split(/\\/+/);\n    r.boardID = pathname[1];\n\n    if (site.isFileURL(url)) {\n      r.VIEW = 'file';\n    } else if (site.isAuxiliaryPage?.(url)) {\n      // pass\n    } else if (['thread', 'res'].includes(pathname[2])) {\n      r.VIEW = 'thread';\n      r.threadID = (r.THREADID = +pathname[3].replace(/\\.\\w+$/, ''));\n    } else if ((pathname[2] === 'archive') && (pathname[3] === 'res')) {\n      r.VIEW = 'thread';\n      r.threadID = (r.THREADID = +pathname[4].replace(/\\.\\w+$/, ''));\n      r.threadArchived = true;\n    } else if (/^(?:catalog|archive)(?:\\.\\w+)?$/.test(pathname[2])) {\n      r.VIEW = pathname[2].replace(/\\.\\w+$/, '');\n    } else if (/^(?:index|\\d*)(?:\\.\\w+)?$/.test(pathname[2])) {\n      r.VIEW = 'index';\n    }\n    return r;\n  },\n\n  initFeatures() {\n    $.global(function() {\n      document.documentElement.classList.add('js-enabled');\n      return window.FCX = {};});\n    Main.jsEnabled = $.hasClass(doc, 'js-enabled');\n\n    // XXX https://bugs.chromium.org/p/chromium/issues/detail?id=920638\n    $.ajaxPageInit?.();\n\n    $.extend(g, Main.parseURL());\n    if (g.boardID) { g.BOARD = new Board(g.boardID); }\n\n    if (!g.VIEW) {\n      g.SITE.initAuxiliary?.();\n      return;\n    }\n\n    if (g.VIEW === 'file') {\n      $.asap((() => d.readyState !== 'loading'), function() {\n        let video;\n        if ((g.SITE.software === 'yotsuba') && Conf['404 Redirect'] && g.SITE.is404?.()) {\n          const pathname = location.pathname.split(/\\/+/);\n          return Redirect.navigate('file', {\n            boardID:  g.BOARD.ID,\n            filename: pathname[pathname.length - 1]\n          });\n        } else if (video = $('video')) {\n          if (Conf['Volume in New Tab']) {\n            Volume.setup(video);\n          }\n          if (Conf['Loop in New Tab']) {\n            video.loop = true;\n            video.controls = false;\n            video.play();\n            return ImageCommon.addControls(video);\n          }\n        }\n      });\n      return;\n    }\n\n    g.threads = new SimpleDict();\n    g.posts   = new SimpleDict();\n\n    // set up CSS when <head> is completely loaded\n    $.onExists(doc, 'body', Main.initStyle);\n\n    // c.time 'All initializations'\n    for (var [name, feature] of Main.features) {\n      if (g.SITE.disabledFeatures && g.SITE.disabledFeatures.includes(name)) { continue; }\n      // c.time \"#{name} initialization\"\n      try {\n        feature.init();\n      } catch (err) {\n        Main.handleErrors({\n          message: `\\\"${name}\\\" initialization crashed.`,\n          error: err\n        });\n      }\n    }\n      // finally\n      //   c.timeEnd \"#{name} initialization\"\n\n    // c.timeEnd 'All initializations'\n\n    return $.ready(Main.initReady);\n  },\n\n  initStyle() {\n    if (!Main.isThisPageLegit()) { return; }\n\n    // disable the mobile layout\n    const mobileLink = $('link[href*=mobile]', d.head);\n    if (mobileLink) mobileLink.disabled = true;\n    doc.dataset.host = location.host;\n    $.addClass(doc, `sw-${g.SITE.software}`);\n    $.addClass(doc, g.VIEW === 'thread' ? 'thread-view' : g.VIEW);\n    $.onExists(doc, '.ad-cnt, .adg-rects > .desktop', ad => $.onExists(ad, 'img, iframe', () => $.addClass(doc, 'ads-loaded')));\n    if (Conf['Autohiding Scrollbar']) { $.addClass(doc, 'autohiding-scrollbar'); }\n    $.ready(function() {\n      if ((d.body.clientHeight > doc.clientHeight) && ((window.innerWidth === doc.clientWidth) !== Conf['Autohiding Scrollbar'])) {\n        Conf['Autohiding Scrollbar'] = !Conf['Autohiding Scrollbar'];\n        $.set('Autohiding Scrollbar', Conf['Autohiding Scrollbar']);\n        return $.toggleClass(doc, 'autohiding-scrollbar');\n      }\n    });\n    $.addStyle(CSS.sub(CSS.boards), 'fourchanx-css');\n    Main.bgColorStyle = $.el('style', {id: 'fourchanx-bgcolor-css'});\n\n    let keyboard = false;\n    $.on(d, 'mousedown', () => keyboard = false);\n    $.on(d, 'keydown', function(e) { if (e.keyCode === 9) { return keyboard = true; } }); // tab\n    window.addEventListener('focus', (() => doc.classList.toggle('keyboard-focus', keyboard)), true);\n\n    return Main.setClass();\n  },\n\n  setClass() {\n    let mainStyleSheet, style, styleSheets;\n    const knownStyles = ['yotsuba', 'yotsuba-b', 'futaba', 'burichan', 'photon', 'tomorrow', 'spooky'];\n\n    if ((g.SITE.software === 'yotsuba') && (g.VIEW === 'catalog')) {\n      if (mainStyleSheet = $.id('base-css')) {\n        style = mainStyleSheet.href.match(/catalog_(\\w+)/)?.[1].replace('_new', '').replace(/_+/g, '-');\n        if (knownStyles.includes(style)) {\n          $.addClass(doc, style);\n          return;\n        }\n      }\n    }\n\n    style = (mainStyleSheet = (styleSheets = null));\n\n    const setStyle = function() {\n      // Use preconfigured CSS for 4chan's default themes.\n      if (g.SITE.software === 'yotsuba') {\n        $.rmClass(doc, style);\n        style = null;\n        for (var styleSheet of styleSheets) {\n          if (styleSheet.href === mainStyleSheet?.href) {\n            style = styleSheet.title.toLowerCase().replace('new', '').trim().replace(/\\s+/g, '-');\n            if (style === '_special') { style = styleSheet.href.match(/[a-z]*(?=[^/]*$)/)[0]; }\n            if (!knownStyles.includes(style)) { style = null; }\n            break;\n          }\n        }\n        if (style) {\n          $.addClass(doc, style);\n          $.rm(Main.bgColorStyle);\n          return;\n        }\n      }\n\n      // Determine proper dialog background color for other themes.\n      const div = g.SITE.bgColoredEl();\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden';\n      $.add(d.body, div);\n      let bgColor = window.getComputedStyle(div).backgroundColor;\n      $.rm(div);\n      const rgb = bgColor.match(/[\\d.]+/g);\n      // Use body background if reply background is transparent\n      if (!/^rgb\\(/.test(bgColor)) {\n        const s = window.getComputedStyle(d.body);\n        bgColor = `${s.backgroundColor} ${s.backgroundImage} ${s.backgroundRepeat} ${s.backgroundPosition}`;\n      }\n      let css = `\\\n.dialog, .suboption-list > div:last-of-type, :root.catalog-hover-expand .catalog-container:hover > .post {\n  background: ${bgColor};\n}\n.unread-mark-read {\n  background-color: rgba(${rgb.slice(0, 3).join(', ')}, ${0.5*(rgb[3] || 1)});\n}\\\n`;\n      if ($.luma(rgb) < 100) {\n        css += `\\\n.watch-thread-link {\n  background-image: url(\"data:image/svg+xml,<svg viewBox='0 0 26 26' preserveAspectRatio='true' xmlns='http://www.w3.org/2000/svg'><path fill='rgb(200,200,200)' d='M24.132,7.971c-2.203-2.205-5.916-2.098-8.25,0.235L15.5,8.588l-0.382-0.382c-2.334-2.333-6.047-2.44-8.25-0.235c-2.204,2.203-2.098,5.916,0.235,8.249l8.396,8.396l8.396-8.396C26.229,13.887,26.336,10.174,24.132,7.971z'/></svg>\");\n}\\\n`;\n      }\n      Main.bgColorStyle.textContent = css;\n      return $.after($.id('fourchanx-css'), Main.bgColorStyle);\n    };\n\n    $.onExists(d.head, g.SITE.selectors.styleSheet, function(el) {\n      mainStyleSheet = el;\n      if (g.SITE.software === 'yotsuba') {\n        styleSheets = $$('link[rel=\"alternate stylesheet\"]', d.head);\n      }\n      new MutationObserver(setStyle).observe(mainStyleSheet, {\n        attributes: true,\n        attributeFilter: ['href']\n      });\n      $.on(mainStyleSheet, 'load', setStyle);\n      return setStyle();\n    });\n    if (!mainStyleSheet) {\n      for (var styleSheet of $$('link[rel=\"stylesheet\"]', d.head)) {\n        $.on(styleSheet, 'load', setStyle);\n      }\n      return setStyle();\n    }\n  },\n\n  initReady() {\n    if (g.SITE.is404?.()) {\n      if (g.VIEW === 'thread') {\n        ThreadWatcher.set404(g.BOARD.ID, g.THREADID, function() {\n          if (Conf['404 Redirect']) {\n            return Redirect.navigate('thread', {\n              boardID:  g.BOARD.ID,\n              threadID: g.THREADID,\n              postID:   +location.hash.match(/\\d+/)\n            } // post number or 0\n            , `/${g.BOARD}/`);\n          }\n        });\n      }\n\n      return;\n    }\n\n    if (g.SITE.isIncomplete?.()) {\n      const msg = $.el('div',\n        {innerHTML: 'The page didn&#039;t load completely.<br>Some features may not work unless you <a href=\"javascript:;\">reload</a>.'});\n      $.on($('a', msg), 'click', () => location.reload());\n      new Notice('warning', msg);\n    }\n\n    // Parse HTML or skip it and start building from JSON.\n    if (g.VIEW === 'catalog') {\n      return Main.initCatalog();\n    } else if (!Index.enabled) {\n      if (g.SITE.awaitBoard) {\n        return g.SITE.awaitBoard(Main.initThread);\n      } else {\n        return Main.initThread();\n      }\n    } else {\n      Main.expectInitFinished = true;\n      return $.event('4chanXInitFinished');\n    }\n  },\n\n  initThread() {\n    let board;\n    const s = g.SITE.selectors;\n    if (board = $((s.boardFor?.[g.VIEW] || s.board))) {\n      const threads = [];\n      const posts   = [];\n      const errors  = [];\n\n      try {\n        g.SITE.preParsingFixes?.(board);\n      } catch (error) {}\n\n      Main.addThreadsObserver = new MutationObserver(Main.addThreads);\n      Main.addPostsObserver   = new MutationObserver(Main.addPosts);\n      Main.addThreadsObserver.observe(board, {childList: true});\n\n      Main.parseThreads($$(s.thread, board), threads, posts, errors);\n      if (errors.length) { Main.handleErrors(errors); }\n\n      if (g.VIEW === 'thread') {\n        if (g.threadArchived) {\n          threads[0].isArchived = true;\n          threads[0].kill();\n        }\n        g.SITE.parseThreadMetadata?.(threads[0]);\n      }\n\n      Main.callbackNodes('Thread', threads);\n      return Main.callbackNodesDB('Post', posts, function() {\n        for (var post of posts) { QuoteThreading.insert(post); }\n        Main.expectInitFinished = true;\n        return $.event('4chanXInitFinished');\n      });\n\n    } else {\n      Main.expectInitFinished = true;\n      return $.event('4chanXInitFinished');\n    }\n  },\n\n  parseThreads(threadRoots, threads, posts, errors) {\n    for (var threadRoot of threadRoots) {\n      var boardObj = (() => {\n        let boardID;\n        if (boardID = threadRoot.dataset.board) {\n        boardID = encodeURIComponent(boardID);\n        return g.boards[boardID] || new Board(boardID);\n      } else {\n        return g.BOARD;\n      }\n      })();\n      var threadID = +threadRoot.id.match(/\\d*$/)[0];\n      if (!threadID || boardObj.threads.get(threadID)?.nodes.root) { return; }\n      var thread = new Thread(threadID, boardObj);\n      thread.nodes.root = threadRoot;\n      threads.push(thread);\n      var postRoots = $$(g.SITE.selectors.postContainer, threadRoot);\n      if (g.SITE.isOPContainerThread) { postRoots.unshift(threadRoot); }\n      Main.parsePosts(postRoots, thread, posts, errors);\n      Main.addPostsObserver.observe(threadRoot, {childList: true});\n    }\n  },\n\n  parsePosts(postRoots, thread, posts, errors) {\n    for (var postRoot of postRoots) {\n      if (!(postRoot.dataset.fullID && g.posts.get(postRoot.dataset.fullID)) && $(g.SITE.selectors.comment, postRoot)) {\n        try {\n          posts.push(new Post(postRoot, thread, thread.board));\n        } catch (err) {\n          // Skip posts that we failed to parse.\n          errors.push({\n            message: `Parsing of Post No.${postRoot.id.match(/\\d+/)} failed. Post will be skipped.`,\n            error: err,\n            html: postRoot.outerHTML\n          });\n        }\n      }\n    }\n  },\n\n  addThreads(records) {\n    const threadRoots = [];\n    for (var record of records) {\n      for (var node of record.addedNodes) {\n        if ((node.nodeType === Node.ELEMENT_NODE) && node.matches(g.SITE.selectors.thread)) {\n          threadRoots.push(node);\n        }\n      }\n    }\n    if (!threadRoots.length) { return; }\n    const threads = [];\n    const posts   = [];\n    const errors  = [];\n    Main.parseThreads(threadRoots, threads, posts, errors);\n    if (errors.length) { Main.handleErrors(errors); }\n    Main.callbackNodes('Thread', threads);\n    return Main.callbackNodesDB('Post', posts, () => $.event('PostsInserted', null, records[0].target));\n  },\n\n  addPosts(records) {\n    let thread;\n    const threads   = [];\n    const threadsRM = [];\n    const posts     = [];\n    const errors    = [];\n    for (var record of records) {\n      thread = Get.threadFromRoot(record.target);\n      var postRoots = [];\n      for (var node of record.addedNodes) {\n        if (node.nodeType === Node.ELEMENT_NODE) {\n          if (node.matches(g.SITE.selectors.postContainer) || (node = $(g.SITE.selectors.postContainer, node))) {\n            postRoots.push(node);\n          }\n        }\n      }\n      var n = posts.length;\n      Main.parsePosts(postRoots, thread, posts, errors);\n      if ((posts.length > n) && !threads.includes(thread)) {\n        threads.push(thread);\n      }\n      var anyRemoved = false;\n      for (var el of record.removedNodes) {\n        if ((Get.postFromRoot(el)?.nodes.root === el) && !doc.contains(el)) {\n          anyRemoved = true;\n          break;\n        }\n      }\n      if (anyRemoved && !threadsRM.includes(thread)) {\n        threadsRM.push(thread);\n      }\n    }\n    if (errors.length) { Main.handleErrors(errors); }\n    return Main.callbackNodesDB('Post', posts, function() {\n      for (thread of threads) {\n        $.event('PostsInserted', null, thread.nodes.root);\n      }\n      for (thread of threadsRM) {\n        $.event('PostsRemoved', null, thread.nodes.root);\n      }\n    });\n  },\n\n  initCatalog() {\n    let board;\n    const s = g.SITE.selectors.catalog;\n    if (s && (board = $(s.board))) {\n      const threads = [];\n      const errors  = [];\n\n      Main.addCatalogThreadsObserver = new MutationObserver(Main.addCatalogThreads);\n      Main.addCatalogThreadsObserver.observe(board, {childList: true});\n\n      Main.parseCatalogThreads($$(s.thread, board), threads, errors);\n      if (errors.length) { Main.handleErrors(errors); }\n\n      Main.callbackNodes('CatalogThreadNative', threads);\n    }\n\n    Main.expectInitFinished = true;\n    return $.event('4chanXInitFinished');\n  },\n\n  parseCatalogThreads(threadRoots, threads, errors) {\n    for (var threadRoot of threadRoots) {\n      try {\n        var thread = new CatalogThreadNative(threadRoot);\n        if (thread.thread.catalogViewNative?.nodes.root !== threadRoot) {\n          thread.thread.catalogViewNative = thread;\n          threads.push(thread);\n        }\n      } catch (err) {\n        // Skip threads that we failed to parse.\n        errors.push({\n          message: `Parsing of Catalog Thread No.${(threadRoot.dataset.id || threadRoot.id).match(/\\d+/)} failed. Thread will be skipped.`,\n          error: err,\n          html: threadRoot.outerHTML\n        });\n      }\n    }\n  },\n\n  addCatalogThreads(records) {\n    const threadRoots = [];\n    for (var record of records) {\n      for (var node of record.addedNodes) {\n        if ((node.nodeType === Node.ELEMENT_NODE) && node.matches(g.SITE.selectors.catalog.thread)) {\n          threadRoots.push(node);\n        }\n      }\n    }\n    if (!threadRoots.length) { return; }\n    const threads = [];\n    const errors  = [];\n    Main.parseCatalogThreads(threadRoots, threads, errors);\n    if (errors.length) { Main.handleErrors(errors); }\n    return Main.callbackNodes('CatalogThreadNative', threads);\n  },\n\n  callbackNodes(klass, nodes) {\n    let node;\n    let i = 0;\n    const cb = Callbacks[klass];\n    while ((node = nodes[i++])) {\n      cb.execute(node);\n    }\n  },\n\n  callbackNodesDB(klass, nodes, cb) {\n    let i   = 0;\n    const cbs = Callbacks[klass];\n    const fn  = function() {\n      let node;\n      if (!(node = nodes[i])) { return false; }\n      cbs.execute(node);\n      return ++i % 250;\n    };\n\n    var softTask = function() {\n      while (fn()) {\n        continue;\n      }\n      if (!nodes[i]) {\n        if (cb) { cb(); }\n        return;\n      }\n      return setTimeout(softTask, 0);\n    };\n\n    return softTask();\n  },\n\n  handleErrors(errors) {\n    // Detect conflicts with 4chan X v2\n    let error;\n    if (d.body && $.hasClass(d.body, 'fourchan_x') && !$.hasClass(doc, 'tainted')) {\n      new Notice('error', 'Error: Multiple copies of 4chan X are enabled.');\n      $.addClass(doc, 'tainted');\n    }\n\n    // Detect conflicts with native extension\n    if (g.SITE.testNativeExtension && !$.hasClass(doc, 'tainted')) {\n      const {enabled} = g.SITE.testNativeExtension();\n      if (enabled) {\n        $.addClass(doc, 'tainted');\n        if (Conf['Disable Native Extension'] && !Main.isFirstRun) {\n          const msg = $.el('div',\n            { innerHTML: 'Failed to disable the native extension. You may need to <a href=\"' + E(meta.faq) + '#blocking-native-extension\" target=\"_blank\">block it</a>.' });\n          new Notice('error', msg);\n        }\n      }\n    }\n\n    if (!(errors instanceof Array)) {\n      error = errors;\n    } else if (errors.length === 1) {\n      error = errors[0];\n    }\n    if (error) {\n      new Notice('error', Main.parseError(error, Main.reportLink([error])), 15);\n      return;\n    }\n\n    const div = $.el('div', {\n      innerHTML:\n        `${errors.length} errors occurred.${Main.reportLink(errors).innerHTML} [<a href=\"javascript:;\">show</a>]`\n    });\n    $.on(div.lastElementChild, 'click', function () {\n      return [this.textContent, logs.hidden] = this.textContent === 'show' ? ['hide', false] : ['show', true];\n    });\n\n    var logs = $.el('div',\n      {hidden: true});\n    for (error of errors) {\n      $.add(logs, Main.parseError(error));\n    }\n\n    return new Notice('error', [div, logs], 30);\n  },\n\n  parseError(data, reportLink) {\n    c.error(data.message, data.error.stack);\n    const message = $.el('div',\n      { innerHTML: E(data.message) + ((reportLink) ? (reportLink).innerHTML : \"\") });\n    const error = $.el('div',\n      {textContent: `${data.error.name || 'Error'}: ${data.error.message || 'see console for details'}`});\n    const lines = data.error.stack?.match(/\\d+(?=:\\d+\\)?$)/mg)?.join().replace(/^/, ' at ') || '';\n    const context = $.el('div',\n      { textContent: `(${meta.name} ${meta.fork} v${g.VERSION} ${platform} on ${$.engine}${lines})` });\n    return [message, error, context];\n  },\n\n  reportLink(errors) {\n    let info;\n    const data = errors[0];\n    let title  = data.message;\n    if (errors.length > 1) { title += ` (+${errors.length - 1} other errors)`; }\n    let details = '';\n    const addDetails = function(text) {\n      if (encodeURIComponent(title + details + text + '\\n').length <= meta.newIssueMaxLength - meta.newIssue.replace(/%(title|details)/, '').length) {\n        return details += text + '\\n';\n      }\n    };\n    addDetails(`\\\n[Please describe the steps needed to reproduce this error.]\n\nScript: ${meta.name} ${meta.fork} v${g.VERSION} ${platform}\nURL: ${location.href}\nUser agent: ${navigator.userAgent}\\\n`\n    );\n    if ((platform === 'userscript') && (info = (() => {\n      if (typeof GM !== 'undefined' && GM !== null) { return GM.info; } else { if (typeof GM_info !== 'undefined' && GM_info !== null) { return GM_info; }\n  }\n    })())) {\n      addDetails(`Userscript manager: ${info.scriptHandler} ${info.version}`);\n    }\n    addDetails('\\n' + data.error);\n    if (data.error.stack) { addDetails(data.error.stack.replace(data.error.toString(), '').trim()); }\n    if (data.html) { addDetails('\\n`' + data.html + '`'); }\n    details = details.replace(/file:\\/{3}.+\\//g, ''); // Remove local file paths\n    const url = meta.newIssue.replace('%title', encodeURIComponent(title)).replace('%details', encodeURIComponent(details));\n    return { innerHTML: `<span class=\"report-error\"> [<a href=\"${url}\" target=\"_blank\">report</a>]</span>` };\n  },\n\n  isThisPageLegit() {\n    // not 404 error page or similar.\n    if (!('thisPageIsLegit' in Main)) {\n      Main.thisPageIsLegit = g.SITE.isThisPageLegit ?\n        g.SITE.isThisPageLegit()\n      :\n        !/^[45]\\d\\d\\b/.test(document.title) && !/\\.(?:json|rss)$/.test(location.pathname);\n    }\n    return Main.thisPageIsLegit;\n  },\n\n  ready(cb) {\n    return $.ready(function() {\n      if (Main.isThisPageLegit()) { return cb(); }\n    });\n  },\n\n  mounted(cb) {\n    if (Main.isMounted) {\n      return cb();\n    } else {\n      return Main.mountedCBs.push(cb);\n    }\n  },\n\n  mountedCBs: [],\n\n  features: [\n    ['Polyfill',                  Polyfill],\n    ['Board Configuration',       BoardConfig],\n    ['Normalize URL',             NormalizeURL],\n    ['Delay Redirect on Post',    PostRedirect],\n    ['Captcha Configuration',     CaptchaReplace],\n    ['Image Host Rewriting',      ImageHost],\n    ['Redirect',                  Redirect],\n    ['Header',                    Header],\n    ['Catalog Links',             CatalogLinks],\n    ['Settings',                  Settings],\n    ['Index Generator',           Index],\n    ['Disable Autoplay',          AntiAutoplay],\n    ['Announcement Hiding',       PSAHiding],\n    ['Fourchan thingies',         Fourchan],\n    ['Tinyboard Glue',            Tinyboard],\n    ['Color User IDs',            IDColor],\n    ['Highlight by User ID',      IDHighlight],\n    ['Count Posts by ID',         IDPostCount],\n    ['Custom CSS',                CustomCSS],\n    ['Thread Links',              ThreadLinks],\n    ['Linkify',                   Linkify],\n    ['Reveal Spoilers',           RemoveSpoilers],\n    ['Resurrect Quotes',          Quotify],\n    ['Filter',                    Filter],\n    ['Thread Hiding Buttons',     ThreadHiding],\n    ['Reply Hiding Buttons',      PostHiding],\n    ['Recursive',                 Recursive],\n    ['Strike-through Quotes',     QuoteStrikeThrough],\n    ['Quick Reply Personas',      QR.persona],\n    ['Quick Reply',               QR],\n    ['Cooldown',                  QR.cooldown],\n    ['Post Jumper',               PostJumper],\n    ['Pass Link',                 PassLink],\n    ['Menu',                      Menu],\n    ['Index Generator (Menu)',    Index.menu],\n    ['Report Link',               ReportLink],\n    ['Copy Text Link',            CopyTextLink],\n    ['Thread Hiding (Menu)',      ThreadHiding.menu],\n    ['Reply Hiding (Menu)',       PostHiding.menu],\n    ['Delete Link',               DeleteLink],\n    ['Filter (Menu)',             Filter.menu],\n    ['Edit Link',                 QR.oekaki.menu],\n    ['Download Link',             DownloadLink],\n    ['Archive Link',              ArchiveLink],\n    ['Quote Inlining',            QuoteInline],\n    ['Quote Previewing',          QuotePreview],\n    ['Quote Backlinks',           QuoteBacklink],\n    ['Mark Quotes of You',        QuoteYou],\n    ['Mark OP Quotes',            QuoteOP],\n    ['Mark Cross-thread Quotes',  QuoteCT],\n    ['Anonymize',                 Anonymize],\n    ['Time Formatting',           Time],\n    ['Relative Post Dates',       RelativeDates],\n    ['File Info Formatting',      FileInfo],\n    ['Fappe Tyme',                FappeTyme],\n    ['Gallery',                   Gallery],\n    ['Gallery (menu)',            Gallery.menu],\n    ['Sauce',                     Sauce],\n    ['Image Expansion',           ImageExpand],\n    ['Image Expansion (Menu)',    ImageExpand.menu],\n    ['Reveal Spoiler Thumbnails', RevealSpoilers],\n    ['Image Loading',             ImageLoader],\n    ['Image Hover',               ImageHover],\n    ['Volume Control',            Volume],\n    ['WEBM Metadata',             Metadata],\n    ['Comment Expansion',         ExpandComment],\n    ['Thread Expansion',          ExpandThread],\n    ['Favicon',                   Favicon],\n    ['Unread',                    Unread],\n    ['Unread Line in Index',      UnreadIndex],\n    ['Quote Threading',           QuoteThreading],\n    ['Thread Stats',              ThreadStats],\n    ['Thread Updater',            ThreadUpdater],\n    ['Thread Watcher',            ThreadWatcher],\n    ['Thread Watcher (Menu)',     ThreadWatcher.menu],\n    ['Mark New IPs',              MarkNewIPs],\n    ['Index Navigation',          Nav],\n    ['Keybinds',                  Keybinds],\n    ['Banner',                    Banner],\n    ['Announcements',             PSA],\n    ['Flash Features',            Flash],\n    ['Reply Pruning',             ReplyPruning],\n    ['Mod Contact Links',         ModContact],\n    ['Restore deleted posts from archive', RestoreDeletedFromArchive],\n  ]\n};\nexport default Main;\n$.ready(() => Main.init());\n\n// <% if (readJSON('/.tests_enabled')) { %>\n// Main.features.push(['Build Test', Test]);\n// <% } %>\n","import Callbacks from \"../classes/Callbacks\";\nimport Get from \"../General/Get\";\nimport { g, Conf } from \"../globals/globals\";\nimport $ from \"../platform/$\";\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/main/docs/suggestions.md\n */\nconst QuoteStrikeThrough = {\n  init() {\n    if (!['index', 'thread'].includes(g.VIEW) ||\n      (!Conf['Reply Hiding Buttons'] && (!Conf['Menu'] || !Conf['Reply Hiding Link']) && !Conf['Filter'])) { return; }\n\n    return Callbacks.Post.push({\n      name: 'Strike-through Quotes',\n      cb:   this.node\n    });\n  },\n\n  node() {\n    if (this.isClone) { return; }\n    for (var quotelink of this.nodes.quotelinks) {\n      var {boardID, postID} = Get.postDataFromLink(quotelink);\n      if (g.posts.get(`${boardID}.${postID}`)?.isHidden) {\n        $.addClass(quotelink, 'filtered');\n      }\n    }\n  }\n};\nexport default QuoteStrikeThrough;\n"],"names":["Conf","Object","create","g","VERSION","NAMESPACE","meta","name","sites","boards","E","str","regex","fn","x","output","text","toString","replace","cat","templates","html","i","length","innerHTML","d","document","doc","documentElement","c","console","docSet","Callbacks","static","this","Post","Thread","CatalogThread","CatalogThreadNative","constructor","type","keys","push","cb","execute","node","force","errors","callbacksExecuted","call","err","message","ID","board","join","error","nodes","root","outerHTML","Main","handleErrors","initClass","Config","main","Miscellaneous","Keybinds","Linkification","Linkify","Embedding","Filtering","Anonymize","Filter","Stubs","Gallery","Sauce","Autoplay","Menu","Monitoring","Cooldown","imageExpansion","gallery","threadWatcher","filter","general","postID","uniqueID","tripcode","capcode","pass","email","subject","comment","flag","filename","dimensions","filesize","MD5","sauces","FappeT","werk","Index","Header","archives","archiveLists","lastarchivecheck","archiveAutoUpdate","externalCatalogURLs","boardnav","QR","sjisPreview","jsWhitelist","captchaLanguage","time","timeLocale","backlink","pastedname","fileInfo","favicon","usercss","hotkeys","Close","Watch","Update","Pause","Slideshow","fappeTyme","werkTyme","Hide","updater","checkbox","Beep","Interval","customCooldown","customCooldownEnabled","position","fourchanImageHost","hiddenPSAList","knownBanners","passMessageClosed","PSAseen","Favicon","init","$","asap","head","el","initAsap","set","status","href","add","isSFW","test","default","switch","items","ferongr","Mayhem","Original","Metro","getOwn","f","unreadDead","unreadDeadY","unreadSFW","unreadSFWY","unreadNSFW","unreadNSFWY","update","unread","unreadY","SFW","NSFW","dead","logo","$$","selector","body","Array","from","querySelectorAll","CaptchaReplace","SITE","software","cookie","indexOf","jsEnabled","trim","includes","location","hostname","onExists","Captcha","iframe","ready","noscript","original","toggle","parentNode","span","id","rm","insert","textContent","on","lang","src","encodeURIComponent","CaptchaT","isEnabled","className","addClass","after","com","moreNeeded","getThread","threadID","boardID","BOARD","posts","thread","setup","focus","container","prepend","currentThread","global","querySelector","window","TCaptcha","setErrorCb","dispatchEvent","CustomEvent","detail","content","destroy","updateThread","newThread","getOne","response","key","value","setUsed","clearChallenge","occupied","debounce","wait","lastCall","timeout","that","args","exec","Date","now","apply","arguments","clearTimeout","setTimeout","dict","clone","obj","arr","end","map","val","json","JSON","parse","SECOND","MINUTE","HOUR","DAY","platform","GM_xmlhttpRequest","DataBoard","sync","dontClean","changes","onSync","bind","initData","clean","off","data","lastChecked","save","change","get","needSync","version","forceSync","delete","siteID","deleteIfEmpty","setUnsafe","undefined","base","extend","oldVal","defaultValue","subVal","setLastChecked","middle","ajaxClean","threadsList","urls","threadsListJSON","cache","archiveList","archiveListJSON","ajaxCleanParse","response1","archivedBoardsKnown","response2","threads","page","no","SimpleDict","splice","forEach","fullID","isDead","isHidden","isSticky","isClosed","isArchived","postLimit","fileLimit","lastPost","ipCount","OP","catalogView","setPage","pageNum","icon","info","reply","previousSibling","tn","title","pageCount","setCount","count","reachedLimit","rmClass","setStatus","setIcon","typeLC","toLowerCase","icons","Build","staticPath","gifIcon","alt","style","cssText","quote","cloneNode","kill","collect","n","post","clones","thumb","postCount","fileCount","replies","currentMenu","lastToggledButton","setPosition","close","keybinds","onFocus","addEntry","open","entries","makeMenu","menu","tabIndex","dataset","e","stopPropagation","button","preventDefault","previousButton","entry","sort","first","second","order","insertEntry","mRect","getBoundingClientRect","bRect","scrollY","top","scrollX","left","cHeight","clientHeight","cWidth","clientWidth","bottom","height","right","width","classList","parent","submenu","subEntries","subEntry","findNextEntry","direction","children","next","keyCode","click","firstElementChild","nextPrev","target","focused","sRect","eRect","parseEntry","dragstart","isTouching","changedTouches","rect","screenHeight","screenWidth","o","dx","clientX","dy","clientY","topBorder","bottomBorder","bar","identifier","move","touchmove","up","touchend","drag","dragend","touch","hoverstart","latestEvent","endEvents","noRemove","isImage","nodeName","hover","hoverend","MutationObserver","observe","childList","workaround","contains","padding","offsetHeight","offsetWidth","Math","max","min","threshold","marginX","UI","dialog","properties","child","tagName","checked","label","input","Nav","VIEW","prev","append","scrollTo","scroll","scrollHeight","THREADID","hasClass","threadRoot","selectors","Get","threadFromRoot","stub","getTopOf","delta","activeElement","blur","axis","xpath","extra","marginBottom","haveExtra","removeExtra","ImageHost","useFaster","suggestions","host","flashHost","thumbHost","isClone","file","url","split","link","thumbLink","fixLinks","links","pathname","Volume","inputs","unmute","volume","noAudio","catalogNode","unmuteEntry","volumeEntry","video","muted","files","isVideo","wheel","shiftKey","altKey","ctrlKey","metaKey","hasAudio","deltaY","minmax","ImageCommon","pause","rewind","readyState","HAVE_METADATA","currentTime","queueTask","pushCache","cacheError","popCache","decodeError","fileObj","code","MediaError","MEDIA_ERR_DECODE","isFromArchive","delay","timeoutID","Redirect","to","securityCheck","redirect","threadJSON","parseJSON","isArchiveURL","needle","postObj","archivedThreadJSON","ajax","onloadend","index","docIndex","filesDeleted","addControls","handler","t","getTime","engine","duration","controls","onControls","download","protocol","CrossOrigin","blob","a","URL","createObjectURL","hidden","Notice","Audio","setupSync","audio","addEventListener","play","playbackRate","once","setupAudioSlider","createElement","appendChild","createTextNode","control","step","valueAsNumber","downloadLink","ImageExpand","enabled","EAI","toggleAll","addShortcut","playVideos","videoControls","isExpanding","contract","expand","isExpanded","fullImage","setupVideoCB","setupVideo","origin","paused","wasPlaying","isFetchedQuote","isSpoiler","modifiedClick","postFromNode","func","event","visible","isNodeVisible","setFitness","scrollIntoView","oldHeight","scrollBy","scrollToIfNeeded","eventName","videoCB","remove","audioSlider","fileID","removeAttribute","loop","completeExpand","naturalHeight","soundUrlMatch","match","decodeURIComponent","startsWith","audioEl","parentElement","autoplay","imageBottom","getBottomOf","playing","mousedown","mouseover","mouseup","mouseout","buttons","createSubEntry","conf","desc","flags","context","isReply","parseNodes","flagCode","toUpperCase","flagCodeTroll","date","parseDate","nameBlock","parseComment","parseQuotes","parseFiles","isRebuilt","s","infoRoot","isOPContainerThread","opBottom","quotelinks","archivelinks","embedlinks","backlinks","getElementsByClassName","uniqueIDRoot","bq","normalize","commentClean","cleanComment","nodesToText","commentDisplay","cleanSpoilers","cleanCommentDisplay","commentOrig","insertTags","X","snapshotItem","spoilers","spoiler","quotelink","quotes","parseQuote","regexp","fileRoots","fileRoot","parseFile","multifile","roots","size","unit","sizeInBytes","strong","allQuotelinksLinkingTo","deadMark","resurrect","some","addClone","contractThumb","PostClone","rmClone","slice","setCatalogOP","isCatalogOP","super","cloneWithoutVideo","suffix","inline","inlined","originFile","videoThumb","md5","nodeType","Node","ELEMENT_NODE","childNodes","makeButton","Recursive","recursives","recursive","PostHiding","db","sa","thisPost","hide","makeStub","hideRecursively","sideArrows","firstChild","div","show","hideStubLink","hideStub","saveHiddenState","isHiding","showRecursively","RelativeDates","INTERVAL","flush","dateEl","relative","diff","abbrev","number","years","getFullYear","months","getMonth","days","getDate","rounded","round","stale","isPost","utc","singlePost","concat","setOwnTimeout","markStale","Element","BoardConfig","cbs","load","statusText","config","sfwBoards","sfw","result","object","ws_board","domain","is_archived","webm_audio","Board","cooldowns","c2","image","images","thread_global","ceil","PostRedirect","delays","ExpandComment","callbacks","longComment","shortComment","req","spoilerRange","custom_spoiler","getAttribute","callback","QuoteYou","mark","isYou","postDataFromLink","quoter","seek","highlighted","highlight","classes","lastRead","snapshotLength","postFromRoot","sel","postContainer","highlightable","matches","RandomAccessList","item","last","before","rmi","shift","Unread","hr","Set","postsQuotingYou","addPost","lastReadPost","readCount","one","onUpdate","resetLink","reset","setLine","read","positionPrev","hash","updatePosition","postIDs","addPostQuotingYou","openNotification","predicate","areNotificationsEnabled","notif","Notification","onclick","onshow","readSinglePost","has","saveLastReadPost","oldPosition","linePosition","nextSibling","countQuotingYou","titleQuotingYou","titleCount","titleDead","saveThreadWatcherCount","quotingYou","ThreadWatcher","ExpandThread","statuses","onIndexRefresh","setButton","summaryText","cursor","cbToggle","disconnect","refresh","oldReq","abort","threadFromNode","cbToggleBottom","numReplies","replyOriginal","postsCount","filesCount","postsRoot","postData","postFromObject","callbackNodes","a2","UnreadIndex","markReadLink","onPostsInserted","isCatalog","threadIDs","wasVisible","divider","repliesShown","repliesRead","firstUnread","summary","hasUnread","markRead","threadDivider","sc","shortcut","dbLM","list","lastElementChild","refreshButton","closeButton","unreaddb","unreadEnabled","toggleWatcher","buttonFetchAll","addHeaderMenuEntry","addDialog","onIndexUpdate","onThreadRefresh","initLastModified","fetchAuto","isWatched","isWatchedRaw","setToggler","toggler","excerpt","threadExcerpt","isThisPageLegit","build","toggleClass","openAll","openUnread","openDeads","pruneDeads","getAll","dismiss","addRaw","nKilled","fetchStatus","requests","fetched","fetch","lastModified","whenModified","finished","clearRequests","syncing","lm","interval","hasFocus","fetchAllStatus","dbs","dbi","middle1","deep","lastChecked2","fetchBoard","modified","site","urlF","threadModTimeIgnoresSage","parseBoard","lmDate","getResponseHeader","pageLength","nThreads","oldest","last_modified","lastPage","isPrunedByAge","newData","parseStatus","archived","youOP","quotesYou","quotelinkHTML","lastIndex","archiveURL","mayLackJSON","groupByBoard","all","cont","makeLine","prefixes","setPrefixes","len","prefix","conflicts","conflicts2","siteID2","rmAll","refreshIcon","deferred","line","newLine","set404","oldData","addMenuEntries","entryEl","addCheckbox","disabled","ThreadWatcher$1","isEscaped","Symbol","voidElements","hFragment","h","tag","attributes","attribute","isVoid","TypeError","parseArchivePost","Fetcher","archiveTags","greentext","text2","j","num","thread_num","shortname","fileDeleted","trip","poster_hash","poster_country","troll_country_code","poster_country_name","troll_country_name","dateUTC","timestamp","dateText","fourchan_date","commentHTML","media","banned","media_filename","thumb_link","media_link","media_orig","media_h","media_w","media_hash","bytesToString","media_size","thumbURL","preview_orig","theight","preview_h","twidth","preview_w","exif","Tag","replyData","isCached","fetchedPost","archivedPost","flagCSS","cssVersion","rel","api","cleanCache","archive","encryptionOK","parseArchivedPost","QuotePreview","qp","pop","showHiddenThreads","changed","enabledOn","initFinished","postsInserted","search","history","state","searched","mode","currentSort","currentPage","getCurrentPage","processHash","popstate","resort","watchSettings","sortEntry","select","perBoardSort","navLinks","CatalogLinks","catalog","refreshFront","searchInput","setupSearch","onSearchInput","clearSearch","hideLabel","toggleHiddenThreads","selectRev","selectMode","selectSort","selectSize","lastLongOptions","lastLongInputs","lastLongThresholds","tRaw","hoverToggle","pagelist","pageNav","hat","addStyle","loaded","implementation","createDocument","topNavPos","previousElementSibling","timeEl","liveThreadData","innerHeight","pagesNum","endNotice","threadsOnPage","buildStructure","notify","toggleHide","threadPosition","floor","threadsNumPerPage","ThreadHiding","cycleSortType","types","options","option","selected","initFinishedFired","indexRefreshSeen","buildIndex","pushState","pageLoad","saveSort","saveLastLongThresholds","Number","isFinite","catalogReplies","hoverAdjust","setState","nCommands","userPageNav","buildCatalogReplies","scrollToIndex","hashCommands","paged","infinite","commands","leftover","command","pageBeforeSearch","oldpage","savePerBoard","buildPagelist","setupMode","setupSort","hashScroll","getPagesNum","sortedThreadIDs","getMaxPageNum","pagesRoot","maxPageNum","childElementCount","nextElementSibling","updateHideLabel","hiddenCount","liveThreadIDs","firstTime","notice","nTimeout","catalogJSON","reload","setType","stack","pages","parseThreadList","reduce","liveThreadDict","parsedThreads","results","filterResults","isOnTop","last_replies","isHiddenReply","buildThreads","withReplies","newThreads","newPosts","opRoot","threadData","stringify","bumplimit","ext","imagelimit","sticky","closed","buildReplies","lastReplies","buildCatalogViews","catalogThreads","catalogThread","sizeCatalogViews","ratio","catalogReply","tmp_time","sortType","repliesAvailable","lastlong","iterable","r","omitted_posts","lastlongD","b","reverse","querySearch","sortOnTop","topThreads","bottomThreads","buildCatalog","nodesPerPage","offset","node0","buildCatalogPart","searching","query","keywords","RegExp","values","searchMatch","keyword","Index$1","catalogWatch","catalogSet","hasStorage","hiddenThreads","localStorage","setItem","getItem","catalogSave","subtree","attributeFilter","hiddenThreads2","hasOwn","separator","settingsHtml","class","changelog","issues","CSS","report","www","sub","css","variables","words","CustomCSS","rmStyle","SWTinyboard","disabledFeatures","detect","script","m","awaitBoard","boardFor","mounted","op","boardList","boardListBottom","styleSheet","psa","nav","replyContainer","extra_files","parseJSONFile","unescape","bgColoredEl","isFileURL","preParsingFixes","broken","splitText","isNaN","infoNode","nameNode","isThumbExpanded","expanded","isLinkified","catalogPin","passMessagePage","captchaFAQ","PassMessage","msg","PassMessagePage","hd","Report","fit","getComputedStyle","visibility","resizeBy","form","fieldset","reason","submit","archiveSubmit","action","archiveResults","formData","success","PostSuccessful","_","SWYotsuba","hasIPCount","areMD5sDeferred","isOnePage","psaTop","searchBox","captcha","doctype","is404","isIncomplete","isBoardlessPage","isAuxiliaryPage","initAuxiliary","navigate","scriptData","parseThreadMetadata","abbr","br","hasCORS","uidColor","uid","charCodeAt","testNativeExtension","Parser","postMenuIcon","transformBoardList","spacer","chr","nodeValue","devicePixelRatio","shortFilename","spoilerThumb","random","sameThread","threadURL","postURL","resto","filedeleted","since4pass","country","board_flag","country_name","flag_name","capcodeHighlight","tim","w","fsize","tn_h","tn_w","hasDownscale","m_img","parseCommentDisplay","html2","capcodeDescription","capcodePlural","capcodeLC","capcodeLong","Admin","Mod","postInfo","postLink","quoteLink","nameHtml","nameBlockContent","postNumContent","generatePostInfoHtml","fileURL","fileThumb","fileBlock","fileContent","loading","generateFileHtml","postClass","wholePost","imgClass","generateCatalogThreadHtml","highlights","SW","tinyboard","yotsuba","FileInfo","quickFilterMD5","oldInfo","format","formatString","outputNode","formatters","T","l","L","N","fullname","p","B","K","M","Time","zeroPad","formatterCache","Map","formatter","Intl","DateTimeFormat","weekday","A","month","H","getHours","I","k","getMinutes","hour","hour12","formatToParts","find","P","S","getSeconds","y","Y","ReplyPruning","frag","setEnabled","hiddenFiles","total","totalFiles","other","QuoteThreading","active","showIfHidden","updateCount","boardTop","hidden1","hidden2","oldPos","lastChild","threadNewLink","rethread","setThread","inserted","toggleThreading","setThreadingState","navLinksBot","parents","lastParent","ancestor","descendants","threadContainer","prev2","ThreadUpdater","beep","checkPostCount","timer","updateLink","scrollBG","setInterval","settings","intervalShortcut","outdateCount","fileIDs","checkpost","playBeep","seconds","parseInt","confirmed","limit","cur","Settings","klass","updateThreadStatus","ipCountEl","postObjects","unique_ips","postObject","deletedPosts","deletedFiles","unreadCount","unreadQYCount","firstPost","addSection","sauce","advanced","disableAll","defineProperty","openSection","sectionToOpen","SettingsPage","export","import","onImport","section","sections","hyphenatedTitle","scrollTop","warnings","cantSync","why","cantSet","ads","ad","addWarning","warning","addCheckboxes","containers","description","level","keyFS","fs","perProtocolSettings","hiddenPosts","hiddenNum","removeItem","Conf2","downloadExport","Blob","confirm","reader","FileReader","onload","loadSettings","readAsText","convertFrom","loadletter","prevKey","newKey","convertSettings","uniqueid","mod","openEmptyQR","openQR","openOptions","sageru","sjis","watch","unreadCountTo0","expandAllImages","expandImage","zero","nextPage","previousPage","nextThread","previousThread","expandThread","openThreadTab","openThread","nextReply","previousReply","Scrolling","Verbose","WatchedThreads","upgrade","corrupted","setD","addSauces","addCSS","compareString","padStart","val2","error1","uids","Moe","warosu","fgts","not4plebs","DesuStorage","record","rice","siteProperties","faq","clear","selectFilter","ta","spellcheck","feature","listImageHost","customCSS","applyCSS","togglecss","itemsArchive","selectArchives","addArchiveTable","boardSelect","table","updateArchives","toLocaleString","tbody","archBoards","rows","boardOptions","row","addArchiveCell","td","setAttribute","saveSelectedArchive","selectedArchives","boardid","generateBoardList","img","tr","keybind","FappeTyme","fappe","lc","indicator","check","linkData","parseLink","parts","part","parseBoards","createSauceLink","missing","orig","parameter","skip","skipped","observer","node2","TURL","IMG","sMD5","hMD5","atob","semi","generateThumb","mozRequestFullScreen","webkitRequestFullScreen","ALLOW_KEYBOARD_INPUT","slideshow","frame","thumbs","current","menuButton","blank","start","stop","createSubEntries","postThumb","keydown","setHeight","candidate","overflow","thumbImg","errorCB","elType","webm","mp4","ogv","pdf","oldID","newID","offsetTop","setupTimer","cleanupTimer","startTimer","checkTimer","complete","advance","toggleSlideshow","rotateLeft","rotateRight","rotate","dataRotate","transform","mozCancelFullScreen","webkitExitFullscreen","dim","margin","minHeight","containerWidth","containerHeight","minWidth","maxWidth","maxHeight","setDelay","delayLabel","delayInput","ordered_types","embed","catalogRemove","service","batchSize","flushTitles","events","services","preview","process","regExp","closeFloat","dragEmbed","lastEmbed","pointerEvents","queue","post2","link2","preload","hrefEsc","videoHeight","counter","prettyPrint","getElementById","currentScript","hasOwnProperty","names","contentWindow","postMessage","element","onMessage","source","hotkey","notifications","toggleBoardList","toggleBarVisibility","postingIsEnabled","qr","notification","display","tags","sage","fileSubmit","toggleCustomCooldown","handleUrl","hl","kc","String","fromCharCode","code_tags","math_tags","sjis_tags","selStart","selectionStart","selEnd","selectionEnd","range","setSelectionRange","isSage","tab","replySelector","postEl","Cache","saveAPI","noCaptcha","captchas","getCount","neededRaw","haveCookie","submitCB","isOnlyQuotes","needed","prerequest","prerequested","cooldown","request","Replace","v2","lifetime","timeouts","prevNeeded","noscriptURL","recaptchaKey","auto","afterSetup","setupNoscript","setupJS","scrolling","textarea","render","widgetID","grecaptcha","sitekey","theme","cbNative","onRecaptchaLoaded","mutations","mutation","addedNodes","setupIFrame","setupTextArea","fixQRPosition","pasted","token","mimeTypes","validExtension","typeFromExtension","jpg","jpeg","png","gif","swf","extensionFromType","initReady","origToggle","captchaVersion","prop","def","min_width","min_height","max_width","max_height","max_size","max_size_video","max_comment","max_width_video","max_height_video","max_duration_video","forcedAnon","forced_anon","linkBot","getFile","drawFile","setFile","paste","dragOver","dropFile","generatePostableThreadsList","statusCheck","unhide","cleanNotifications","inBubble","bubbles","autohide","toggleSJIS","texPreviewShow","texPreviewHide","texPreview","wasOpen","setCustomCooldown","focusOverride","onclose","alert","connectionError","progress","openPost","isLocked","getSelection","postRange","Range","selectNode","rangeCount","asc","insideCode","getRangeAt","compareBoundaryPoints","START_TO_START","setStartBefore","END_TO_END","setEndAfter","cloneContents","commonAncestorContainer","wasOnlyQuotes","caretPos","quotedText","characterCount","charCount","openError","getContext","drawImage","revokeObjectURL","handleFiles","dataTransfer","dropEffect","clipboardData","score","file2","kind","getAsFile","score2","pasteFF","pasteArea","bstr","Uint8Array","urlDefault","preventAutoPost","permission","prompt","fileButton","handleFile","nfiles","isText","pasting","openFileInput","fileInput","setNode","flagsInput","sjisToggle","texButton","drawButton","oekaki","draw","noFile","oekakiButton","fileRM","rmFile","urlButton","dumpButton","DataTransferItemList","persona","addFlag","country_flags","board_flags","filetag","forceSave","flashTag","require_subject","text_only","lock","MAX_FILE_SIZE","pwd","getPassword","upfile","responseType","withCredentials","onprogress","upload","isUploadFinished","currentCaptcha","challenge","unlock","connErr","errorCount","addDelay","mi","addMute","h1","lastPostToThread","waitForThread","attempts","deletion","maxDelay","isSetup","isCounting","categorize","secondsDeletion","mergeChange","scope","nCooldowns","elapsed","editFile","canvas","videoWidth","toBlob","snapshot","edit","FCX","oekakiCB","Tegaki","flatten","oekakiLatest","oekakiName","bg","onDone","onCancel","bgColor","removeEventListener","naturalWidth","onOpenImageLoaded","onDoneCb","resume","always","parseItem","draggable","dumpList","dismissErrors","rectEl","rectList","scrollLeft","showFileData","forced","updateComment","saveFilename","updateFilename","setComment","rmErrored","fileError","checkSize","rmMetadata","backgroundImage","readFile","canPlayType","onerror","checkDimensions","setThumbnail","cv","attr","newName","long","pasteText","dragStart","setDragImage","dragEnd","dragEnter","dragLeave","drop","oldIndex","newIndex","eventPageRequest","chrome","runtime","addListener","params","sendMessage","binary","headers","responseHeaderString","fallback","getAllResponseHeaders","gmOptions","method","overrideMimeType","xhr","ArrayBuffer","responseText","responseHeaders","onabort","GM","xmlHttpRequest","contentType","contentDisposition","mime","Request","prototype","headerName","header","gmReq","ontimeout","cbFail","origins","CrossOrigin$1","fc","HTMLFormElement","FormData","fd","pageXHR","wrappedJSObject","XMLHttpRequest","XPCNativeWrapper","testCORB","ajaxPage","setRequestHeader","warn","send","requestID","ajaxPageInit","DOMParser","parseFromString","bucket","url0","reqs","testf","addCSP","policy","httpEquiv","path","evaluate","singleNodeValue","classNames","createDocumentFragment","insertBefore","replaceChild","properties2","globalThis","extension","cloneInto","defaultView","cancelable","navigator","userAgent","GM_info","unsafeConstructors","unsafeWindow","obj2","openInTab","GM_openInTab","taskQueue","execTask","Promise","resolve","then","mozHasAudio","webkitAudioDecodedByteCount","luma","rgb","oneItemSugar","oldValue","local","storage","onChanged","area","newValue","crxWorking","getManifest","crxWarningShown","lastError","result2","exceedsQuota","QUOTA_BYTES_PER_ITEM","setArea","setSync","done","deleteValue","BroadcastChannel","GM_addValueChangeListener","GM_deleteValue","getValue","GM_getValue","listValues","GM_listValues","setValue","GM_setValue","key2","remote","onChange","getSync","syncChannel","catch","$$1","IDs","handleQuotes","qPost","Get$1","filters","isstring","excludes","mask","only","noti","filterObj","filtersForType","boardsRaw","parseBoardsMemo","siteFilter","boardID2","hideable","filtersOrMap","isArray","catalogData","catalogParse","catalogViewNative","valueF","v","addFilter","re","removeFilters","res","flat","escape","showFilters","tl","textLength","quickFilterCB","undo","makeFilter","Site","defaultProperties","canonical","parseURL","catalogURL","catalogLink","useCatalog","setLinks","bottomBoardList","tail","indexOptions","externalParse","externalList","external","jsonIndex","nativeCatalog","noticesRoot","setBarPosition","box","barFixedToggler","headerToggler","scrollHeaderToggler","barPositionToggler","linkJustifyToggler","customNavToggler","footerToggler","shortcutToggler","editCustomNav","menuToggle","toggleBarFixed","toggleBarPosition","toggleHideBarOnScroll","toggleLinkJustify","toggleFooterVisibility","toggleShortcutIcons","toggleCustomNav","setBarFixed","setHideBarOnScroll","setBarVisibility","setLinkJustify","setShortcutIcons","setFooterVisibility","createNotification","setBoardList","generateFullBoardList","footer","absbot","cloneTopNav","cs","enableDesktopNotifications","shortcuts","btn","setCustomNav","fullBoardList","mapCustomNavigation","m0","m1","m2","urlV","urlIC","custom","full","showBoardList","centered","fixed","hideBarOnScroll","offsetY","pageYOffset","previousOffset","cust","replaceState","down","offsetParent","headRect","rmShortcut","authorize","disable","requestPermission","Header$1","opacity","responses","nloaded","fail","archiveUIDs","dest","Developer","Verified","https","reports","alternative","Redirect$1","ImageHover","scale","ImageLoader","prefetchEnabled","prefetchAll","replaceVideo","prefetch","poster","isPrefetched","qpClone","Metadata","readInt","RevealSpoilers","regString","space","saved","endNode","word","part1","part2","makeRange","makeLink","startNode","startOffset","endOffset","createRange","setStart","setEnd","encodedDomain","startContainer","charAt","endContainer","extractContents","insertNode","ArchiveLink","typeParam","isSearch","CopyTextLink","copy","execCommand","DeleteLink","fileEl","postEntry","linkText","fileEntry","menuText","fileOnly","onlyimgdel","resDoc","DownloadLink","ReportLink","dims","AntiAutoplay","processVideo","Banner","banner","setTitle","bannerCnt","choices","contentEditable","Flash","SWFEmbed","tid","Fourchan","initBoard","pre","prettyPrintOne","MathJax","Hub","Queue","loadMathJax","math","clickable_ids","idClick","wbrs","wbr","IDColor","ids","compute","color","backgroundColor","IDHighlight","IDPostCount","ModContact","moved","specific","template","moveNote","Manager","qa","NormalizeURL","PostJumper","makeButtons","addListeners","addButtons","buttonClick","toJumper","dir","jumper","jumper2","fromJumper","prevPos","destPos","PSA","announcement","PSAHiding","RemoveSpoilers","unspoiler","ThreadLinks","Tinyboard","ajaxComplete","responseJSON","noko","originalNoko","tb_settings","always_noko_replies","MarkNewIPs","markNew","markOld","ThreadStats","postIndex","statsHTML","statsTitle","showPurgePos","postCountEl","fileCountEl","pageCountEl","fetchPage","showPage","onThreadsLoad","purgePos","lastPageUpdate","retry","PassLink","styleSelector","passLink","QuoteInline","qiQuote","findRoot","isBacklink","qroot","forwarded","QuoteBacklink","bottomBacklinks","firstNode","secondNode","markYours","getContainer","backlinkContainer","QuoteCT","QuoteOP","Quotify","parseArchivelink","deadlink","parseDeadlink","fixDeadlink","quoteID","fetchable","green","Polyfill","mozMatchesSelector","webkitMatchesSelector","HTMLCanvasElement","encoderOptions","toDataURL","ui8a","RestoreDeletedFromArchive","restore","nrRestored","archivePosts","raw","postIdNr","indexOfNext","findIndex","newPost","insertAdjacentElement","menuEntry","frameElement","expectInitFinished","mountedCB","isMounted","mountedCBs","error2","fromCharCode0","Error","boardTitle","previousversion","isFirstRun","initFeatures","threadArchived","initStyle","features","mobileLink","innerWidth","bgColorStyle","keyboard","setClass","mainStyleSheet","styleSheets","knownStyles","setStyle","backgroundRepeat","backgroundPosition","initCatalog","initThread","addThreadsObserver","addThreads","addPostsObserver","addPosts","parseThreads","callbackNodesDB","threadRoots","boardObj","postRoots","unshift","parsePosts","postRoot","records","threadsRM","anyRemoved","removedNodes","addCatalogThreadsObserver","addCatalogThreads","parseCatalogThreads","softTask","parseError","reportLink","logs","lines","fork","details","addDetails","newIssueMaxLength","newIssue","scriptHandler","thisPageIsLegit","Main$1"],"mappings":"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AAe,EACb,EACA,iDACA,GAEF,eAAgB,EACd,EACA,mCACA,GAEF,YAAa,EACX,EACA,wFACA,GAEF,gBAAiB,EACf,EACA,0DACA,IAIJC,WAAc,CACZ,iBAAkB,EAChB,EACA,6FAEF,eAAgB,EACd,EACA,iDAEF,eAAgB,EACd,EACA,uDACA,GAEF,2BAA4B,EAC1B,EACA,kEACA;AAEF,iBAAkB,EAChB,EACA,yDAEF,cAAe,EACb,EACA,2DAEF,0BAA2B,EACzB,EACA,4DAEF,2BAA4B,EAC1B,EACA,6DACA,GAEF,uBAAwB,EACtB,EACA,qEACA,GAEF,wBAAyB,EACvB,EACA,4EAEF,eAAgB,EACd,EACA,kCAEF,oBAAqB,EACnB,EACA,mDACA,GAEF,sBAAuB,EACrB,EACA,8CACA,GAEF,8BAA+B,EAC7B,EACA,sFAEF,iBAAkB,EAChB,EACA;AAEF,uBAAwB,EACtB,EACA,iDACA,GAEF,4BAA6B,EAC3B,EACA,8DACA,GAEF,eAAgB,EACd,EACA,qEAEF,gBAAiB,EACf,EACA,oGAEF,oBAAqB,EACnB,EACA,oDACA,IAIJ,uBAAwB,CACtB,cAAe,EACb,EACA,wEAEF,gBAAiB,EACf,EACA,iDACA,GAEF,eAAgB,EACd,EACA,mDACA,GAEF,uBAAwB,EACtB,EACA,oGACA,GAEF,mBAAoB,EAClB,EACA,wCACA;AAEF,mBAAoB,EAClB,EACA,kEACA,GAEF,qBAAsB,EACpB,EACA,gFACA,GAEF,oCAAqC,EACnC,EACA,yEACA,GAEF,uBAAwB,EACtB,EACA,iEACA,GAEFC,SAAY,EACV,EACA,oDACA,GAEF,gCAAiC,EAC/B,EACA,oEACA,GAEF,oBAAqB,EACnB,EACA,uEACA,GAEF,6BAA8B,EAC5B,EACA,6DACA,GAEF,yBAA0B,EACxB,EACA,0EAEF,YAAa,EACX,EACA,2DAIJ,cAAe;AACb,kBAAmB,EACjB,EACA,wBAEF,eAAgB,EACd,EACA,2BACA,GAEF,mBAAoB,EAClB,EACA,0CACA,GAEF,iBAAkB,EAChB,EACA,gCAEF,kCAAmC,EACjC,EACA,qEACA,GAEF,wBAAyB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"}